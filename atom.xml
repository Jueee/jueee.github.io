<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>小决的专栏</title>
  
  <subtitle>进一寸有一寸的欢喜</subtitle>
  <link href="https://jueee.github.io/atom.xml" rel="self"/>
  
  <link href="https://jueee.github.io/"/>
  <updated>2020-12-08T10:52:48.188Z</updated>
  <id>https://jueee.github.io/</id>
  
  <author>
    <name>小决</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Vue 可拖拽组件 vue-grid-layout 嵌套页面</title>
    <link href="https://jueee.github.io/2020/12/2020-12-08-Vue%E5%8F%AF%E6%8B%96%E6%8B%BD%E7%BB%84%E4%BB%B6vue-grid-layout%E5%B5%8C%E5%A5%97%E9%A1%B5%E9%9D%A2/"/>
    <id>https://jueee.github.io/2020/12/2020-12-08-Vue%E5%8F%AF%E6%8B%96%E6%8B%BD%E7%BB%84%E4%BB%B6vue-grid-layout%E5%B5%8C%E5%A5%97%E9%A1%B5%E9%9D%A2/</id>
    <published>2020-12-08T00:00:00.000Z</published>
    <updated>2020-12-08T10:52:48.188Z</updated>
    
    <content type="html"><![CDATA[<h3 id="嵌套页面方式"><a href="#嵌套页面方式" class="headerlink" title="嵌套页面方式"></a>嵌套页面方式</h3><ul><li>普通嵌套</li><li> ifream 嵌套</li></ul><a id="more"></a><h3 id="普通嵌套"><a href="#普通嵌套" class="headerlink" title="普通嵌套"></a>普通嵌套</h3><ol><li><p>vue-grid-layout 设置：</p><pre class="language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>grid-layout</span>            <span class="token attr-name">:layout</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>layoutData<span class="token punctuation">"</span></span>            <span class="token attr-name">:col-num</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>6<span class="token punctuation">"</span></span>            <span class="token attr-name">:row-height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>30<span class="token punctuation">"</span></span>            <span class="token attr-name">:is-draggable</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span>            <span class="token attr-name">:is-resizable</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span>            <span class="token attr-name">:is-mirrored</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>false<span class="token punctuation">"</span></span>            <span class="token attr-name">:vertical-compact</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span>            <span class="token attr-name">:auto-size</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span>            <span class="token attr-name">:margin</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>[10, 10]<span class="token punctuation">"</span></span>            <span class="token attr-name">:use-css-transforms</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span>            <span class="token punctuation">&gt;</span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>grid-item</span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>item in layoutData<span class="token punctuation">"</span></span>              <span class="token attr-name">:x</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>item.x<span class="token punctuation">"</span></span>              <span class="token attr-name">:y</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>item.y<span class="token punctuation">"</span></span>              <span class="token attr-name">:w</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>item.w<span class="token punctuation">"</span></span>              <span class="token attr-name">:h</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>item.h<span class="token punctuation">"</span></span>              <span class="token attr-name">:i</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>item.i<span class="token punctuation">"</span></span>              <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>item.i<span class="token punctuation">"</span></span>              <span class="token attr-name">@resize</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>resizeEvent<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>item.i == 0<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>indexGrid0</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>indexGrid0</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>item.i == 1<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>indexGrid1</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>indexGrid1</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>item.i == 2<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>indexGrid2</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>indexGrid2</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>item.i == 3<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>indexGrid3</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>indexGrid3</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>item.i == 4<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>indexGrid4</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>indexGrid4</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>item.i == 5<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>indexGrid5</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>indexGrid5</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>grid-item</span><span class="token punctuation">&gt;</span></span></code></pre></li><li><p>引入页面</p><pre class="language-js" data-language="js"><code class="language-js"><span class="token keyword">import</span> VueGridLayout <span class="token keyword">from</span> <span class="token string">'vue-grid-layout'</span><span class="token punctuation">;</span><span class="token keyword">import</span> indexGrid0 <span class="token keyword">from</span> <span class="token string">'@/views/dashboard/index-grid0'</span><span class="token keyword">import</span> indexGrid1 <span class="token keyword">from</span> <span class="token string">'@/views/dashboard/index-grid1'</span><span class="token keyword">import</span> indexGrid2 <span class="token keyword">from</span> <span class="token string">'@/views/dashboard/index-grid2'</span><span class="token keyword">import</span> indexGrid3 <span class="token keyword">from</span> <span class="token string">'@/views/dashboard/index-grid3'</span><span class="token keyword">import</span> indexGrid4 <span class="token keyword">from</span> <span class="token string">'@/views/dashboard/index-grid4'</span><span class="token keyword">import</span> indexGrid5 <span class="token keyword">from</span> <span class="token string">'@/views/dashboard/index-grid5'</span><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>  components<span class="token operator">:</span> <span class="token punctuation">{</span>      GridLayout<span class="token operator">:</span> VueGridLayout<span class="token punctuation">.</span>GridLayout<span class="token punctuation">,</span>      GridItem<span class="token operator">:</span> VueGridLayout<span class="token punctuation">.</span>GridItem<span class="token punctuation">,</span>      <span class="token string">'indexGrid0'</span><span class="token operator">:</span> indexGrid0<span class="token punctuation">,</span>      <span class="token string">'indexGrid1'</span><span class="token operator">:</span> indexGrid1<span class="token punctuation">,</span>      <span class="token string">'indexGrid2'</span><span class="token operator">:</span> indexGrid2<span class="token punctuation">,</span>      <span class="token string">'indexGrid3'</span><span class="token operator">:</span> indexGrid3<span class="token punctuation">,</span>      <span class="token string">'indexGrid4'</span><span class="token operator">:</span> indexGrid4<span class="token punctuation">,</span>      <span class="token string">'indexGrid5'</span><span class="token operator">:</span> indexGrid5  <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">}</span></code></pre></li><li><p>页面示例</p><pre class="language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span>11111<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">   <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span><span class="token punctuation">}</span></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">scoped</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css"></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span></code></pre></li></ol><h3 id="ifream-嵌套"><a href="#ifream-嵌套" class="headerlink" title="ifream 嵌套"></a>ifream 嵌套</h3><ol><li><p>vue-grid-layout 设置：</p><pre class="language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>grid-layout</span>             <span class="token attr-name">:layout</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>layoutData<span class="token punctuation">"</span></span>             <span class="token attr-name">:col-num</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>6<span class="token punctuation">"</span></span>             <span class="token attr-name">:row-height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>30<span class="token punctuation">"</span></span>             <span class="token attr-name">:is-draggable</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span>             <span class="token attr-name">:is-resizable</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span>             <span class="token attr-name">:is-mirrored</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>false<span class="token punctuation">"</span></span>             <span class="token attr-name">:vertical-compact</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span>             <span class="token attr-name">:auto-size</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span>             <span class="token attr-name">:margin</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>[10, 10]<span class="token punctuation">"</span></span>             <span class="token attr-name">:use-css-transforms</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span>             <span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>grid-item</span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>item in layoutData<span class="token punctuation">"</span></span>               <span class="token attr-name">:x</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>item.x<span class="token punctuation">"</span></span>               <span class="token attr-name">:y</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>item.y<span class="token punctuation">"</span></span>               <span class="token attr-name">:w</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>item.w<span class="token punctuation">"</span></span>               <span class="token attr-name">:h</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>item.h<span class="token punctuation">"</span></span>               <span class="token attr-name">:i</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>item.i<span class="token punctuation">"</span></span>               <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>item.i<span class="token punctuation">"</span></span>               <span class="token attr-name">@resize</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>resizeEvent<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>iframe</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>item.i == 0<span class="token punctuation">"</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>./indexGrid0<span class="token punctuation">"</span></span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>100%<span class="token punctuation">"</span></span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>100%<span class="token punctuation">"</span></span> <span class="token attr-name">frameborder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0<span class="token punctuation">"</span></span> <span class="token attr-name">scrolling</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>auto<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>iframe</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>iframe</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>item.i == 1<span class="token punctuation">"</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>./indexGrid1<span class="token punctuation">"</span></span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>100%<span class="token punctuation">"</span></span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>100%<span class="token punctuation">"</span></span> <span class="token attr-name">frameborder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0<span class="token punctuation">"</span></span> <span class="token attr-name">scrolling</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>auto<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>iframe</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>iframe</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>item.i == 2<span class="token punctuation">"</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>./indexGrid2<span class="token punctuation">"</span></span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>100%<span class="token punctuation">"</span></span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>100%<span class="token punctuation">"</span></span> <span class="token attr-name">frameborder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0<span class="token punctuation">"</span></span> <span class="token attr-name">scrolling</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>auto<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>iframe</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>iframe</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>item.i == 3<span class="token punctuation">"</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>./indexGrid3<span class="token punctuation">"</span></span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>100%<span class="token punctuation">"</span></span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>100%<span class="token punctuation">"</span></span> <span class="token attr-name">frameborder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0<span class="token punctuation">"</span></span> <span class="token attr-name">scrolling</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>auto<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>iframe</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>iframe</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>item.i == 4<span class="token punctuation">"</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>./indexGrid4<span class="token punctuation">"</span></span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>100%<span class="token punctuation">"</span></span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>100%<span class="token punctuation">"</span></span> <span class="token attr-name">frameborder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0<span class="token punctuation">"</span></span> <span class="token attr-name">scrolling</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>auto<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>iframe</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>iframe</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>item.i == 5<span class="token punctuation">"</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://www.baidu.com/<span class="token punctuation">"</span></span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>100%<span class="token punctuation">"</span></span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>100%<span class="token punctuation">"</span></span> <span class="token attr-name">frameborder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0<span class="token punctuation">"</span></span> <span class="token attr-name">scrolling</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>auto<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>iframe</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>grid-item</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>grid-layout</span><span class="token punctuation">&gt;</span></span>  </code></pre><p>或者：</p><pre class="language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>grid-item</span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>item in layoutData<span class="token punctuation">"</span></span>                   <span class="token attr-name">:x</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>item.x<span class="token punctuation">"</span></span>                   <span class="token attr-name">:y</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>item.y<span class="token punctuation">"</span></span>                   <span class="token attr-name">:w</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>item.w<span class="token punctuation">"</span></span>                   <span class="token attr-name">:h</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>item.h<span class="token punctuation">"</span></span>                   <span class="token attr-name">:i</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>item.i<span class="token punctuation">"</span></span>                   <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>item.i<span class="token punctuation">"</span></span>                   <span class="token attr-name">@resize</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>resizeEvent<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>widget-title<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>{{ item.title }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>iframe</span> <span class="token attr-name">:src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>item.src<span class="token punctuation">"</span></span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>100%<span class="token punctuation">"</span></span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>100%<span class="token punctuation">"</span></span> <span class="token attr-name">frameborder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0<span class="token punctuation">"</span></span> <span class="token attr-name">scrolling</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>auto<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>iframe</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>grid-item</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>  methods<span class="token operator">:</span> <span class="token punctuation">{</span>    <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token keyword">this</span><span class="token punctuation">.</span>layoutData <span class="token operator">=</span> <span class="token punctuation">[</span>          <span class="token punctuation">{</span><span class="token string">"x"</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token string">"y"</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token string">"w"</span><span class="token operator">:</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token string">"h"</span><span class="token operator">:</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token string">"i"</span><span class="token operator">:</span><span class="token string">"0"</span><span class="token punctuation">,</span><span class="token string">"title"</span><span class="token operator">:</span><span class="token string">"System Information"</span><span class="token punctuation">,</span><span class="token string">"src"</span><span class="token operator">:</span><span class="token string">"./indexGrid0"</span><span class="token punctuation">}</span><span class="token punctuation">,</span>          <span class="token punctuation">{</span><span class="token string">"x"</span><span class="token operator">:</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token string">"y"</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token string">"w"</span><span class="token operator">:</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token string">"h"</span><span class="token operator">:</span><span class="token number">11</span><span class="token punctuation">,</span><span class="token string">"i"</span><span class="token operator">:</span><span class="token string">"1"</span><span class="token punctuation">,</span><span class="token string">"title"</span><span class="token operator">:</span><span class="token string">"System Resources"</span><span class="token punctuation">,</span><span class="token string">"src"</span><span class="token operator">:</span><span class="token string">"./indexGrid1"</span><span class="token punctuation">}</span><span class="token punctuation">,</span>          <span class="token punctuation">{</span><span class="token string">"x"</span><span class="token operator">:</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token string">"y"</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token string">"w"</span><span class="token operator">:</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token string">"h"</span><span class="token operator">:</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token string">"i"</span><span class="token operator">:</span><span class="token string">"2"</span><span class="token punctuation">,</span><span class="token string">"title"</span><span class="token operator">:</span><span class="token string">"Scanning Statistics"</span><span class="token punctuation">,</span><span class="token string">"src"</span><span class="token operator">:</span><span class="token string">"./indexGrid2"</span><span class="token punctuation">}</span><span class="token punctuation">,</span>          <span class="token punctuation">{</span><span class="token string">"x"</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token string">"y"</span><span class="token operator">:</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token string">"w"</span><span class="token operator">:</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token string">"h"</span><span class="token operator">:</span><span class="token number">11</span><span class="token punctuation">,</span><span class="token string">"i"</span><span class="token operator">:</span><span class="token string">"3"</span><span class="token punctuation">,</span><span class="token string">"title"</span><span class="token operator">:</span><span class="token string">"Threats Distribution - Last 24 Hours"</span><span class="token punctuation">,</span><span class="token string">"src"</span><span class="token operator">:</span><span class="token string">"./indexGrid3"</span><span class="token punctuation">}</span><span class="token punctuation">,</span>          <span class="token punctuation">{</span><span class="token string">"x"</span><span class="token operator">:</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token string">"y"</span><span class="token operator">:</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token string">"w"</span><span class="token operator">:</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token string">"h"</span><span class="token operator">:</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token string">"i"</span><span class="token operator">:</span><span class="token string">"4"</span><span class="token punctuation">,</span><span class="token string">"title"</span><span class="token operator">:</span><span class="token string">"Pending Job Statistics"</span><span class="token punctuation">,</span><span class="token string">"src"</span><span class="token operator">:</span><span class="token string">"./indexGrid4"</span><span class="token punctuation">}</span><span class="token punctuation">,</span>          <span class="token punctuation">{</span><span class="token string">"x"</span><span class="token operator">:</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token string">"y"</span><span class="token operator">:</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token string">"w"</span><span class="token operator">:</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token string">"h"</span><span class="token operator">:</span><span class="token number">11</span><span class="token punctuation">,</span><span class="token string">"i"</span><span class="token operator">:</span><span class="token string">"5"</span><span class="token punctuation">,</span><span class="token string">"title"</span><span class="token operator">:</span><span class="token string">"Baidu"</span><span class="token punctuation">,</span><span class="token string">"src"</span><span class="token operator">:</span><span class="token string">"https://www.baidu.com/"</span><span class="token punctuation">}</span>      <span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token function">created</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span></code></pre></li><li><p>路由配置 <code>src\router\index.js</code>：</p><pre class="language-js" data-language="js"><code class="language-js"><span class="token keyword">export</span> <span class="token keyword">const</span> constantRouterMap <span class="token operator">=</span> <span class="token punctuation">[</span>  <span class="token punctuation">{</span>    path<span class="token operator">:</span> <span class="token string">'/indexGrid0'</span><span class="token punctuation">,</span>    <span class="token function-variable function">component</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'@/views/dashboard/index-grid0'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    hidden<span class="token operator">:</span> <span class="token boolean">true</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token punctuation">{</span>    path<span class="token operator">:</span> <span class="token string">'/indexGrid1'</span><span class="token punctuation">,</span>    <span class="token function-variable function">component</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'@/views/dashboard/index-grid1'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    hidden<span class="token operator">:</span> <span class="token boolean">true</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token punctuation">{</span>    path<span class="token operator">:</span> <span class="token string">'/indexGrid2'</span><span class="token punctuation">,</span>    <span class="token function-variable function">component</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'@/views/dashboard/index-grid2'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    hidden<span class="token operator">:</span> <span class="token boolean">true</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token punctuation">{</span>    path<span class="token operator">:</span> <span class="token string">'/indexGrid3'</span><span class="token punctuation">,</span>    <span class="token function-variable function">component</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'@/views/dashboard/index-grid3'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    hidden<span class="token operator">:</span> <span class="token boolean">true</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token punctuation">{</span>    path<span class="token operator">:</span> <span class="token string">'/indexGrid4'</span><span class="token punctuation">,</span>    <span class="token function-variable function">component</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'@/views/dashboard/index-grid4'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    hidden<span class="token operator">:</span> <span class="token boolean">true</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token punctuation">{</span>    path<span class="token operator">:</span> <span class="token string">'/indexGrid5'</span><span class="token punctuation">,</span>    <span class="token function-variable function">component</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'@/views/dashboard/index-grid5'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    hidden<span class="token operator">:</span> <span class="token boolean">true</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">]</span></code></pre></li><li><p>页面效果：</p><p><img src="/images/2020/12/image-20201208155342443.png" alt="image-20201208155342443" loading="lazy"></p></li></ol><h4 id="iframe-按钮刷新"><a href="#iframe-按钮刷新" class="headerlink" title="iframe 按钮刷新"></a>iframe 按钮刷新</h4><p>增加刷新按钮：</p><pre class="language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>grid-item</span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>item in layoutData<span class="token punctuation">"</span></span>                   <span class="token attr-name">:x</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>item.x<span class="token punctuation">"</span></span>                   <span class="token attr-name">:y</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>item.y<span class="token punctuation">"</span></span>                   <span class="token attr-name">:w</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>item.w<span class="token punctuation">"</span></span>                   <span class="token attr-name">:h</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>item.h<span class="token punctuation">"</span></span>                   <span class="token attr-name">:i</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>item.i<span class="token punctuation">"</span></span>                   <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>item.i<span class="token punctuation">"</span></span>                   <span class="token attr-name">@resize</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>resizeEvent<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>refresh-button<span class="token punctuation">"</span></span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>refreshPage(item.i)<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>el-icon-refresh<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>iframe</span> <span class="token attr-name">:src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>item.src<span class="token punctuation">"</span></span> <span class="token attr-name">:id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>`iframe${(item.i)}`<span class="token punctuation">"</span></span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>100%<span class="token punctuation">"</span></span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>100%<span class="token punctuation">"</span></span> <span class="token attr-name">frameborder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0<span class="token punctuation">"</span></span> <span class="token attr-name">scrolling</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>auto<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>iframe</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>grid-item</span><span class="token punctuation">&gt;</span></span></code></pre><p>对应 JS 方法：</p><pre class="language-js" data-language="js"><code class="language-js"><span class="token function">refreshPage</span><span class="token punctuation">(</span><span class="token parameter">pageNum</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">var</span> _iframe <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'iframe'</span><span class="token operator">+</span>pageNum<span class="token punctuation">)</span><span class="token punctuation">;</span>    _iframe<span class="token punctuation">.</span>contentWindow<span class="token punctuation">.</span>location<span class="token punctuation">.</span><span class="token function">reload</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><div class="note info"><p>Vue 的标签属性 label 中字符串拼接变量：</p><pre class="language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-form-item</span> <span class="token attr-name">:label</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>`参数${(index + 1)}类型`<span class="token punctuation">"</span></span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>(item, index,) in props.row.params<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">v-text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>item<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-form-item</span><span class="token punctuation">&gt;</span></span></code></pre></div>]]></content>
    
    
    <summary type="html">&lt;h3 id=&quot;嵌套页面方式&quot;&gt;&lt;a href=&quot;#嵌套页面方式&quot; class=&quot;headerlink&quot; title=&quot;嵌套页面方式&quot;&gt;&lt;/a&gt;嵌套页面方式&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;普通嵌套&lt;/li&gt;
&lt;li&gt; ifream 嵌套&lt;/li&gt;
&lt;/ul&gt;</summary>
    
    
    
    <category term="Vue" scheme="https://jueee.github.io/categories/Vue/"/>
    
    
    <category term="Vue" scheme="https://jueee.github.io/tags/Vue/"/>
    
  </entry>
  
  <entry>
    <title>ElasticSearch 集成 Spring 之 RestHighLevelClient 示例</title>
    <link href="https://jueee.github.io/2020/12/2020-12-06-ElasticSearch%E9%9B%86%E6%88%90Spring%E4%B9%8BRestHighLevelClient%E7%A4%BA%E4%BE%8B/"/>
    <id>https://jueee.github.io/2020/12/2020-12-06-ElasticSearch%E9%9B%86%E6%88%90Spring%E4%B9%8BRestHighLevelClient%E7%A4%BA%E4%BE%8B/</id>
    <published>2020-12-06T00:00:00.000Z</published>
    <updated>2020-12-09T05:57:08.644Z</updated>
    
    <content type="html"><![CDATA[<h3 id="RestHighLevelClient"><a href="#RestHighLevelClient" class="headerlink" title="RestHighLevelClient"></a>RestHighLevelClient</h3><p>RestHighLevelClient 是官方指定的连接 API。</p><p>另外一个是 TransportClient，但是 TransportClient 这个是已经废弃不用的，所以会在 ES8.0 之后完全移除，也就是说 8.0 之后就无法使用了。</p><p>引入依赖：</p><pre class="language-xml" data-language="xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.elasticsearch.client<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>elasticsearch-rest-client<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>${elasticsearch.version}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.elasticsearch.client<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>elasticsearch-rest-high-level-client<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>${elasticsearch.version}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span></code></pre><a id="more"></a><h3 id="配置连接"><a href="#配置连接" class="headerlink" title="配置连接"></a>配置连接</h3><p>配置文件 <code>application.properties</code>：</p><pre class="language-properties" data-language="properties"><code class="language-properties"><span class="token attr-name">spring.data.elasticsearch.host</span><span class="token punctuation">=</span><span class="token attr-value">192.168.10.31:192.168.10.32:192.168.10.33:192.168.10.34</span><span class="token attr-name">spring.data.elasticsearch.port</span><span class="token punctuation">=</span><span class="token attr-value">9200</span><span class="token attr-name">spring.data.elasticsearch.username</span><span class="token punctuation">=</span><span class="token attr-value">elastic</span><span class="token attr-name">spring.data.elasticsearch.password</span><span class="token punctuation">=</span><span class="token attr-value">123456</span></code></pre><p>配置 Java 类：</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpHost</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>http<span class="token punctuation">.</span>auth<span class="token punctuation">.</span></span><span class="token class-name">AuthScope</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>http<span class="token punctuation">.</span>auth<span class="token punctuation">.</span></span><span class="token class-name">UsernamePasswordCredentials</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>http<span class="token punctuation">.</span>client<span class="token punctuation">.</span></span><span class="token class-name">CredentialsProvider</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>http<span class="token punctuation">.</span>impl<span class="token punctuation">.</span>client<span class="token punctuation">.</span></span><span class="token class-name">BasicCredentialsProvider</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>elasticsearch<span class="token punctuation">.</span>client<span class="token punctuation">.</span></span><span class="token class-name">RestClient</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>elasticsearch<span class="token punctuation">.</span>client<span class="token punctuation">.</span></span><span class="token class-name">RestHighLevelClient</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>slf4j<span class="token punctuation">.</span></span><span class="token class-name">Logger</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>slf4j<span class="token punctuation">.</span></span><span class="token class-name">LoggerFactory</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>beans<span class="token punctuation">.</span>factory<span class="token punctuation">.</span></span><span class="token class-name">DisposableBean</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>beans<span class="token punctuation">.</span>factory<span class="token punctuation">.</span></span><span class="token class-name">FactoryBean</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>beans<span class="token punctuation">.</span>factory<span class="token punctuation">.</span></span><span class="token class-name">InitializingBean</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>beans<span class="token punctuation">.</span>factory<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Value</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Configuration</span><span class="token punctuation">;</span><span class="token annotation punctuation">@Configuration</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ElasticsearchConfiguration</span> <span class="token keyword">implements</span> <span class="token class-name">FactoryBean</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">RestHighLevelClient</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">,</span> <span class="token class-name">InitializingBean</span><span class="token punctuation">,</span> <span class="token class-name">DisposableBean</span> <span class="token punctuation">{</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">Logger</span> LOGGER <span class="token operator">=</span> <span class="token class-name">LoggerFactory</span><span class="token punctuation">.</span><span class="token function">getLogger</span><span class="token punctuation">(</span><span class="token class-name">ElasticsearchConfiguration</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">"${spring.data.elasticsearch.host}"</span><span class="token punctuation">)</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> host<span class="token punctuation">;</span>    <span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">"${spring.data.elasticsearch.port}"</span><span class="token punctuation">)</span>    <span class="token keyword">private</span> <span class="token keyword">int</span> port<span class="token punctuation">;</span>    <span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">"${spring.data.elasticsearch.username}"</span><span class="token punctuation">)</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> username<span class="token punctuation">;</span>    <span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">"${spring.data.elasticsearch.password}"</span><span class="token punctuation">)</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> password<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">RestHighLevelClient</span> restHighLevelClient<span class="token punctuation">;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>        <span class="token keyword">try</span> <span class="token punctuation">{</span>            LOGGER<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"Closing elasticSearch client"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>restHighLevelClient <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                restHighLevelClient<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token keyword">final</span> <span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>            LOGGER<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">"Error closing ElasticSearch client: "</span><span class="token punctuation">,</span> e<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token class-name">RestHighLevelClient</span> <span class="token function">getObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> restHighLevelClient<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">RestHighLevelClient</span><span class="token punctuation">&gt;</span></span> <span class="token function">getObjectType</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token class-name">RestHighLevelClient</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">isSingleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">afterPropertiesSet</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>        <span class="token function">buildClient</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">buildClient</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">final</span> <span class="token class-name">CredentialsProvider</span> credentialsProvider <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BasicCredentialsProvider</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        credentialsProvider<span class="token punctuation">.</span><span class="token function">setCredentials</span><span class="token punctuation">(</span><span class="token class-name">AuthScope</span><span class="token punctuation">.</span>ANY<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">UsernamePasswordCredentials</span><span class="token punctuation">(</span>username<span class="token punctuation">,</span> password<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">HttpHost</span><span class="token punctuation">[</span><span class="token punctuation">]</span> hostArray <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HttpHost</span><span class="token punctuation">[</span>host<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">":"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length<span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> index <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">String</span> httpHost <span class="token operator">:</span> host<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">":"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            hostArray<span class="token punctuation">[</span>index<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HttpHost</span><span class="token punctuation">(</span>httpHost<span class="token punctuation">,</span> port<span class="token punctuation">)</span><span class="token punctuation">;</span>            index<span class="token operator">++</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        restHighLevelClient <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RestHighLevelClient</span><span class="token punctuation">(</span><span class="token class-name">RestClient</span><span class="token punctuation">.</span><span class="token function">builder</span><span class="token punctuation">(</span>hostArray<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setHttpClientConfigCallback</span><span class="token punctuation">(</span>                httpClientBuilder <span class="token operator">-&gt;</span> httpClientBuilder<span class="token punctuation">.</span><span class="token function">setDefaultCredentialsProvider</span><span class="token punctuation">(</span>credentialsProvider<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        LOGGER<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"elasticSearch client buildClient..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p>引入 RestHighLevelClient</p>   <pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Autowired</span><span class="token keyword">private</span> <span class="token class-name">RestHighLevelClient</span> restHighLevelClient<span class="token punctuation">;</span></code></pre><h3 id="索引相关"><a href="#索引相关" class="headerlink" title="索引相关"></a>索引相关</h3><h4 id="判断索引是否存在"><a href="#判断索引是否存在" class="headerlink" title="判断索引是否存在"></a>判断索引是否存在</h4><pre class="language-java" data-language="java"><code class="language-java"><span class="token class-name">GetIndexRequest</span> request <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">GetIndexRequest</span><span class="token punctuation">(</span>indexName<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">boolean</span> exists <span class="token operator">=</span> restHighLevelClient<span class="token punctuation">.</span><span class="token function">indices</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">exists</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> <span class="token class-name">RequestOptions</span><span class="token punctuation">.</span>DEFAULT<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h4 id="列出所有索引"><a href="#列出所有索引" class="headerlink" title="列出所有索引"></a>列出所有索引</h4><pre class="language-java" data-language="java"><code class="language-java"><span class="token class-name">GetAliasesRequest</span> request <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">GetAliasesRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">GetAliasesResponse</span> getAliasesResponse <span class="token operator">=</span>  restHighLevelClient<span class="token punctuation">.</span><span class="token function">indices</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getAlias</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span><span class="token class-name">RequestOptions</span><span class="token punctuation">.</span>DEFAULT<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Set</span><span class="token punctuation">&lt;</span><span class="token class-name">AliasMetaData</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> map <span class="token operator">=</span> getAliasesResponse<span class="token punctuation">.</span><span class="token function">getAliases</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> indices <span class="token operator">=</span> map<span class="token punctuation">.</span><span class="token function">keySet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h4 id="创建索引"><a href="#创建索引" class="headerlink" title="创建索引"></a>创建索引</h4><pre class="language-java" data-language="java"><code class="language-java"><span class="token class-name">CreateIndexRequest</span> request <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CreateIndexRequest</span><span class="token punctuation">(</span>indexName<span class="token punctuation">)</span><span class="token punctuation">;</span>request<span class="token punctuation">.</span><span class="token function">settings</span><span class="token punctuation">(</span><span class="token class-name">Settings</span><span class="token punctuation">.</span><span class="token function">builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                 <span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"index.number_of_replicas"</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token comment">// 有1个备份</span>                 <span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"index.number_of_shards"</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 有5个碎片</span><span class="token class-name">XContentBuilder</span> mappingBuilder <span class="token operator">=</span> <span class="token class-name">JsonXContent</span><span class="token punctuation">.</span><span class="token function">contentBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                    <span class="token punctuation">.</span><span class="token function">startObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                    <span class="token punctuation">.</span><span class="token function">startObject</span><span class="token punctuation">(</span><span class="token string">"properties"</span><span class="token punctuation">)</span>                    <span class="token punctuation">.</span><span class="token function">startObject</span><span class="token punctuation">(</span><span class="token string">"title"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">field</span><span class="token punctuation">(</span><span class="token string">"type"</span><span class="token punctuation">,</span> <span class="token string">"text"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">field</span><span class="token punctuation">(</span><span class="token string">"index"</span><span class="token punctuation">,</span> <span class="token string">"true"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">endObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                    <span class="token punctuation">.</span><span class="token function">startObject</span><span class="token punctuation">(</span><span class="token string">"content"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">field</span><span class="token punctuation">(</span><span class="token string">"type"</span><span class="token punctuation">,</span> <span class="token string">"text"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">field</span><span class="token punctuation">(</span><span class="token string">"index"</span><span class="token punctuation">,</span> <span class="token string">"true"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">endObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                    <span class="token punctuation">.</span><span class="token function">endObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                    <span class="token punctuation">.</span><span class="token function">endObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>request<span class="token punctuation">.</span><span class="token function">mapping</span><span class="token punctuation">(</span>mappingBuilder<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">CreateIndexResponse</span> response <span class="token operator">=</span> restHighLevelClient<span class="token punctuation">.</span><span class="token function">indices</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> <span class="token class-name">RequestOptions</span><span class="token punctuation">.</span>DEFAULT<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>response<span class="token punctuation">.</span><span class="token function">isAcknowledged</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>查看索引 Mapping：</p><pre class="language-bash" data-language="bash"><code class="language-bash">$ <span class="token function">curl</span> http://127.0.0.1:9200/wyqtest/_mapping?pretty<span class="token punctuation">{</span>  <span class="token string">"wyqtest"</span> <span class="token builtin class-name">:</span> <span class="token punctuation">{</span>    <span class="token string">"mappings"</span> <span class="token builtin class-name">:</span> <span class="token punctuation">{</span>      <span class="token string">"properties"</span> <span class="token builtin class-name">:</span> <span class="token punctuation">{</span>        <span class="token string">"content"</span> <span class="token builtin class-name">:</span> <span class="token punctuation">{</span>          <span class="token string">"type"</span> <span class="token builtin class-name">:</span> <span class="token string">"text"</span>        <span class="token punctuation">}</span>,        <span class="token string">"title"</span> <span class="token builtin class-name">:</span> <span class="token punctuation">{</span>          <span class="token string">"type"</span> <span class="token builtin class-name">:</span> <span class="token string">"text"</span>        <span class="token punctuation">}</span>      <span class="token punctuation">}</span>    <span class="token punctuation">}</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h4 id="删除索引"><a href="#删除索引" class="headerlink" title="删除索引"></a>删除索引</h4><pre class="language-java" data-language="java"><code class="language-java"><span class="token class-name">DeleteIndexRequest</span> request <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DeleteIndexRequest</span><span class="token punctuation">(</span>indexName<span class="token punctuation">)</span><span class="token punctuation">;</span>request<span class="token punctuation">.</span><span class="token function">indicesOptions</span><span class="token punctuation">(</span><span class="token class-name">IndicesOptions</span><span class="token punctuation">.</span>LENIENT_EXPAND_OPEN<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">AcknowledgedResponse</span> response <span class="token operator">=</span> restHighLevelClient<span class="token punctuation">.</span><span class="token function">indices</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> <span class="token class-name">RequestOptions</span><span class="token punctuation">.</span>DEFAULT<span class="token punctuation">)</span><span class="token punctuation">;</span>log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"result: {}"</span><span class="token punctuation">,</span> response<span class="token punctuation">.</span><span class="token function">isAcknowledged</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h3 id="查询示例"><a href="#查询示例" class="headerlink" title="查询示例"></a>查询示例</h3><h4 id="聚合汇总"><a href="#聚合汇总" class="headerlink" title="聚合汇总"></a>聚合汇总</h4><ol><li><p>构建 BoolQueryBuilder</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token class-name">BoolQueryBuilder</span> bool <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BoolQueryBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>bool<span class="token punctuation">.</span><span class="token function">must</span><span class="token punctuation">(</span><span class="token class-name">QueryBuilders</span><span class="token punctuation">.</span><span class="token function">rangeQuery</span><span class="token punctuation">(</span><span class="token string">"@timestamp"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>start<span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>bool<span class="token punctuation">.</span><span class="token function">must</span><span class="token punctuation">(</span><span class="token class-name">QueryBuilders</span><span class="token punctuation">.</span><span class="token function">rangeQuery</span><span class="token punctuation">(</span><span class="token string">"@timestamp"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">to</span><span class="token punctuation">(</span>end<span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></li><li><p>设置分组 TermsAggregationBuilder</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token class-name">TermsAggregationBuilder</span> aggregationBuilderGroupBy <span class="token operator">=</span> <span class="token class-name">AggregationBuilders</span><span class="token punctuation">.</span><span class="token function">terms</span><span class="token punctuation">(</span><span class="token string">"agg_count"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">field</span><span class="token punctuation">(</span><span class="token string">"module.keyword"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></li><li><p>分组查询</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token class-name">SearchSourceBuilder</span> sourceBuilder <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SearchSourceBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">trackTotalHits</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span>bool<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">aggregation</span><span class="token punctuation">(</span>aggregationBuilderGroupBy<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">SearchRequest</span> searchRequest <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SearchRequest</span><span class="token punctuation">(</span>esIndexName<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">source</span><span class="token punctuation">(</span>sourceBuilder<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">SearchResponse</span> response <span class="token operator">=</span> restHighLevelClient<span class="token punctuation">.</span><span class="token function">search</span><span class="token punctuation">(</span>searchRequest<span class="token punctuation">,</span> <span class="token class-name">RequestOptions</span><span class="token punctuation">.</span>DEFAULT<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">Aggregations</span> aggregations <span class="token operator">=</span> response<span class="token punctuation">.</span><span class="token function">getAggregations</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></li><li><p>获取查询结果</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token class-name">Aggregation</span> sourceType <span class="token operator">=</span> aggregations<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"agg_count"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Terms</span><span class="token punctuation">.</span><span class="token class-name">Bucket</span> bucket <span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">Terms</span><span class="token punctuation">)</span> sourceType<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getBuckets</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    logger<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"[LogIndex]"</span><span class="token operator">+</span>bucket<span class="token punctuation">.</span><span class="token function">getKeyAsString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">"[Count]"</span><span class="token operator">+</span>bucket<span class="token punctuation">.</span><span class="token function">getDocCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre></li><li><p>执行结果：</p><pre class="language-none"><code class="language-none">[LogIndex]nlp-model[Count]101520[LogIndex]web-admin[Count]1106</code></pre></li></ol><h4 id="分页查询"><a href="#分页查询" class="headerlink" title="分页查询"></a>分页查询</h4><ol><li><p>构建 BoolQueryBuilder</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token class-name">BoolQueryBuilder</span> bool <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BoolQueryBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>bool<span class="token punctuation">.</span><span class="token function">must</span><span class="token punctuation">(</span><span class="token class-name">QueryBuilders</span><span class="token punctuation">.</span><span class="token function">matchQuery</span><span class="token punctuation">(</span><span class="token string">"module"</span><span class="token punctuation">,</span> dto<span class="token punctuation">.</span><span class="token function">getModule</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">minimumShouldMatch</span><span class="token punctuation">(</span><span class="token string">"100%"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>bool<span class="token punctuation">.</span><span class="token function">must</span><span class="token punctuation">(</span><span class="token class-name">QueryBuilders</span><span class="token punctuation">.</span><span class="token function">termQuery</span><span class="token punctuation">(</span><span class="token string">"level"</span><span class="token punctuation">,</span> dto<span class="token punctuation">.</span><span class="token function">getLevel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></li><li><p>设置查询 SearchSourceBuilder</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token class-name">SearchSourceBuilder</span> sourceBuilder <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SearchSourceBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">trackTotalHits</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 设置查询条件BoolQueryBuilder</span>sourceBuilder<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span>bool<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 设置分组，需注意 es 的分页是从 0 开始的</span>sourceBuilder<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>page<span class="token punctuation">)</span><span class="token punctuation">;</span>sourceBuilder<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span>perPage<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 设置排序</span>sourceBuilder<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token string">"@timestamp"</span><span class="token punctuation">,</span> <span class="token class-name">SortOrder</span><span class="token punctuation">.</span>DESC<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></li><li><p>进行查询</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token class-name">SearchRequest</span> searchRequest <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SearchRequest</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">;</span>searchRequest<span class="token punctuation">.</span><span class="token function">source</span><span class="token punctuation">(</span>sourceBuilder<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">SearchResponse</span> response <span class="token operator">=</span> restHighLevelClient<span class="token punctuation">.</span><span class="token function">search</span><span class="token punctuation">(</span>searchRequest<span class="token punctuation">,</span> <span class="token class-name">RequestOptions</span><span class="token punctuation">.</span>DEFAULT<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></li><li><p>获取查询结果</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token comment">// 获取结果集</span><span class="token class-name">SearchHits</span> hits <span class="token operator">=</span> response<span class="token punctuation">.</span><span class="token function">getHits</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 获取总条数</span>paginator<span class="token punctuation">.</span><span class="token function">setItems</span><span class="token punctuation">(</span><span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span>hits<span class="token punctuation">.</span><span class="token function">getTotalHits</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 转换结果集</span><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">SearchHit</span> hit <span class="token operator">:</span> response<span class="token punctuation">.</span><span class="token function">getHits</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getHits</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token class-name">PhishingLogDto</span> mailServer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PhishingLogDto</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    mailServer<span class="token punctuation">.</span><span class="token function">jsonToDto</span><span class="token punctuation">(</span>mailServer<span class="token punctuation">,</span> <span class="token class-name">JSONObject</span><span class="token punctuation">.</span><span class="token function">parseObject</span><span class="token punctuation">(</span>hit<span class="token punctuation">.</span><span class="token function">getSourceAsString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>mailServer<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre></li></ol>]]></content>
    
    
    <summary type="html">&lt;h3 id=&quot;RestHighLevelClient&quot;&gt;&lt;a href=&quot;#RestHighLevelClient&quot; class=&quot;headerlink&quot; title=&quot;RestHighLevelClient&quot;&gt;&lt;/a&gt;RestHighLevelClient&lt;/h3&gt;&lt;p&gt;RestHighLevelClient 是官方指定的连接 API。&lt;/p&gt;
&lt;p&gt;另外一个是 TransportClient，但是 TransportClient 这个是已经废弃不用的，所以会在 ES8.0 之后完全移除，也就是说 8.0 之后就无法使用了。&lt;/p&gt;
&lt;p&gt;引入依赖：&lt;/p&gt;
&lt;pre class=&quot;language-xml&quot; data-language=&quot;xml&quot;&gt;&lt;code class=&quot;language-xml&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;dependency&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;
    &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;groupId&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;org.elasticsearch.client&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;groupId&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;
    &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;artifactId&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;elasticsearch-rest-client&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;artifactId&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;
    &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;version&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;${elasticsearch.version}&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;version&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;dependency&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;dependency&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;
    &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;groupId&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;org.elasticsearch.client&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;groupId&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;
    &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;artifactId&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;elasticsearch-rest-high-level-client&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;artifactId&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;
    &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;version&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;${elasticsearch.version}&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;version&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;dependency&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;</summary>
    
    
    
    <category term="Java" scheme="https://jueee.github.io/categories/Java/"/>
    
    <category term="JavaClass" scheme="https://jueee.github.io/categories/Java/JavaClass/"/>
    
    <category term="ElasticSearch" scheme="https://jueee.github.io/categories/ElasticSearch/"/>
    
    
    <category term="JavaClass" scheme="https://jueee.github.io/tags/JavaClass/"/>
    
    <category term="Java" scheme="https://jueee.github.io/tags/Java/"/>
    
    <category term="ElasticSearch" scheme="https://jueee.github.io/tags/ElasticSearch/"/>
    
    <category term="Spring" scheme="https://jueee.github.io/tags/Spring/"/>
    
  </entry>
  
  <entry>
    <title>Potplayer 画质增强教程</title>
    <link href="https://jueee.github.io/2020/12/2020-12-02-Potplayer%E7%94%BB%E8%B4%A8%E5%A2%9E%E5%BC%BA%E6%95%99%E7%A8%8B/"/>
    <id>https://jueee.github.io/2020/12/2020-12-02-Potplayer%E7%94%BB%E8%B4%A8%E5%A2%9E%E5%BC%BA%E6%95%99%E7%A8%8B/</id>
    <published>2020-12-02T00:00:00.000Z</published>
    <updated>2020-12-03T01:31:09.173Z</updated>
    
    <content type="html"><![CDATA[<h3 id="madVR-介绍"><a href="#madVR-介绍" class="headerlink" title="madVR 介绍"></a>madVR 介绍</h3><ul><li><strong>madVR</strong> 是一款超强的视频插件，其配合高清播放软件，可以做到目前 <strong>PC</strong> 上播放高清视频的最强画质。</li><li><strong>madVR</strong> 这款视频渲染器比市面上大多数播放器自带的渲染器有着更精确的颜色处理，更高质量的图像缩放缩放、以及更低的颜色错误率。这就使得它所渲染出来的视频在颜色上更趋于真实，在画质细节上也要强于其他渲染器。</li><li><strong>madVR</strong> 支持各类显卡，包括 <strong>NVIDIA</strong> 和 <strong>AMD</strong> 的独显以及英特尔的核芯显卡。不过用户在使用 <strong>madVR</strong> 渲染视频时，会占用大量的 <strong>GPU</strong> 资源和 <strong>CPU</strong> 资源。</li></ul><a id="more"></a><h3 id="PotPlayer"><a href="#PotPlayer" class="headerlink" title="PotPlayer"></a>PotPlayer</h3><p>下载：<span class="exturl" data-url="aHR0cHM6Ly9kYXVtcG90cGxheWVyLmNvbS9kb3dubG9hZC8=">https://daumpotplayer.com/download/<i class="fa fa-external-link-alt"></i></span></p><h3 id="安装插件"><a href="#安装插件" class="headerlink" title="安装插件"></a>安装插件</h3><h4 id="视频解码器：LAVFilters"><a href="#视频解码器：LAVFilters" class="headerlink" title="视频解码器：LAVFilters"></a>视频解码器：LAVFilters</h4><p>下载地址如下：</p><pre class="language-bash" data-language="bash"><code class="language-bash">https://github.com/Nevcairiel/LAVFilters/releases</code></pre><p>安装：</p><p><img src="/images/2020/12/1606913349452.png" alt="1606913349452" loading="lazy"></p><p>安装 LAV Video（x64）</p><p><img src="/images/2020/12/1606913401256.png" alt="1606913401256" loading="lazy"></p><h4 id="视频渲染器：madVR"><a href="#视频渲染器：madVR" class="headerlink" title="视频渲染器：madVR"></a>视频渲染器：madVR</h4><p><strong>下载地址</strong>：<span class="exturl" data-url="aHR0cDovL3d3dy5tYWR2ci5jb20v">http://www.madVR.com/<i class="fa fa-external-link-alt"></i></span></p><p><strong>下载软件</strong>：</p><p><img src="/images/2020/12/1606914039961.png" alt="1606914039961" loading="lazy"></p><p><strong>安装软件</strong></p><p>右键点击 install.bat，以管理员身份运行</p><p><img src="/images/2020/12/1606914072646.png" alt="1606914072646" loading="lazy"></p><p>安装成功显示：</p><p><img src="/images/2020/12/1606913478055.png" alt="1606913478055" loading="lazy"></p><h3 id="配置插件"><a href="#配置插件" class="headerlink" title="配置插件"></a>配置插件</h3><p>按 F5 进入滤镜，激活条件改为<strong>不使用</strong>，<strong>取消勾选</strong>使内置视频编解码器 / 图像处理那行，然后应用、确定。</p><p><img src="/images/2020/12/1606914217121.png" alt="1606914217121" loading="lazy"></p><p>进入滤镜子选项：全局滤镜优先权</p><ol><li><p>添加系统滤镜，增加系统滤镜，增加 LAV 和 madVR</p><p><img src="/images/2020/12/1606914266875.png" alt="1606914266875" loading="lazy"></p></li><li><p>优先顺序改为强制使用</p><p><img src="/images/2020/12/1606914328106.png" alt="1606914328106" loading="lazy"></p></li><li><p>应用、确定</p></li></ol><h3 id="验证插件"><a href="#验证插件" class="headerlink" title="验证插件"></a>验证插件</h3><p>重启软件，并播放视频，按下 Tab 键。</p><p>此时，视频解码器是 LAV，视频渲染器是 madVR。</p><p><img src="/images/2020/12/1606914490789.png" alt="1606914490789" loading="lazy"></p>]]></content>
    
    
    <summary type="html">&lt;h3 id=&quot;madVR-介绍&quot;&gt;&lt;a href=&quot;#madVR-介绍&quot; class=&quot;headerlink&quot; title=&quot;madVR 介绍&quot;&gt;&lt;/a&gt;madVR 介绍&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;madVR&lt;/strong&gt; 是一款超强的视频插件，其配合高清播放软件，可以做到目前 &lt;strong&gt;PC&lt;/strong&gt; 上播放高清视频的最强画质。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;madVR&lt;/strong&gt; 这款视频渲染器比市面上大多数播放器自带的渲染器有着更精确的颜色处理，更高质量的图像缩放缩放、以及更低的颜色错误率。这就使得它所渲染出来的视频在颜色上更趋于真实，在画质细节上也要强于其他渲染器。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;madVR&lt;/strong&gt; 支持各类显卡，包括 &lt;strong&gt;NVIDIA&lt;/strong&gt; 和 &lt;strong&gt;AMD&lt;/strong&gt; 的独显以及英特尔的核芯显卡。不过用户在使用 &lt;strong&gt;madVR&lt;/strong&gt; 渲染视频时，会占用大量的 &lt;strong&gt;GPU&lt;/strong&gt; 资源和 &lt;strong&gt;CPU&lt;/strong&gt; 资源。&lt;/li&gt;
&lt;/ul&gt;</summary>
    
    
    
    <category term="软件" scheme="https://jueee.github.io/categories/%E8%BD%AF%E4%BB%B6/"/>
    
    <category term="Windows" scheme="https://jueee.github.io/categories/%E8%BD%AF%E4%BB%B6/Windows/"/>
    
    
    <category term="软件" scheme="https://jueee.github.io/tags/%E8%BD%AF%E4%BB%B6/"/>
    
    <category term="Windows" scheme="https://jueee.github.io/tags/Windows/"/>
    
    <category term="视频" scheme="https://jueee.github.io/tags/%E8%A7%86%E9%A2%91/"/>
    
    <category term="Potplayer" scheme="https://jueee.github.io/tags/Potplayer/"/>
    
  </entry>
  
  <entry>
    <title>Vue 可拖拽组件 vue-grid-layout 使用入门</title>
    <link href="https://jueee.github.io/2020/12/2020-12-01-Vue%E5%8F%AF%E6%8B%96%E6%8B%BD%E7%BB%84%E4%BB%B6vue-grid-layout%E4%BD%BF%E7%94%A8%E5%85%A5%E9%97%A8/"/>
    <id>https://jueee.github.io/2020/12/2020-12-01-Vue%E5%8F%AF%E6%8B%96%E6%8B%BD%E7%BB%84%E4%BB%B6vue-grid-layout%E4%BD%BF%E7%94%A8%E5%85%A5%E9%97%A8/</id>
    <published>2020-12-01T00:00:00.000Z</published>
    <updated>2020-12-08T10:52:48.155Z</updated>
    
    <content type="html"><![CDATA[<h3 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h3><ul><li>官网：<span class="exturl" data-url="aHR0cHM6Ly9qYmF5c29sdXRpb25zLmdpdGh1Yi5pby92dWUtZ3JpZC1sYXlvdXQv">https://jbaysolutions.github.io/vue-grid-layout/<i class="fa fa-external-link-alt"></i></span></li><li>GitHub：<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2piYXlzb2x1dGlvbnMvdnVlLWdyaWQtbGF5b3V0">https://github.com/jbaysolutions/vue-grid-layout<i class="fa fa-external-link-alt"></i></span></li><li>npmjs：<span class="exturl" data-url="aHR0cHM6Ly93d3cubnBtanMuY29tL3BhY2thZ2UvdnVlLWdyaWQtbGF5b3V0">https://www.npmjs.com/package/vue-grid-layout<i class="fa fa-external-link-alt"></i></span></li></ul><a id="more"></a><h3 id="特性"><a href="#特性" class="headerlink" title="特性"></a>特性</h3><ul><li>可拖拽</li><li>可调整大小</li><li>静态部件（不可拖拽、调整大小）</li><li>拖拽和调整大小时进行边界检查</li><li>增减部件时避免重建栅格</li><li>可序列化和还原的布局</li><li>自动化 RTL 支持</li><li>响应式</li></ul><h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token function">npm</span> <span class="token function">install</span> vue-grid-layout --save</code></pre><h3 id="属性"><a href="#属性" class="headerlink" title="属性"></a>属性</h3><h4 id="GridLayout"><a href="#GridLayout" class="headerlink" title="GridLayout"></a>GridLayout</h4><ul><li><p><strong>layout</strong></p><p>数据源。值必须为 <code>Array</code>，其数据项为 <code>Object</code>。 每条数据项必须有 <code>i</code>, <code>x</code>, <code>y</code>, <code>w</code> 和 <code>h</code> 属性。 请参考下面的 <code>GridItem</code>。</p></li><li><p><strong>responsiveLayouts</strong></p><p>如果 <code>responsive</code> 设置为 <code>true</code>，该配置将作为栅格中每个断点的初始布局。键值是断点名称，每项的值都是类似 <code>layout</code> 属性定义的数据结构，值必须为 <code>Array</code>，其数据项为 <code>Object</code>。例如： <code>{lg: [layout items], md: [layout items]}</code>。需要注意的是，在创建栅格布局后设置该属性无效。</p></li><li><p><strong>colNum</strong></p><p>定义栅格系统的列数，其值需为自然数。</p></li><li><p><strong>rowHeight</strong></p><p>每行的高度，单位像素。</p></li><li><p><strong>maxRows</strong></p><p>定义最大行数。</p></li><li><p><strong>margin</strong></p><p>定义栅格中的元素边距。</p><p>值必须是包含两个 <code>Number</code> 的数组，数组中第一个元素表示水平边距，第二个表示垂直边距，单位为像素。</p></li><li><p><strong>isDraggable</strong></p><p>标识栅格中的元素是否可拖拽。</p></li><li><p><strong>isResizable</strong></p><p>标识栅格中的元素是否可调整大小。</p></li><li><p><strong>isMirrored</strong></p><p>标识栅格中的元素是否可镜像反转。</p></li><li><p><strong>autoSize</strong></p><p>标识容器是否自动调整大小。</p></li><li><p><strong>verticalCompact</strong></p><p>标识布局是否垂直压缩。</p></li><li><p><strong>useCssTransforms</strong></p><p>标识是否使用 CSS 属性 <code>transition-property: transform;</code>。</p></li><li><p><strong>responsive</strong></p><p>标识布局是否为响应式。</p></li><li><p><strong>breakpoints</strong></p><p>为响应式布局设置断点。</p></li><li><p><strong>cols</strong></p><p>设置每个断点对应的列数。</p></li><li><p><strong>useStyleCursor</strong></p><p>标识是否使用动态鼠标指针样式。当拖动出现卡顿时，将此值设为 <code>false</code> 也许可以缓解布局问题。</p></li></ul><h4 id="GridItem"><a href="#GridItem" class="headerlink" title="GridItem"></a>GridItem</h4><ul><li><p><strong>i</strong>：栅格中元素的 ID。</p></li><li><p><strong>x</strong>：标识栅格元素位于第几列，需为自然数。</p></li><li><p><strong>y</strong>：标识栅格元素位于第几行，需为自然数。</p></li><li><p><strong>w</strong>：标识栅格元素的初始宽度，值为 <code>colWidth</code> 的倍数。</p></li><li><p><strong>h</strong>：标识栅格元素的初始高度，值为 <code>rowHeight</code> 的倍数。</p></li><li><p><strong>minW</strong>：栅格元素的最小宽度，值为 <code>colWidth</code> 的倍数。如果 <code>w</code> 小于 <code>minW</code>，则 <code>minW</code> 的值会被 <code>w</code> 覆盖。</p></li><li><p><strong>minH</strong>：栅格元素的最小高度，值为 <code>rowHeight</code> 的倍数。如果 <code>h</code> 小于 <code>minH</code>，则 <code>minH</code> 的值会被 <code>h</code> 覆盖。</p></li><li><p><strong>maxW</strong>：栅格元素的最大宽度，值为 <code>colWidth</code> 的倍数。如果 <code>w</code> 大于 <code>maxW</code>，则 <code>maxW</code> 的值会被 <code>w</code> 覆盖。</p></li><li><p><strong>maxH</strong>：栅格元素的最大高度，值为 <code>rowHeight</code> 的倍数。如果 <code>h</code> 大于 <code>maxH</code>，则 <code>maxH</code> 的值会被 <code>h</code> 覆盖。</p></li><li><p><strong>isDraggable</strong>：标识栅格元素是否可拖拽。如果值为 <code>null</code> 则取决于父容器。</p></li><li><p><strong>isResizable</strong>：标识栅格元素是否可调整大小。如果值为 <code>null</code> 则取决于父容器。</p></li><li><p><strong>static</strong>：标识栅格元素是否为静态的（无法拖拽、调整大小或被其他元素移动）。</p></li><li><p><strong>dragIgnoreFrom</strong>：标识栅格元素中哪些子元素无法触发拖拽事件，值为 <code>css-like</code> 选择器。</p><p>请参考 <span class="exturl" data-url="aHR0cDovL2ludGVyYWN0anMuaW8vZG9jcy8jaWdub3JhYmxlLXNlbGVjdG9ycw==">interact.js docs<i class="fa fa-external-link-alt"></i></span> 中的 <code>ignoreFrom</code>。</p></li><li><p><strong>dragAllowFrom</strong>：标识栅格元素中哪些子元素可以触发拖拽事件，值为 <code>css-like</code> 选择器。如果值为 <code>null</code> 则表示所有子元素（<code>dragIgnoreFrom</code> 的除外）。</p><p>请参考 <span class="exturl" data-url="aHR0cDovL2ludGVyYWN0anMuaW8vZG9jcy8jaWdub3JhYmxlLXNlbGVjdG9ycw==">interact.js docs<i class="fa fa-external-link-alt"></i></span> 中的 <code>allowFrom</code>。</p></li><li><p><strong>resizeIgnoreFrom</strong>：标识栅格元素中哪些子元素无法触发调整大小的事件，值为 <code>css-like</code> 选择器。</p><p>请参考 <span class="exturl" data-url="aHR0cDovL2ludGVyYWN0anMuaW8vZG9jcy8jaWdub3JhYmxlLXNlbGVjdG9ycw==">interact.js docs<i class="fa fa-external-link-alt"></i></span> 中的 <code>ignoreFrom</code>。</p></li></ul><h3 id="基础使用"><a href="#基础使用" class="headerlink" title="基础使用"></a>基础使用</h3><ol><li><p>引入</p><pre class="language-js" data-language="js"><code class="language-js"><span class="token keyword">import</span> VueGridLayout <span class="token keyword">from</span> <span class="token string">'vue-grid-layout'</span><span class="token punctuation">;</span></code></pre></li><li><p>加入到 Vue 组件</p><pre class="language-js" data-language="js"><code class="language-js"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>  components<span class="token operator">:</span> <span class="token punctuation">{</span>      GridLayout<span class="token operator">:</span> VueGridLayout<span class="token punctuation">.</span>GridLayout<span class="token punctuation">,</span>      GridItem<span class="token operator">:</span> VueGridLayout<span class="token punctuation">.</span>GridItem  <span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> <span class="token punctuation">{</span>      layoutData<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>    <span class="token punctuation">}</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span>  methods<span class="token operator">:</span> <span class="token punctuation">{</span>    <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token keyword">this</span><span class="token punctuation">.</span>layoutData <span class="token operator">=</span> <span class="token punctuation">[</span>          <span class="token punctuation">{</span><span class="token string">"x"</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token string">"y"</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token string">"w"</span><span class="token operator">:</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token string">"h"</span><span class="token operator">:</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token string">"i"</span><span class="token operator">:</span><span class="token string">"0"</span><span class="token punctuation">}</span><span class="token punctuation">,</span>          <span class="token punctuation">{</span><span class="token string">"x"</span><span class="token operator">:</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token string">"y"</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token string">"w"</span><span class="token operator">:</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token string">"h"</span><span class="token operator">:</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token string">"i"</span><span class="token operator">:</span><span class="token string">"1"</span><span class="token punctuation">}</span><span class="token punctuation">,</span>          <span class="token punctuation">{</span><span class="token string">"x"</span><span class="token operator">:</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token string">"y"</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token string">"w"</span><span class="token operator">:</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token string">"h"</span><span class="token operator">:</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token string">"i"</span><span class="token operator">:</span><span class="token string">"2"</span><span class="token punctuation">}</span><span class="token punctuation">,</span>          <span class="token punctuation">{</span><span class="token string">"x"</span><span class="token operator">:</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token string">"y"</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token string">"w"</span><span class="token operator">:</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token string">"h"</span><span class="token operator">:</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token string">"i"</span><span class="token operator">:</span><span class="token string">"3"</span><span class="token punctuation">}</span><span class="token punctuation">,</span>          <span class="token punctuation">{</span><span class="token string">"x"</span><span class="token operator">:</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token string">"y"</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token string">"w"</span><span class="token operator">:</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token string">"h"</span><span class="token operator">:</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token string">"i"</span><span class="token operator">:</span><span class="token string">"4"</span><span class="token punctuation">}</span><span class="token punctuation">,</span>          <span class="token punctuation">{</span><span class="token string">"x"</span><span class="token operator">:</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token string">"y"</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token string">"w"</span><span class="token operator">:</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token string">"h"</span><span class="token operator">:</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token string">"i"</span><span class="token operator">:</span><span class="token string">"5"</span><span class="token punctuation">}</span><span class="token punctuation">,</span>          <span class="token punctuation">{</span><span class="token string">"x"</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token string">"y"</span><span class="token operator">:</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token string">"w"</span><span class="token operator">:</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token string">"h"</span><span class="token operator">:</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token string">"i"</span><span class="token operator">:</span><span class="token string">"6"</span><span class="token punctuation">}</span><span class="token punctuation">,</span>          <span class="token punctuation">{</span><span class="token string">"x"</span><span class="token operator">:</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token string">"y"</span><span class="token operator">:</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token string">"w"</span><span class="token operator">:</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token string">"h"</span><span class="token operator">:</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token string">"i"</span><span class="token operator">:</span><span class="token string">"7"</span><span class="token punctuation">}</span><span class="token punctuation">,</span>          <span class="token punctuation">{</span><span class="token string">"x"</span><span class="token operator">:</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token string">"y"</span><span class="token operator">:</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token string">"w"</span><span class="token operator">:</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token string">"h"</span><span class="token operator">:</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token string">"i"</span><span class="token operator">:</span><span class="token string">"8"</span><span class="token punctuation">}</span><span class="token punctuation">,</span>          <span class="token punctuation">{</span><span class="token string">"x"</span><span class="token operator">:</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token string">"y"</span><span class="token operator">:</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token string">"w"</span><span class="token operator">:</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token string">"h"</span><span class="token operator">:</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token string">"i"</span><span class="token operator">:</span><span class="token string">"9"</span><span class="token punctuation">}</span><span class="token punctuation">,</span>          <span class="token punctuation">{</span><span class="token string">"x"</span><span class="token operator">:</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token string">"y"</span><span class="token operator">:</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token string">"w"</span><span class="token operator">:</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token string">"h"</span><span class="token operator">:</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token string">"i"</span><span class="token operator">:</span><span class="token string">"10"</span><span class="token punctuation">}</span><span class="token punctuation">,</span>          <span class="token punctuation">{</span><span class="token string">"x"</span><span class="token operator">:</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token string">"y"</span><span class="token operator">:</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token string">"w"</span><span class="token operator">:</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token string">"h"</span><span class="token operator">:</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token string">"i"</span><span class="token operator">:</span><span class="token string">"11"</span><span class="token punctuation">}</span><span class="token punctuation">,</span>          <span class="token punctuation">{</span><span class="token string">"x"</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token string">"y"</span><span class="token operator">:</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token string">"w"</span><span class="token operator">:</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token string">"h"</span><span class="token operator">:</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token string">"i"</span><span class="token operator">:</span><span class="token string">"12"</span><span class="token punctuation">}</span><span class="token punctuation">,</span>          <span class="token punctuation">{</span><span class="token string">"x"</span><span class="token operator">:</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token string">"y"</span><span class="token operator">:</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token string">"w"</span><span class="token operator">:</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token string">"h"</span><span class="token operator">:</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token string">"i"</span><span class="token operator">:</span><span class="token string">"13"</span><span class="token punctuation">}</span><span class="token punctuation">,</span>          <span class="token punctuation">{</span><span class="token string">"x"</span><span class="token operator">:</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token string">"y"</span><span class="token operator">:</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token string">"w"</span><span class="token operator">:</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token string">"h"</span><span class="token operator">:</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token string">"i"</span><span class="token operator">:</span><span class="token string">"14"</span><span class="token punctuation">}</span><span class="token punctuation">,</span>          <span class="token punctuation">{</span><span class="token string">"x"</span><span class="token operator">:</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token string">"y"</span><span class="token operator">:</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token string">"w"</span><span class="token operator">:</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token string">"h"</span><span class="token operator">:</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token string">"i"</span><span class="token operator">:</span><span class="token string">"15"</span><span class="token punctuation">}</span><span class="token punctuation">,</span>          <span class="token punctuation">{</span><span class="token string">"x"</span><span class="token operator">:</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token string">"y"</span><span class="token operator">:</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token string">"w"</span><span class="token operator">:</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token string">"h"</span><span class="token operator">:</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token string">"i"</span><span class="token operator">:</span><span class="token string">"16"</span><span class="token punctuation">}</span><span class="token punctuation">,</span>          <span class="token punctuation">{</span><span class="token string">"x"</span><span class="token operator">:</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token string">"y"</span><span class="token operator">:</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token string">"w"</span><span class="token operator">:</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token string">"h"</span><span class="token operator">:</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token string">"i"</span><span class="token operator">:</span><span class="token string">"17"</span><span class="token punctuation">}</span><span class="token punctuation">,</span>          <span class="token punctuation">{</span><span class="token string">"x"</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token string">"y"</span><span class="token operator">:</span><span class="token number">9</span><span class="token punctuation">,</span><span class="token string">"w"</span><span class="token operator">:</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token string">"h"</span><span class="token operator">:</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token string">"i"</span><span class="token operator">:</span><span class="token string">"18"</span><span class="token punctuation">}</span><span class="token punctuation">,</span>          <span class="token punctuation">{</span><span class="token string">"x"</span><span class="token operator">:</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token string">"y"</span><span class="token operator">:</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token string">"w"</span><span class="token operator">:</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token string">"h"</span><span class="token operator">:</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token string">"i"</span><span class="token operator">:</span><span class="token string">"19"</span><span class="token punctuation">}</span>      <span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token function">created</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre></li><li><p>加入网格</p><pre class="language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>dashboard-container<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>grid-layout</span>            <span class="token attr-name">:layout</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>layoutData<span class="token punctuation">"</span></span>            <span class="token attr-name">:col-num</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>12<span class="token punctuation">"</span></span>            <span class="token attr-name">:row-height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>30<span class="token punctuation">"</span></span>            <span class="token attr-name">:is-draggable</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span>            <span class="token attr-name">:is-resizable</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span>            <span class="token attr-name">:is-mirrored</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>false<span class="token punctuation">"</span></span>            <span class="token attr-name">:vertical-compact</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span>            <span class="token attr-name">:margin</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>[10, 10]<span class="token punctuation">"</span></span>            <span class="token attr-name">:use-css-transforms</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>grid-item</span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>item in layoutData<span class="token punctuation">"</span></span>                   <span class="token attr-name">:x</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>item.x<span class="token punctuation">"</span></span>                   <span class="token attr-name">:y</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>item.y<span class="token punctuation">"</span></span>                   <span class="token attr-name">:w</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>item.w<span class="token punctuation">"</span></span>                   <span class="token attr-name">:h</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>item.h<span class="token punctuation">"</span></span>                   <span class="token attr-name">:i</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>item.i<span class="token punctuation">"</span></span>                   <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>item.i<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>            {{item.i}}        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>grid-item</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>grid-layout</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span></code></pre></li><li><p>加上点背景颜色</p><pre class="language-css" data-language="css"><code class="language-css"><span class="token selector">.vue-grid-item</span> <span class="token punctuation">{</span>  <span class="token property">background</span><span class="token punctuation">:</span> aquamarine<span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre></li><li><p>预览效果</p><p><img src="/images/2020/12/image-20201201164548293.png" alt="image-20201201164548293" loading="lazy"></p></li></ol><h3 id="添加右键事件"><a href="#添加右键事件" class="headerlink" title="添加右键事件"></a>添加右键事件</h3><p>在基础使用的基础上，增加如下配置：</p><ol><li><p>增加按钮</p><pre class="language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>dashboard-container<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>contextmenu<span class="token punctuation">'</span></span> <span class="token attr-name">v-show</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>menuConfig.visible<span class="token punctuation">"</span></span> <span class="token attr-name">:</span><span class="token style-attr language-css"><span class="token attr-name"><span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token punctuation">{</span><span class="token property">left</span><span class="token punctuation">:</span>menuConfig.left+<span class="token string">'px'</span><span class="token punctuation">,</span><span class="token property">top</span><span class="token punctuation">:</span>menuConfig.top+<span class="token string">'px'</span><span class="token punctuation">}</span></span><span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>test(1)<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>test(2)<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>test(3)<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>3<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span>          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>grid-layout</span>            <span class="token attr-name">:layout</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>layoutData<span class="token punctuation">"</span></span>            <span class="token attr-name">:col-num</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>6<span class="token punctuation">"</span></span>            <span class="token attr-name">:row-height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>30<span class="token punctuation">"</span></span>            <span class="token attr-name">:is-draggable</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span>            <span class="token attr-name">:is-resizable</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span>            <span class="token attr-name">:is-mirrored</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>false<span class="token punctuation">"</span></span>            <span class="token attr-name">:vertical-compact</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span>            <span class="token attr-name">:margin</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>[10, 10]<span class="token punctuation">"</span></span>            <span class="token attr-name">:use-css-transforms</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span>    <span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>grid-item</span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>item in layoutData<span class="token punctuation">"</span></span>                   <span class="token attr-name">:x</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>item.x<span class="token punctuation">"</span></span>                   <span class="token attr-name">:y</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>item.y<span class="token punctuation">"</span></span>                   <span class="token attr-name">:w</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>item.w<span class="token punctuation">"</span></span>                   <span class="token attr-name">:h</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>item.h<span class="token punctuation">"</span></span>                   <span class="token attr-name">:i</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>item.i<span class="token punctuation">"</span></span>                   <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>item.i<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>layout-Box<span class="token punctuation">"</span></span> <span class="token attr-name">@contextmenu.prevent</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>openMenu(item, $event)<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>            {{ item.i }}          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>grid-item</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>grid-layout</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span></code></pre></li><li><p>增加 Data 相关配置</p><pre class="language-js" data-language="js"><code class="language-js"><span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">return</span> <span class="token punctuation">{</span>    menuConfig<span class="token operator">:</span> <span class="token punctuation">{</span> visible<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> left<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> top<span class="token operator">:</span> <span class="token number">0</span> <span class="token punctuation">}</span>  <span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>methods<span class="token operator">:</span> <span class="token punctuation">{</span>  <span class="token comment">// 右键打开菜单</span>  <span class="token function">openMenu</span><span class="token punctuation">(</span><span class="token parameter">tag<span class="token punctuation">,</span> e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>menuConfig<span class="token punctuation">.</span>visible <span class="token operator">=</span> <span class="token boolean">true</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>menuConfig<span class="token punctuation">.</span>left <span class="token operator">=</span> e<span class="token punctuation">.</span>clientX    <span class="token keyword">this</span><span class="token punctuation">.</span>menuConfig<span class="token punctuation">.</span>top <span class="token operator">=</span> e<span class="token punctuation">.</span>clientY  <span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token comment">// 关闭菜单</span>  <span class="token function">closeMenu</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>menuConfig<span class="token punctuation">.</span>visible <span class="token operator">=</span> <span class="token boolean">false</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token comment">// 测试方法</span>  <span class="token function">test</span><span class="token punctuation">(</span><span class="token parameter">i</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">,</span>watch<span class="token operator">:</span> <span class="token punctuation">{</span>  <span class="token string">'menuConfig.visible'</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">val<span class="token punctuation">,</span>oldval</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>menuConfig<span class="token punctuation">.</span>visible<span class="token punctuation">)</span> <span class="token punctuation">{</span>      document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>closeMenu<span class="token punctuation">)</span>    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>      document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">removeEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>closeMenu<span class="token punctuation">)</span>    <span class="token punctuation">}</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre></li><li><p>CSS</p><pre class="language-css" data-language="css"><code class="language-css"><span class="token selector">.layout-Box</span><span class="token punctuation">{</span>  <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>  <span class="token property">height</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token selector">.contextmenu</span> <span class="token punctuation">{</span>  <span class="token property">margin</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>  <span class="token property">background</span><span class="token punctuation">:</span> #fff<span class="token punctuation">;</span>  <span class="token property">z-index</span><span class="token punctuation">:</span> 100<span class="token punctuation">;</span>  <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>  <span class="token property">list-style-type</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>  <span class="token property">padding</span><span class="token punctuation">:</span> 5px 0<span class="token punctuation">;</span>  <span class="token property">border-radius</span><span class="token punctuation">:</span> 4px<span class="token punctuation">;</span>  <span class="token property">font-size</span><span class="token punctuation">:</span> 12px<span class="token punctuation">;</span>  <span class="token property">font-weight</span><span class="token punctuation">:</span> 400<span class="token punctuation">;</span>  <span class="token property">color</span><span class="token punctuation">:</span> #333<span class="token punctuation">;</span>  <span class="token property">box-shadow</span><span class="token punctuation">:</span> 2px 2px 3px 0 <span class="token function">rgba</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> .3<span class="token punctuation">)</span><span class="token selector">;  li</span> <span class="token punctuation">{</span>    <span class="token property">margin</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>    <span class="token property">padding</span><span class="token punctuation">:</span> 7px 16px<span class="token punctuation">;</span>    <span class="token property">cursor</span><span class="token punctuation">:</span> pointer<span class="token selector">;    &amp;:hover</span> <span class="token punctuation">{</span>      <span class="token property">background</span><span class="token punctuation">:</span> #eee<span class="token punctuation">;</span>    <span class="token punctuation">}</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre></li><li><p>预览效果：</p><p><img src="/images/2020/12/image-20201201184914907.png" alt="image-20201201184914907" loading="lazy"></p></li></ol>]]></content>
    
    
    <summary type="html">&lt;h3 id=&quot;介绍&quot;&gt;&lt;a href=&quot;#介绍&quot; class=&quot;headerlink&quot; title=&quot;介绍&quot;&gt;&lt;/a&gt;介绍&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;官网：&lt;a href=&quot;https://jbaysolutions.github.io/vue-grid-layout/&quot;&gt;https://jbaysolutions.github.io/vue-grid-layout/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;GitHub：&lt;a href=&quot;https://github.com/jbaysolutions/vue-grid-layout&quot;&gt;https://github.com/jbaysolutions/vue-grid-layout&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;npmjs：&lt;a href=&quot;https://www.npmjs.com/package/vue-grid-layout&quot;&gt;https://www.npmjs.com/package/vue-grid-layout&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</summary>
    
    
    
    <category term="Vue" scheme="https://jueee.github.io/categories/Vue/"/>
    
    
    <category term="Vue" scheme="https://jueee.github.io/tags/Vue/"/>
    
  </entry>
  
  <entry>
    <title>Java 获取 Kafka 的 topic 列表</title>
    <link href="https://jueee.github.io/2020/11/2020-11-30-Java%E8%8E%B7%E5%8F%96Kafka%E7%9A%84topic%E5%88%97%E8%A1%A8/"/>
    <id>https://jueee.github.io/2020/11/2020-11-30-Java%E8%8E%B7%E5%8F%96Kafka%E7%9A%84topic%E5%88%97%E8%A1%A8/</id>
    <published>2020-11-30T00:00:00.000Z</published>
    <updated>2020-11-30T07:58:22.172Z</updated>
    
    <content type="html"><![CDATA[<h3 id="命令行获取"><a href="#命令行获取" class="headerlink" title="命令行获取"></a>命令行获取</h3><p>根据 zookeeper 地址获取 topic：</p><pre class="language-bash" data-language="bash"><code class="language-bash">$ bin/kafka-topics.sh --list --zookeeper <span class="token number">127.0</span>.0.1:2181</code></pre><a id="more"></a><h3 id="引入依赖获取"><a href="#引入依赖获取" class="headerlink" title="引入依赖获取"></a>引入依赖获取</h3><h4 id="根据-kafka-地址"><a href="#根据-kafka-地址" class="headerlink" title="根据 kafka 地址"></a>根据 kafka 地址</h4><p>引入依赖</p><pre class="language-xml" data-language="xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.apache.kafka<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>kafka-clients<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>${kafka.version}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span></code></pre><p>根据 kafka 地址获取 topic 的 Java 方法</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token class-name">Properties</span> pro <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Properties</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>pro<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"bootstrap.servers"</span><span class="token punctuation">,</span> KAFKA_BOOTSTRAP_SERVERS<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">ListTopicsResult</span> result <span class="token operator">=</span> <span class="token class-name">KafkaAdminClient</span><span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>pro<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">listTopics</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">KafkaFuture</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Set</span><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> set <span class="token operator">=</span> result<span class="token punctuation">.</span><span class="token function">names</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> topicSet <span class="token operator">=</span> set<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h4 id="根据-zookeeper-地址"><a href="#根据-zookeeper-地址" class="headerlink" title="根据 zookeeper 地址"></a>根据 zookeeper 地址</h4><p>引入依赖</p><pre class="language-xml" data-language="xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.apache.kafka<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>kafka_2.12<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>${kafka.version}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span></code></pre><p>根据 zookeeper 地址获取 topic 的 Java 方法</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token class-name">ZkUtils</span> zkUtils <span class="token operator">=</span> <span class="token class-name">ZkUtils</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>KAFKA_ZOOKEEPER_SERVERS<span class="token punctuation">,</span> <span class="token number">30000</span><span class="token punctuation">,</span> <span class="token number">30000</span><span class="token punctuation">,</span> <span class="token class-name">JaasUtils</span><span class="token punctuation">.</span><span class="token function">isZkSecurityEnabled</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">Seq</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> topicSeq <span class="token operator">=</span> zkUtils<span class="token punctuation">.</span><span class="token function">getAllTopics</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> allTopicList <span class="token operator">=</span> <span class="token class-name">JavaConversions</span><span class="token punctuation">.</span><span class="token function">seqAsJavaList</span><span class="token punctuation">(</span>topicSeq<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>]]></content>
    
    
    <summary type="html">&lt;h3 id=&quot;命令行获取&quot;&gt;&lt;a href=&quot;#命令行获取&quot; class=&quot;headerlink&quot; title=&quot;命令行获取&quot;&gt;&lt;/a&gt;命令行获取&lt;/h3&gt;&lt;p&gt;根据 zookeeper 地址获取 topic：&lt;/p&gt;
&lt;pre class=&quot;language-bash&quot; data-language=&quot;bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;$ bin/kafka-topics.sh --list --zookeeper &lt;span class=&quot;token number&quot;&gt;127.0&lt;/span&gt;.0.1:2181&lt;/code&gt;&lt;/pre&gt;</summary>
    
    
    
    <category term="Java" scheme="https://jueee.github.io/categories/Java/"/>
    
    <category term="JavaClass" scheme="https://jueee.github.io/categories/Java/JavaClass/"/>
    
    <category term="Apache" scheme="https://jueee.github.io/categories/Apache/"/>
    
    <category term="Kafka" scheme="https://jueee.github.io/categories/Apache/Kafka/"/>
    
    
    <category term="JavaClass" scheme="https://jueee.github.io/tags/JavaClass/"/>
    
    <category term="Java" scheme="https://jueee.github.io/tags/Java/"/>
    
    <category term="Kafka" scheme="https://jueee.github.io/tags/Kafka/"/>
    
  </entry>
  
  <entry>
    <title>Java 获取 Kafka 指定 topic 的消息总量</title>
    <link href="https://jueee.github.io/2020/11/2020-11-29-Java%E8%8E%B7%E5%8F%96Kafka%E6%8C%87%E5%AE%9Atopic%E7%9A%84%E6%B6%88%E6%81%AF%E6%80%BB%E9%87%8F/"/>
    <id>https://jueee.github.io/2020/11/2020-11-29-Java%E8%8E%B7%E5%8F%96Kafka%E6%8C%87%E5%AE%9Atopic%E7%9A%84%E6%B6%88%E6%81%AF%E6%80%BB%E9%87%8F/</id>
    <published>2020-11-29T00:00:00.000Z</published>
    <updated>2020-11-30T07:58:16.392Z</updated>
    
    <content type="html"><![CDATA[<h3 id="Kafka-Consumer-API"><a href="#Kafka-Consumer-API" class="headerlink" title="Kafka Consumer API"></a>Kafka Consumer API</h3><p>Kafka 提供了两套 API 给 Consumer</p><ul><li>The high-level Consumer API</li><li>The SimpleConsumer API </li></ul><p>第一种高度抽象的 Consumer API，它使用起来简单、方便，但是对于某些特殊的需求我们可能要用到第二种更底层的 API。</p><a id="more"></a><h4 id="SimpleConsumer优势"><a href="#SimpleConsumer优势" class="headerlink" title="SimpleConsumer优势"></a>SimpleConsumer 优势</h4><p>那么第二种 <code>The SimpleConsumer API </code> 能够帮助我们做哪些事情？</p><ul><li>一个消息读取多次</li><li>在一个处理过程中只消费 Partition 其中的一部分消息</li><li>添加事务管理机制以保证消息被处理且仅被处理一次</li></ul><h4 id="SimpleConsumer弊端"><a href="#SimpleConsumer弊端" class="headerlink" title="SimpleConsumer弊端"></a>SimpleConsumer 弊端</h4><p>使用 SimpleConsumer 有哪些弊端呢？</p><ul><li>必须在程序中跟踪 offset 值</li><li>必须找出指定 Topic Partition 中的 lead broker</li><li> 必须处理 broker 的变动</li></ul><h4 id="SimpleConsumer步骤"><a href="#SimpleConsumer步骤" class="headerlink" title="SimpleConsumer步骤"></a>SimpleConsumer 步骤</h4><p>使用 SimpleConsumer 的步骤</p><ol><li>从所有活跃的 broker 中找出哪个是指定 Topic Partition 中的 leader broker</li><li> 找出指定 Topic Partition 中的所有备份 broker</li><li> 构造请求</li><li>发送请求查询数据</li><li>处理 leader broker 变更</li></ol><h3 id="命令行获取topic信息总量"><a href="#命令行获取topic信息总量" class="headerlink" title="命令行获取topic信息总量"></a>命令行获取 topic 信息总量</h3><pre class="language-bash" data-language="bash"><code class="language-bash">$ bin/kafka-run-class.sh kafka.tools.GetOffsetShell --broker-list XXX1:9092 --topic topicName1 --time -1topicName1:2:73454topicName1:5:73006topicName1:4:73511topicName1:1:73493topicName1:3:73019topicName1:0:72983$ bin/kafka-run-class.sh kafka.tools.GetOffsetShell --broker-list XXX1:9092 --topic topicName1 --time -2topicName1:2:0topicName1:5:0topicName1:4:0topicName1:1:0topicName1:3:0topicName1:0:0</code></pre><p><strong>--time -1</strong> 表示要获取指定 topic 所有分区当前的最大位移，**--time -2** 表示获取当前最早位移。</p><p>两个命令的输出结果相减便可得到所有分区当前的消息总数。</p><blockquote><p>分区当前的消息总数 = [--time-1] - [--time-2]</p></blockquote><p>相减是因为随着 kafka 的运行，topic 中有的消息可能会被删除，因此 <strong>--time -1</strong> 的结果其实表示的是历史上该 topic 生产的最大消息数，如果用户要统计当前的消息总数就必须减去 <strong>--time -2</strong> 的结果。</p><p>本例中没有任何消息被删除，故 <strong>--time -2</strong> 的结果全是 0，表示最早位移都是 0，消息总数等于历史上发送的消息总数。</p><h3 id="Java获取topic消息总量"><a href="#Java获取topic消息总量" class="headerlink" title="Java获取topic消息总量"></a>Java 获取 topic 消息总量</h3><h4 id="high-level-Consumer"><a href="#high-level-Consumer" class="headerlink" title="high-level Consumer"></a>high-level Consumer</h4><p>The high-level Consumer API  获取 Kafka 指定 topic 的消息总量：</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Arrays</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Collections</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Map</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Optional</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Properties</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>stream<span class="token punctuation">.</span></span><span class="token class-name">Collectors</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>kafka<span class="token punctuation">.</span>clients<span class="token punctuation">.</span>consumer<span class="token punctuation">.</span></span><span class="token class-name">KafkaConsumer</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>kafka<span class="token punctuation">.</span>common<span class="token punctuation">.</span></span><span class="token class-name">TopicPartition</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>slf4j<span class="token punctuation">.</span></span><span class="token class-name">Logger</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>slf4j<span class="token punctuation">.</span></span><span class="token class-name">LoggerFactory</span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">KafkaOffsetTools</span> <span class="token punctuation">{</span><span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token keyword">static</span> <span class="token class-name">Logger</span> logger <span class="token operator">=</span> <span class="token class-name">LoggerFactory</span><span class="token punctuation">.</span><span class="token function">getLogger</span><span class="token punctuation">(</span><span class="token class-name">KafkaOffsetTools</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> KAFKA_BOOTSTRAP_SERVERS <span class="token operator">=</span> <span class="token string">"XXX1:9092,XXX2:9092,XXX3:9092"</span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> TOPIC_LIST <span class="token operator">=</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">asList</span><span class="token punctuation">(</span><span class="token string">"topicName1"</span><span class="token punctuation">,</span><span class="token string">"topicName2"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token class-name">String</span> topic<span class="token operator">:</span> TOPIC_LIST<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token keyword">long</span> totolNum <span class="token operator">=</span> <span class="token function">totalMessageCount</span><span class="token punctuation">(</span>topic<span class="token punctuation">,</span> KAFKA_BOOTSTRAP_SERVERS<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>topic<span class="token operator">+</span><span class="token string">":"</span><span class="token operator">+</span>totolNum<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">long</span> <span class="token function">totalMessageCount</span><span class="token punctuation">(</span><span class="token class-name">String</span> topic<span class="token punctuation">,</span> <span class="token class-name">String</span> brokerList<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token class-name">Properties</span> props <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Properties</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        props<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"bootstrap.servers"</span><span class="token punctuation">,</span> brokerList<span class="token punctuation">)</span><span class="token punctuation">;</span>        props<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"group.id"</span><span class="token punctuation">,</span> <span class="token string">"test-group"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        props<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"enable.auto.commit"</span><span class="token punctuation">,</span> <span class="token string">"false"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        props<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"key.deserializer"</span><span class="token punctuation">,</span> <span class="token string">"org.apache.kafka.common.serialization.StringDeserializer"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        props<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"value.deserializer"</span><span class="token punctuation">,</span> <span class="token string">"org.apache.kafka.common.serialization.StringDeserializer"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">try</span> <span class="token punctuation">(</span><span class="token class-name">KafkaConsumer</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> consumer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">KafkaConsumer</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">TopicPartition</span><span class="token punctuation">&gt;</span></span> tps <span class="token operator">=</span> <span class="token class-name">Optional</span><span class="token punctuation">.</span><span class="token function">ofNullable</span><span class="token punctuation">(</span>consumer<span class="token punctuation">.</span><span class="token function">partitionsFor</span><span class="token punctuation">(</span>topic<span class="token punctuation">)</span><span class="token punctuation">)</span>                    <span class="token punctuation">.</span><span class="token function">orElse</span><span class="token punctuation">(</span><span class="token class-name">Collections</span><span class="token punctuation">.</span><span class="token function">emptyList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>                    <span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                    <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>info <span class="token operator">-&gt;</span> <span class="token keyword">new</span> <span class="token class-name">TopicPartition</span><span class="token punctuation">(</span>info<span class="token punctuation">.</span><span class="token function">topic</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> info<span class="token punctuation">.</span><span class="token function">partition</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>                    <span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span><span class="token class-name">Collectors</span><span class="token punctuation">.</span><span class="token function">toList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">TopicPartition</span><span class="token punctuation">,</span> <span class="token class-name">Long</span><span class="token punctuation">&gt;</span></span> beginOffsets <span class="token operator">=</span> consumer<span class="token punctuation">.</span><span class="token function">beginningOffsets</span><span class="token punctuation">(</span>tps<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">TopicPartition</span><span class="token punctuation">,</span> <span class="token class-name">Long</span><span class="token punctuation">&gt;</span></span> endOffsets <span class="token operator">=</span> consumer<span class="token punctuation">.</span><span class="token function">endOffsets</span><span class="token punctuation">(</span>tps<span class="token punctuation">)</span><span class="token punctuation">;</span>             <span class="token keyword">return</span> tps<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">mapToLong</span><span class="token punctuation">(</span>tp <span class="token operator">-&gt;</span> endOffsets<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>tp<span class="token punctuation">)</span> <span class="token operator">-</span> beginOffsets<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>tp<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">sum</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p>输出结果：</p><pre class="language-none"><code class="language-none">topicName1:5301171topicName2:439466</code></pre><h4 id="SimpleConsumer"><a href="#SimpleConsumer" class="headerlink" title="SimpleConsumer"></a>SimpleConsumer</h4><p>The SimpleConsumer API  获取 Kafka 指定 topic 的消息总量：</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Arrays</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Collections</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Date</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">HashMap</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Map</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Map</span><span class="token punctuation">.</span><span class="token class-name">Entry</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">TreeMap</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>slf4j<span class="token punctuation">.</span></span><span class="token class-name">Logger</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>slf4j<span class="token punctuation">.</span></span><span class="token class-name">LoggerFactory</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">kafka<span class="token punctuation">.</span>api<span class="token punctuation">.</span></span><span class="token class-name">PartitionOffsetRequestInfo</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">kafka<span class="token punctuation">.</span>common<span class="token punctuation">.</span></span><span class="token class-name">TopicAndPartition</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">kafka<span class="token punctuation">.</span>javaapi<span class="token punctuation">.</span></span><span class="token class-name">OffsetRequest</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">kafka<span class="token punctuation">.</span>javaapi<span class="token punctuation">.</span></span><span class="token class-name">OffsetResponse</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">kafka<span class="token punctuation">.</span>javaapi<span class="token punctuation">.</span></span><span class="token class-name">PartitionMetadata</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">kafka<span class="token punctuation">.</span>javaapi<span class="token punctuation">.</span></span><span class="token class-name">TopicMetadata</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">kafka<span class="token punctuation">.</span>javaapi<span class="token punctuation">.</span></span><span class="token class-name">TopicMetadataRequest</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">kafka<span class="token punctuation">.</span>javaapi<span class="token punctuation">.</span></span><span class="token class-name">TopicMetadataResponse</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">kafka<span class="token punctuation">.</span>javaapi<span class="token punctuation">.</span>consumer<span class="token punctuation">.</span></span><span class="token class-name">SimpleConsumer</span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">KafkaOffsetTools</span> <span class="token punctuation">{</span>    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token keyword">static</span> <span class="token class-name">Logger</span> logger <span class="token operator">=</span> <span class="token class-name">LoggerFactory</span><span class="token punctuation">.</span><span class="token function">getLogger</span><span class="token punctuation">(</span><span class="token class-name">KafkaOffsetTools</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> KAFKA_BOOTSTRAP_SERVERS <span class="token operator">=</span> <span class="token string">"XXX1:9092,XXX2:9092,XXX3:9092"</span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> TOPIC_LIST <span class="token operator">=</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">asList</span><span class="token punctuation">(</span><span class="token string">"topicName1"</span><span class="token punctuation">,</span><span class="token string">"topicName2"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> kafkaHosts <span class="token operator">=</span> KAFKA_BOOTSTRAP_SERVERS<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">","</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> seeds <span class="token operator">=</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">asList</span><span class="token punctuation">(</span>kafkaHosts<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">KafkaOffsetTools</span> kot <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">KafkaOffsetTools</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> topicNumMap <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">String</span> topicName <span class="token operator">:</span> TOPIC_LIST<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token class-name">TreeMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">,</span> <span class="token class-name">PartitionMetadata</span><span class="token punctuation">&gt;</span></span> metadatas <span class="token operator">=</span> kot<span class="token punctuation">.</span><span class="token function">findLeader</span><span class="token punctuation">(</span>seeds<span class="token punctuation">,</span> topicName<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">int</span> logSize <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Entry</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">,</span> <span class="token class-name">PartitionMetadata</span><span class="token punctuation">&gt;</span></span> entry <span class="token operator">:</span> metadatas<span class="token punctuation">.</span><span class="token function">entrySet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token keyword">int</span> partition <span class="token operator">=</span> entry<span class="token punctuation">.</span><span class="token function">getKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">String</span> leadBroker <span class="token operator">=</span> entry<span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">leader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">host</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">String</span> clientName <span class="token operator">=</span> <span class="token string">"Client_"</span> <span class="token operator">+</span> topicName <span class="token operator">+</span> <span class="token string">"_"</span> <span class="token operator">+</span> partition<span class="token punctuation">;</span><span class="token class-name">SimpleConsumer</span> consumer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SimpleConsumer</span><span class="token punctuation">(</span>leadBroker<span class="token punctuation">,</span> entry<span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">leader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">port</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">100000</span><span class="token punctuation">,</span> <span class="token number">64</span> <span class="token operator">*</span> <span class="token number">1024</span><span class="token punctuation">,</span> clientName<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">long</span> readOffset <span class="token operator">=</span> <span class="token function">getLastOffset</span><span class="token punctuation">(</span>consumer<span class="token punctuation">,</span> topicName<span class="token punctuation">,</span> partition<span class="token punctuation">,</span> kafka<span class="token punctuation">.</span>api<span class="token punctuation">.</span><span class="token class-name">OffsetRequest</span><span class="token punctuation">.</span><span class="token class-name">LatestTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> clientName<span class="token punctuation">)</span><span class="token punctuation">;</span>logSize <span class="token operator">+=</span> readOffset<span class="token punctuation">;</span><span class="token keyword">if</span> <span class="token punctuation">(</span>consumer <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>consumer<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">}</span>topicNumMap<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>topicName<span class="token punctuation">,</span> logSize<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>topicNumMap<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">private</span> <span class="token class-name">TreeMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">,</span> <span class="token class-name">PartitionMetadata</span><span class="token punctuation">&gt;</span></span> <span class="token function">findLeader</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> a_seedBrokers<span class="token punctuation">,</span> <span class="token class-name">String</span> a_topic<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token class-name">TreeMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">,</span> <span class="token class-name">PartitionMetadata</span><span class="token punctuation">&gt;</span></span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TreeMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">,</span> <span class="token class-name">PartitionMetadata</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">String</span> seed <span class="token operator">:</span> a_seedBrokers<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token class-name">SimpleConsumer</span> consumer <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span><span class="token keyword">try</span> <span class="token punctuation">{</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> hostAndPort <span class="token operator">=</span> seed<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">":"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>consumer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SimpleConsumer</span><span class="token punctuation">(</span>hostAndPort<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span>hostAndPort<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">100000</span><span class="token punctuation">,</span> <span class="token number">64</span> <span class="token operator">*</span> <span class="token number">1024</span><span class="token punctuation">,</span> <span class="token string">"leaderLookup"</span> <span class="token operator">+</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> topics <span class="token operator">=</span> <span class="token class-name">Collections</span><span class="token punctuation">.</span><span class="token function">singletonList</span><span class="token punctuation">(</span>a_topic<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">TopicMetadataRequest</span> req <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TopicMetadataRequest</span><span class="token punctuation">(</span>topics<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">TopicMetadataResponse</span> resp <span class="token operator">=</span> consumer<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>req<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">TopicMetadata</span><span class="token punctuation">&gt;</span></span> metaData <span class="token operator">=</span> resp<span class="token punctuation">.</span><span class="token function">topicsMetadata</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">TopicMetadata</span> item <span class="token operator">:</span> metaData<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">PartitionMetadata</span> part <span class="token operator">:</span> item<span class="token punctuation">.</span><span class="token function">partitionsMetadata</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>part<span class="token punctuation">.</span><span class="token function">partitionId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> part<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Throwable</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>logger<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">"Broker ["</span> <span class="token operator">+</span> seed <span class="token operator">+</span> <span class="token string">"] to find Leader for ["</span> <span class="token operator">+</span> a_topic <span class="token operator">+</span> <span class="token string">"] Reason: "</span> <span class="token operator">+</span> e<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> e<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span><span class="token keyword">if</span> <span class="token punctuation">(</span>consumer <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>consumer<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">return</span> map<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">long</span> <span class="token function">getLastOffset</span><span class="token punctuation">(</span><span class="token class-name">SimpleConsumer</span> consumer<span class="token punctuation">,</span> <span class="token class-name">String</span> topic<span class="token punctuation">,</span> <span class="token keyword">int</span> partition<span class="token punctuation">,</span> <span class="token keyword">long</span> whichTime<span class="token punctuation">,</span><span class="token class-name">String</span> clientName<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token class-name">TopicAndPartition</span> topicAndPartition <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TopicAndPartition</span><span class="token punctuation">(</span>topic<span class="token punctuation">,</span> partition<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">TopicAndPartition</span><span class="token punctuation">,</span> <span class="token class-name">PartitionOffsetRequestInfo</span><span class="token punctuation">&gt;</span></span> requestInfo <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">TopicAndPartition</span><span class="token punctuation">,</span> <span class="token class-name">PartitionOffsetRequestInfo</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>requestInfo<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>topicAndPartition<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">PartitionOffsetRequestInfo</span><span class="token punctuation">(</span>whichTime<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">OffsetRequest</span> request <span class="token operator">=</span> <span class="token keyword">new</span> kafka<span class="token punctuation">.</span>javaapi<span class="token punctuation">.</span><span class="token class-name">OffsetRequest</span><span class="token punctuation">(</span>requestInfo<span class="token punctuation">,</span> kafka<span class="token punctuation">.</span>api<span class="token punctuation">.</span><span class="token class-name">OffsetRequest</span><span class="token punctuation">.</span><span class="token class-name">CurrentVersion</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> clientName<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">OffsetResponse</span> response <span class="token operator">=</span> consumer<span class="token punctuation">.</span><span class="token function">getOffsetsBefore</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">if</span> <span class="token punctuation">(</span>response<span class="token punctuation">.</span><span class="token function">hasError</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>logger<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">"Error fetching data Offset Data the Broker. Reason: "</span> <span class="token operator">+</span> response<span class="token punctuation">.</span><span class="token function">errorCode</span><span class="token punctuation">(</span>topic<span class="token punctuation">,</span> partition<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">long</span><span class="token punctuation">[</span><span class="token punctuation">]</span> offsets <span class="token operator">=</span> response<span class="token punctuation">.</span><span class="token function">offsets</span><span class="token punctuation">(</span>topic<span class="token punctuation">,</span> partition<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">return</span> offsets<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p>输出结果：</p><pre class="language-none"><code class="language-none">{topicName1=5301171, topicName2=439466}</code></pre>]]></content>
    
    
    <summary type="html">&lt;h3 id=&quot;Kafka-Consumer-API&quot;&gt;&lt;a href=&quot;#Kafka-Consumer-API&quot; class=&quot;headerlink&quot; title=&quot;Kafka Consumer API&quot;&gt;&lt;/a&gt;Kafka Consumer API&lt;/h3&gt;&lt;p&gt;Kafka 提供了两套 API 给 Consumer&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;The high-level Consumer API&lt;/li&gt;
&lt;li&gt;The SimpleConsumer API &lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;第一种高度抽象的 Consumer API，它使用起来简单、方便，但是对于某些特殊的需求我们可能要用到第二种更底层的 API。&lt;/p&gt;</summary>
    
    
    
    <category term="Java" scheme="https://jueee.github.io/categories/Java/"/>
    
    <category term="JavaClass" scheme="https://jueee.github.io/categories/Java/JavaClass/"/>
    
    <category term="Apache" scheme="https://jueee.github.io/categories/Apache/"/>
    
    <category term="Kafka" scheme="https://jueee.github.io/categories/Apache/Kafka/"/>
    
    
    <category term="JavaClass" scheme="https://jueee.github.io/tags/JavaClass/"/>
    
    <category term="Java" scheme="https://jueee.github.io/tags/Java/"/>
    
    <category term="Kafka" scheme="https://jueee.github.io/tags/Kafka/"/>
    
  </entry>
  
  <entry>
    <title>ElasticSearch 集成 Spring 之 ElasticsearchTemplate 示例</title>
    <link href="https://jueee.github.io/2020/11/2020-11-27-ElasticSearch%E9%9B%86%E6%88%90Spring%E4%B9%8BElasticsearchTemplate%E7%A4%BA%E4%BE%8B/"/>
    <id>https://jueee.github.io/2020/11/2020-11-27-ElasticSearch%E9%9B%86%E6%88%90Spring%E4%B9%8BElasticsearchTemplate%E7%A4%BA%E4%BE%8B/</id>
    <published>2020-11-27T00:00:00.000Z</published>
    <updated>2020-12-04T10:42:15.164Z</updated>
    
    <content type="html"><![CDATA[<h3 id="ElasticsearchTemplate"><a href="#ElasticsearchTemplate" class="headerlink" title="ElasticsearchTemplate"></a>ElasticsearchTemplate</h3><p>ElasticsearchTemplate 是 Spring 对 ElasticSearch 的 Java api 进行的封装，提供了大量的相关的类来完成各种各样的查询。</p><h4 id="引入依赖"><a href="#引入依赖" class="headerlink" title="引入依赖"></a>引入依赖</h4><pre class="language-xml" data-language="xml"><code class="language-xml"><span class="token comment">&lt;!-- https://mvnrepository.com/artifact/org.springframework.data/spring-data-elasticsearch --&gt;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.data<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-data-elasticsearch<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>3.2.1.RELEASE<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span></code></pre><a id="more"></a><h3 id="使用示例"><a href="#使用示例" class="headerlink" title="使用示例"></a>使用示例</h3><p><strong>索引是否存在</strong></p><pre class="language-java" data-language="java"><code class="language-java">elasticsearchTemplate<span class="token punctuation">.</span><span class="token function">indexExists</span><span class="token punctuation">(</span><span class="token class-name">Test</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span></code></pre><p><strong>创建索引并初始化 Mapping</strong></p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">boolean</span> createResult <span class="token operator">=</span> elasticsearchTemplate<span class="token punctuation">.</span><span class="token function">createIndex</span><span class="token punctuation">(</span><span class="token class-name">Test</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>logger<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"[createResult]"</span><span class="token operator">+</span>createResult<span class="token punctuation">)</span><span class="token punctuation">;</span>elasticsearchTemplate<span class="token punctuation">.</span><span class="token function">putMapping</span><span class="token punctuation">(</span><span class="token class-name">Test</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>elasticsearchTemplate<span class="token punctuation">.</span><span class="token function">refresh</span><span class="token punctuation">(</span><span class="token class-name">Test</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p><strong>分页查询并计算总数量</strong></p><pre class="language-java" data-language="java"><code class="language-java"><span class="token comment">// 特别注意：es的分页从0页开始</span><span class="token class-name">SearchQuery</span> searchQuery <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">NativeSearchQueryBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">withQuery</span><span class="token punctuation">(</span>bool<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">withPageable</span><span class="token punctuation">(</span> <span class="token class-name">PageRequest</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span>page<span class="token punctuation">,</span> perPage<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">Page</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Account</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> elasticsearchTemplate<span class="token punctuation">.</span><span class="token function">queryForPage</span><span class="token punctuation">(</span>searchQuery<span class="token punctuation">,</span> <span class="token class-name">Account</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>elasticsearchTemplate<span class="token punctuation">.</span><span class="token function">queryForPage</span><span class="token punctuation">(</span>searchQuery<span class="token punctuation">,</span> <span class="token class-name">Account</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">SearchResultMapper</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token annotation punctuation">@Override</span><span class="token keyword">public</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token class-name">T</span> <span class="token function">mapSearchHit</span><span class="token punctuation">(</span><span class="token class-name">SearchHit</span> searchHit<span class="token punctuation">,</span> <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> type<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token annotation punctuation">@Override</span><span class="token keyword">public</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token class-name">AggregatedPage</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token function">mapResults</span><span class="token punctuation">(</span><span class="token class-name">SearchResponse</span> response<span class="token punctuation">,</span> <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> clazz<span class="token punctuation">,</span> <span class="token class-name">Pageable</span> pageable<span class="token punctuation">)</span> <span class="token punctuation">{</span>paginator<span class="token punctuation">.</span><span class="token function">setItems</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span>response<span class="token punctuation">.</span><span class="token function">getHits</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getTotalHits</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>]]></content>
    
    
    <summary type="html">&lt;h3 id=&quot;ElasticsearchTemplate&quot;&gt;&lt;a href=&quot;#ElasticsearchTemplate&quot; class=&quot;headerlink&quot; title=&quot;ElasticsearchTemplate&quot;&gt;&lt;/a&gt;ElasticsearchTemplate&lt;/h3&gt;&lt;p&gt;ElasticsearchTemplate 是 Spring 对 ElasticSearch 的 Java api 进行的封装，提供了大量的相关的类来完成各种各样的查询。&lt;/p&gt;
&lt;h4 id=&quot;引入依赖&quot;&gt;&lt;a href=&quot;#引入依赖&quot; class=&quot;headerlink&quot; title=&quot;引入依赖&quot;&gt;&lt;/a&gt;引入依赖&lt;/h4&gt;&lt;pre class=&quot;language-xml&quot; data-language=&quot;xml&quot;&gt;&lt;code class=&quot;language-xml&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;&amp;lt;!-- https://mvnrepository.com/artifact/org.springframework.data/spring-data-elasticsearch --&amp;gt;&lt;/span&gt;
&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;dependency&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;
    &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;groupId&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;org.springframework.data&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;groupId&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;
    &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;artifactId&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;spring-data-elasticsearch&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;artifactId&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;
    &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;version&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;3.2.1.RELEASE&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;version&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;dependency&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;</summary>
    
    
    
    <category term="Java" scheme="https://jueee.github.io/categories/Java/"/>
    
    <category term="JavaClass" scheme="https://jueee.github.io/categories/Java/JavaClass/"/>
    
    <category term="ElasticSearch" scheme="https://jueee.github.io/categories/ElasticSearch/"/>
    
    
    <category term="JavaClass" scheme="https://jueee.github.io/tags/JavaClass/"/>
    
    <category term="Java" scheme="https://jueee.github.io/tags/Java/"/>
    
    <category term="ElasticSearch" scheme="https://jueee.github.io/tags/ElasticSearch/"/>
    
  </entry>
  
  <entry>
    <title>RAID 管理工具 MegaCli 的安装使用</title>
    <link href="https://jueee.github.io/2020/11/2020-11-26-RAID%E7%AE%A1%E7%90%86%E5%B7%A5%E5%85%B7MegaCli%E7%9A%84%E5%AE%89%E8%A3%85%E4%BD%BF%E7%94%A8/"/>
    <id>https://jueee.github.io/2020/11/2020-11-26-RAID%E7%AE%A1%E7%90%86%E5%B7%A5%E5%85%B7MegaCli%E7%9A%84%E5%AE%89%E8%A3%85%E4%BD%BF%E7%94%A8/</id>
    <published>2020-11-26T00:00:00.000Z</published>
    <updated>2020-11-24T09:45:48.681Z</updated>
    
    <content type="html"><![CDATA[<h3 id="MegaCli-介绍"><a href="#MegaCli-介绍" class="headerlink" title="MegaCli 介绍"></a>MegaCli 介绍</h3><p>MegaCli 是一款管理维护硬件 RAID 软件，可以通过它来了解当前 raid 卡的所有信息，包括 raid 卡的型号，raid 的阵列类型，raid 上各磁盘状态，等等。</p><a id="more"></a><h3 id="MegaCli-安装"><a href="#MegaCli-安装" class="headerlink" title="MegaCli 安装"></a>MegaCli 安装</h3><h4 id="下载安装"><a href="#下载安装" class="headerlink" title="下载安装"></a>下载安装</h4><p>方案一</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token function">apt-get</span> <span class="token function">install</span> alien<span class="token function">wget</span> --user<span class="token operator">=</span>hetzner --password<span class="token operator">=</span>download http://download.hetzner.de/tools/LSI/tools/MegaCLI/8.07.14_MegaCLI.zip<span class="token function">unzip</span> <span class="token number">8.07</span>.14_MegaCLI.zip -d megacli<span class="token builtin class-name">cd</span> megacli/Linux<span class="token function">sudo</span> alien MegaCli-8.07.14-1.noarch.rpm<span class="token function">sudo</span> dpkg -i megacli_8.07.14-2_all.deb<span class="token function">ln</span> -s /opt/MegaRAID/MegaCli/MegaCli64 /usr/bin/megacli</code></pre><p>方案二</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token function">apt-get</span> -y <span class="token function">install</span>  rpm2cpio libsysfs2 libsysfs-dev <span class="token function">unzip</span><span class="token function">unzip</span> <span class="token number">8.00</span>.48_Linux_MegaCLI.zip<span class="token function">unzip</span> MegaCliLin.ziprpm2cpio Lib_Utils-1.00-09.noarch.rpm <span class="token operator">|</span> cpio -idmvrpm2cpio MegaCli-8.00.48-1.i386.rpm <span class="token operator">|</span> cpio -idmv<span class="token function">ln</span> -s opt/MegaRAID/MegaCli/MegaCli64 /usr/bin/megacli64<span class="token function">ln</span> -s opt/MegaRAID/MegaCli/MegaCli /usr/bin/megacli</code></pre><h4 id="验证安装"><a href="#验证安装" class="headerlink" title="验证安装"></a>验证安装</h4><pre class="language-bash" data-language="bash"><code class="language-bash">$  megacli -v      MegaCLI SAS RAID Management Tool  Ver <span class="token number">8.07</span>.14 Dec <span class="token number">16</span>, <span class="token number">2013</span>    <span class="token punctuation">(</span>c<span class="token punctuation">)</span>Copyright <span class="token number">2013</span>, LSI Corporation, All Rights Reserved.Exit Code: 0x00</code></pre><h4 id="安装异常"><a href="#安装异常" class="headerlink" title="安装异常"></a>安装异常</h4><p>问题：</p><pre class="language-bash" data-language="bash"><code class="language-bash">$ megaclimegacli: error <span class="token keyword">while</span> loading shared libraries: libncurses.so.5: cannot <span class="token function">open</span> shared object file: No such <span class="token function">file</span> or directory</code></pre><p>解决</p><pre class="language-bash" data-language="bash"><code class="language-bash">$ <span class="token function">apt-get</span> <span class="token function">install</span> libncurses5</code></pre><h3 id="命令汇总"><a href="#命令汇总" class="headerlink" title="命令汇总"></a>命令汇总</h3><ul><li><p>查看 raid 卡日志</p><p>megacli -FwTermLog -Dsply -aALL</p></li><li><p>显示适配器个数</p><p>megacli -adpCount</p></li><li><p>显示适配器时间</p><p>megacli -AdpGetTime –aALL</p></li><li><p>显示所有适配器信息</p><p>megacli -AdpAllInfo -aAll</p></li><li><p>显示所有逻辑磁盘组信息</p><p>megacli -LDInfo -LALL -aAll</p></li><li><p>查 raid 卡信息 (生产商、电池信息及所支持的 raid 级别)</p><p>megacli -AdpAllInfo -aALL |grep -E "Product Name|BBU|Memory Size|RAID Level Supported"</p></li><li><p>查看虚拟化 (vd) 和物理盘 (pd) 的信息，比如查看物理硬盘数，是否有硬盘 offline 或者 degraded</p><p>megacli -AdpAllInfo -aALL |grep -E "Device Present" -A9</p></li><li><p>查看硬盘是否 online</p><p>megacli -PDList -aALL |grep "Firmware state"</p></li><li><p>查看硬盘是否存在物理错误 (error 不为 0，可能会有硬盘故障即将发生)</p><p>megacli -PDList -aALL |grep -i error</p></li><li><p>查看电池信息 (电池类型、电池状态、充电状态、温度等)</p><p>megacli -AdpBbuCmd -aAll</p></li><li><p>raid 卡个数</p><p>megacli –adpCount</p></li><li><p>检测磁盘 ID 注意，该 ID 值用于标注磁盘</p><p>megacli -PDlist -aALL | grep "ID" | uniq</p></li><li><p>显示所有逻辑磁盘组信息 (做了几组 raid，raid cache 的默认和当前策略，做好 raid 后的虚拟盘容量)</p><p>megacli -LDInfo -LALL -aAll</p></li><li><p>显示所有物理盘 (物理磁盘个数、大小、是否存在 error)</p><p>megacli -PDList -aAll</p></li><li><p>显示所有物理盘物理错误</p><p>megacli -PDList -aAll |grep -i error</p></li><li><p>查看充电状态</p><p>megacli -AdpBbuCmd -GetBbuStatus -aALL |grep 'Charger Status'</p></li><li><p>显示 BBU 状态信息，比如电池是否，如果 issohgood 为 Yes 为正常，No 为异常</p></li></ul><p>  megacli -AdpBbuCmd -GetBbuStatus -aALL|grep -i issohgood</p><ul><li><p>显示 BBU 状态信息</p><p>megacli -AdpBbuCmd -GetBbuStatus -aALL</p></li><li><p>显示 BBU 容量信息</p><p>megacli -AdpBbuCmd -GetBbuCapacityInfo -aALL</p></li><li><p>显示 BBU 设计参数</p><p>megacli -AdpBbuCmd -GetBbuDesignInfo -aALL</p></li><li><p>显示当前 BBU 属性</p><p>megacli -AdpBbuCmd -GetBbuProperties -aALL</p></li><li><p>显示 Raid 卡型号，cache 大小、Raid 设置，cache 策略、Disk 相关信息</p><p>megacli -cfgdsply -aALL |egrep "PDs|VDs|Product Name|Memory|BBU:"</p></li><li><p>查看磁盘缓存策略 (查看 vd 的)</p><p>megacli -LDGetProp -Cache -LALL -aALL</p></li><li><p>查看磁盘缓存策略 (查看 pd 的)</p><p>megacli -LDGetProp -DskCache -LALL -aALL</p></li><li><p>查看物理磁盘重建进度</p><p>megacli -PDRbld -ShowProg -PhysDrv [1:5] -a0</p></li><li><p>以动态可视化文字界面显示</p><p>megacli -PDRbld -ProgDsply -PhysDrv [1:5] -a0</p></li><li><p>关闭缓存</p><p>megacli -LDSetProp -DisDskCache -L0 -a0</p></li><li><p>显示 Rebuid 进度</p><p>megacli -PDRbld -ShowProg -physdrv[20:2] -aALL</p></li><li><p>查看 E S</p><p>megacli -PDList -aAll -NoLog | grep -Ei "(enclosure|slot)"</p></li><li><p>查看所有硬盘的状态</p><p>megacli -PDList -aAll -NoLog</p></li><li><p>查看所有 Virtual Disk 的状态</p><p>megacli -LdPdInfo -aAll -NoLog</p></li><li><p>在线做 Raid</p><p>megacli -CfgLdAdd -r0[0:11] WB NORA Direct CachedBadBBU -strpsz64 -a0 -NoLog</p><p>megacli -CfgLdAdd -r5 [12:2,12:3,12:4,12:5,12:6,12:7] WB Direct -a0</p></li><li><p>点亮指定硬盘 (定位)</p><p>megacli -PdLocate -start -physdrv[252:2] -a0</p></li><li><p>清除 Foreign 状态</p><p>megacli -CfgForeign -Clear -a0</p></li><li><p>查看 RAID 阵列中掉线的盘</p><p>megacli -pdgetmissing -a0</p></li><li><p>替换坏掉的模块</p><p>megacli -pdreplacemissing -physdrv[12:10] -Array5 -row0 -a0</p></li><li><p>手动开启 rebuid</p><p>megacli -pdrbld -start -physdrv[12:10] -a0</p></li><li><p>查看 Megacli 的 log</p><p>megacli -FwTermLog dsply -a0 &gt; adp2.log</p></li><li><p>设置 HotSpare</p><p>megacli -pdhsp -set [-Dedicated [-Array2]] [-EnclAffinity] [-nonRevertible] -PhysDrv[4:11] -a0</p><p>megacli -pdhsp -set [-EnclAffinity] [-nonRevertible] -PhysDrv[32：1}] -a0</p></li><li><p>关闭 Rebuild</p><p>megacli -AdpAutoRbld -Dsbl -a0</p></li><li><p>设置 rebuild 的速率</p><p>megacli -AdpSetProp RebuildRate -30 -a0</p></li><li><p>创建一个 raid5 阵列，由物理盘 2,3 4 构成，该阵列的热备盘是物理盘 5</p><p>megacli-CfgLdA d -r5 [1:2,1:3,1:4] WB Direct -Hsp[1:5] -a0</p></li><li><p>创建阵列，不指定热备</p><p>megacli-CfgLdA d -r5 [1:2,1:3,1:4] WB Direct -a0</p></li><li><p>删除阵列</p><p>megacli-CfgLdDel -L1 -a0</p></li><li><p>在线添加磁盘</p><p>megacli-LDRecon -Star - 5 Ad -PhysDrv[1:4] -L1 -a0</p></li><li><p>阵列创建完后，会有一个初始化同步块的过程，可以看 其进度。</p><p>megacli-LDInit -ShowProg -LA L -aAL</p></li><li><p>以动态可视化文字界面显示</p><p>megacli-LDInit -ProgDsply -LA L -aAL</p></li><li><p>查看阵列后台初始化进度</p><p>megacli-LDBI -ShowProg -LA L -aAL</p></li><li><p>或者以动态可视化文字界面显示</p><p>megacli-LDBI -ProgDsply -LA L -aAL</p></li><li><p>指定第 5 块盘作为全局热备</p><p>megacli-PDHSP -Set [-EnclAf in ty] [-no Rev rtible] -PhysDrv[1:5] -a0</p></li><li><p>指定为某个阵列的专用热备</p><p>megacli-PDHSP -Set [-Dedicated [-Ar ay1] [-EnclAf in ty] [-no Rev rtible] -PhysDrv[1:5] -a0</p></li><li><p>删除全局热备</p><p>megacli-PDHSP -Rmv -PhysDrv[1:5] -a0</p></li><li><p>将某块物理盘下线 / 上线</p><p>megacli -PDOffline -PhysDrv [1:4] -a0</p><p>megacli -PDOnline -PhysDrv [1:4] -a0</p></li><li><p>查看物理磁盘重建进度</p><p>megacli-PDRbld -ShowProg -PhysDrv [1:5] -a0</p></li><li><p>或者以动态可视化文字界面显示</p><p>megacli -PDRbld -ProgDsply -PhysDrv [1:5] -a0</p></li><li><p>查看做 raid 的情况</p><p>megacli -LDInfo -Lal -aAL | grep -E "RAID Lev l|Strip Size|NumberOf Drives|Span Depth|^Size"</p></li><li><p>取 Enclosure Device ID</p><p>uiqnum=<code> megacli -PDlist -aAL | grep "ID" | uniq |awk -F: '{print $2}' | awk '{print $1}'</code></p></li><li><p>取 Slot Number</p><p>disknum=<code>megacli -PDList -aAL | grep -E "DISK GROUP|Slot Number|postion:|Firmware sta e:" | grep Slot | awk -F[: ] '{print $NF}'</code></p></li><li><p>算出总数</p><p>diskto al=<code>megacli -PDList -aAL | grep -E "DISK GROUP|Slot Number|postion:|Firmware sta e:" | grep Slot | awk -F[: ] '{print $NF}' | wc -l</code><br>ar ay=($disknum)</p></li><li><p>查看当前 raid 缓存状态，raid 缓存状态设置为 wb 的话要注意电池放电事宜，设置电池放电模式为自动学习模式</p><p>megacli   -ldgetprop  -dskcache -lall  -aall</p></li><li><p>raid 电池设置相关</p><ul><li><p>查看电池状态信息 (Display BBU Status Information)</p><p>megacli -AdpBbuCmd -GetBbuStatus -aN|-a0,1,2|-aALL</p><p>megacli -AdpBbuCmd -GetBbuStatus -aALL</p></li><li><p>查看电池容量（Display BBU Capacity Information）</p><p>megacli -AdpBbuCmd -GetBbuCapacityInfo -aN|-a0,1,2|-aALL</p><p>megacli -AdpBbuCmd -GetBbuCapacityInfo –aALL</p></li><li><p>查看电池设计参数 (Display BBU Design Parameters)</p><p>megacli -AdpBbuCmd -GetBbuDesignInfo -aN|-a0,1,2|-aALL</p><p>megacli -AdpBbuCmd -GetBbuDesignInfo –aALL</p></li><li><p>查看电池属性（Display Current BBU Properties）</p><p>megacli -AdpBbuCmd -GetBbuProperties -aN|-a0,1,2|-aALL</p><p>megacli -AdpBbuCmd -GetBbuProperties –aALL</p></li><li><p>设置电池为学习模式为循环模式（Start BBU Learning Cycle）</p><p>megacli -AdpBbuCmd -BbuLearn -aN|-a0,1,2|-aALL</p></li></ul></li><li><p>查询 raid 级别，磁盘数量，容量，条带大小。</p><p>megacli -cfgdsply -aALL |grep Policy</p></li><li><p>查询控制器 cache 策略</p><p>megacli -LDSetProp WB -L0 -a0</p></li><li><p>设置 write back 功能</p><p>megacli -LDSetProp CachedBadBBU -L0 -a0</p></li><li><p>设置即使电池坏了还是保持 WB 功能</p><p>megacli -AdpBbuCmd -BbuLearn a0</p></li><li><p>手动充电</p><p>megacli -FwTermLog -Dsply -aALL</p></li><li><p>显示适配器个数： </p><p>megacli -adpCount</p></li><li><p>显示所有适配器信息： </p><p>megacli -AdpAllInfo -aAll</p></li><li><p>显示所有逻辑磁盘组信息： </p><p>megacli -LDInfo -LALL -aAll</p></li><li><p>显示所有的物理信息： </p><p>megacli -PDList -aAll<br>Media</p></li><li><p>查看充电状态： </p><p>megacli -AdpBbuCmd -GetBbuStatus -aALL</p></li><li><p>显示 BBU (后备电池) 状态信息： </p><p>megacli -AdpBbuCmd -GetBbuStatus -aALL</p></li><li><p>显示 BBU 容量信息： </p><p>megacli -AdpBbuCmd -GetBbuCapacityInfo -aALL</p></li><li><p>显示 BBU 设计参数： </p><p>megacli -AdpBbuCmd -GetBbuDesignInfo -aALL</p></li><li><p>显示当前 BBU 属性： </p><p>megacli -AdpBbuCmd -GetBbuProperties -aALL</p></li><li><p>显示 Raid 卡型号，Raid 设置，Disk 相关信息： </p><p>megacli -cfgdsply -aALL</p></li><li><p>查看 Cache 策略设置： </p><p>megacli -cfgdsply -aALL |grep -i Policy</p></li><li><p>查看充电进度百分比： </p><p>megacli -AdpBbuCmd -GetBbuStatus -aALL</p></li></ul><h3 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h3><ul><li><span class="exturl" data-url="aHR0cHM6Ly9pZGMud2FueXVuc2h1anUuY29tL2N5bS82NDYuaHRtbA==">https://idc.wanyunshuju.com/cym/646.html<i class="fa fa-external-link-alt"></i></span></li><li><span class="exturl" data-url="aHR0cHM6Ly9naXN0LmdpdGh1Yi5jb20vZnhrcmF1cy81OTVhYjgyZTA3Y2Q2ZjhlMDU3ZDMxYmMwYmM1ZTc3OQ==">https://gist.github.com/fxkraus/595ab82e07cd6f8e057d31bc0bc5e779<i class="fa fa-external-link-alt"></i></span></li><li><span class="exturl" data-url="aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3hpbnFpZGlhbl94aWFvL2FydGljbGUvZGV0YWlscy84MDk0MDMwNg==">https://blog.csdn.net/xinqidian_xiao/article/details/80940306<i class="fa fa-external-link-alt"></i></span></li></ul>]]></content>
    
    
    <summary type="html">&lt;h3 id=&quot;MegaCli-介绍&quot;&gt;&lt;a href=&quot;#MegaCli-介绍&quot; class=&quot;headerlink&quot; title=&quot;MegaCli 介绍&quot;&gt;&lt;/a&gt;MegaCli 介绍&lt;/h3&gt;&lt;p&gt;MegaCli 是一款管理维护硬件 RAID 软件，可以通过它来了解当前 raid 卡的所有信息，包括 raid 卡的型号，raid 的阵列类型，raid 上各磁盘状态，等等。&lt;/p&gt;</summary>
    
    
    
    <category term="Linux" scheme="https://jueee.github.io/categories/Linux/"/>
    
    <category term="软件" scheme="https://jueee.github.io/categories/Linux/%E8%BD%AF%E4%BB%B6/"/>
    
    
    <category term="Linux" scheme="https://jueee.github.io/tags/Linux/"/>
    
    <category term="软件" scheme="https://jueee.github.io/tags/%E8%BD%AF%E4%BB%B6/"/>
    
    <category term="RAID" scheme="https://jueee.github.io/tags/RAID/"/>
    
  </entry>
  
  <entry>
    <title>Excel 文件导入导出工具 ExcelKit</title>
    <link href="https://jueee.github.io/2020/11/2020-11-25-Excel%E6%96%87%E4%BB%B6%E5%AF%BC%E5%85%A5%E5%AF%BC%E5%87%BA%E5%B7%A5%E5%85%B7ExcelKit/"/>
    <id>https://jueee.github.io/2020/11/2020-11-25-Excel%E6%96%87%E4%BB%B6%E5%AF%BC%E5%85%A5%E5%AF%BC%E5%87%BA%E5%B7%A5%E5%85%B7ExcelKit/</id>
    <published>2020-11-25T00:00:00.000Z</published>
    <updated>2020-11-24T03:46:49.940Z</updated>
    
    <content type="html"><![CDATA[<h3 id="ExcelKit-介绍"><a href="#ExcelKit-介绍" class="headerlink" title="ExcelKit 介绍"></a>ExcelKit 介绍</h3><p>ExcelKit 是简单、好用且轻量级的海量 Excel 文件导入导出解决方案。</p><ul><li>GitHub：<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL3dlbnpld29vL0V4Y2VsS2l0">https://github.com/wenzewoo/ExcelKit<i class="fa fa-external-link-alt"></i></span></li><li>Gitee：<span class="exturl" data-url="aHR0cHM6Ly9naXRlZS5jb20vd3V3ZW56ZS9FeGNlbEtpdC8=">https://gitee.com/wuwenze/ExcelKit/<i class="fa fa-external-link-alt"></i></span></li></ul><a id="more"></a><h4 id="ExcelKit-引入"><a href="#ExcelKit-引入" class="headerlink" title="ExcelKit 引入"></a>ExcelKit 引入</h4><pre class="language-xml" data-language="xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.wuwenze<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>ExcelKit<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.0.72<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span></code></pre><h3 id="ExcelKit-示例"><a href="#ExcelKit-示例" class="headerlink" title="ExcelKit 示例"></a>ExcelKit 示例</h3><h4 id="ExcelMapping"><a href="#ExcelMapping" class="headerlink" title="ExcelMapping"></a>ExcelMapping</h4><p>ExcelMapping (配置 Excel 与实体之间的映射关系)</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Data</span><span class="token annotation punctuation">@Excel</span><span class="token punctuation">(</span><span class="token string">"user"</span><span class="token punctuation">)</span><span class="token annotation punctuation">@Table</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">"tb_user"</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Id</span>    <span class="token annotation punctuation">@ExcelField</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"编号"</span><span class="token punctuation">,</span> width <span class="token operator">=</span> <span class="token number">50</span><span class="token punctuation">)</span>    <span class="token keyword">private</span> <span class="token class-name">Long</span> id<span class="token punctuation">;</span>    <span class="token annotation punctuation">@ExcelField</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"用户名"</span><span class="token punctuation">,</span> width <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">)</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> username<span class="token punctuation">;</span>    <span class="token annotation punctuation">@ExcelField</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"昵称"</span><span class="token punctuation">,</span> width <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">)</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> nickname<span class="token punctuation">;</span>    <span class="token annotation punctuation">@ExcelField</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"邮箱"</span><span class="token punctuation">,</span> width <span class="token operator">=</span> <span class="token number">150</span><span class="token punctuation">)</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> email<span class="token punctuation">;</span>    <span class="token annotation punctuation">@ExcelField</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"电话号码"</span><span class="token punctuation">,</span> width <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">)</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> phoneNumber<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">Integer</span> status<span class="token punctuation">;</span>    <span class="token annotation punctuation">@ExcelField</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"创建时间"</span><span class="token punctuation">,</span> dateFormat <span class="token operator">=</span> <span class="token string">"yyyy年MM月dd日 HH:mm:ss"</span><span class="token punctuation">,</span> width <span class="token operator">=</span> <span class="token number">180</span><span class="token punctuation">)</span>    <span class="token keyword">private</span> <span class="token class-name">Date</span> createTime<span class="token punctuation">;</span>    <span class="token annotation punctuation">@ExcelField</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"修改时间"</span><span class="token punctuation">,</span> dateFormat <span class="token operator">=</span> <span class="token string">"yyyy年MM月dd日 HH:mm:ss"</span><span class="token punctuation">,</span>width <span class="token operator">=</span> <span class="token number">180</span><span class="token punctuation">)</span>    <span class="token keyword">private</span> <span class="token class-name">Date</span> modifiedTime<span class="token punctuation">;</span>    <span class="token annotation punctuation">@ExcelField</span><span class="token punctuation">(</span><span class="token comment">//</span>            value <span class="token operator">=</span> <span class="token string">"性别"</span><span class="token punctuation">,</span>            readConverterExp <span class="token operator">=</span> <span class="token string">"男=1,女=0"</span><span class="token punctuation">,</span>            writeConverterExp <span class="token operator">=</span> <span class="token string">"1=男,0=女"</span>            <span class="token punctuation">,</span>width <span class="token operator">=</span> <span class="token number">50</span>    <span class="token punctuation">)</span>    <span class="token keyword">private</span> <span class="token class-name">Integer</span> sex<span class="token punctuation">;</span>    <span class="token annotation punctuation">@ExcelField</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"密码盐值"</span><span class="token punctuation">,</span> width <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">)</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> salt<span class="token punctuation">;</span>    <span class="token annotation punctuation">@ExcelField</span><span class="token punctuation">(</span><span class="token comment">//</span>            value <span class="token operator">=</span> <span class="token string">"用户类型"</span><span class="token punctuation">,</span>            readConverterExp <span class="token operator">=</span> <span class="token string">"超级管理员=0,普通用户=1"</span><span class="token punctuation">,</span>            writeConverterExp <span class="token operator">=</span> <span class="token string">"0=超级管理员,1=普通用户"</span>            <span class="token punctuation">,</span>width <span class="token operator">=</span> <span class="token number">80</span>    <span class="token punctuation">)</span>    <span class="token keyword">private</span> <span class="token class-name">Integer</span> type<span class="token punctuation">;</span>    <span class="token annotation punctuation">@ExcelField</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"用户密码"</span><span class="token punctuation">,</span> width <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">)</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> password<span class="token punctuation">;</span>    <span class="token annotation punctuation">@ExcelField</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"出生日期"</span><span class="token punctuation">,</span> dateFormat <span class="token operator">=</span> <span class="token string">"yyyy/MM/dd"</span><span class="token punctuation">,</span>width <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">)</span>    <span class="token keyword">private</span> <span class="token class-name">Date</span> birth<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">Long</span> departmentId<span class="token punctuation">;</span>    <span class="token annotation punctuation">@ExcelField</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"头像url"</span><span class="token punctuation">,</span> width <span class="token operator">=</span> <span class="token number">200</span><span class="token punctuation">)</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> avatar<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">Integer</span> is_corp<span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><h4 id="下载-Controller"><a href="#下载-Controller" class="headerlink" title="下载 Controller"></a>下载 Controller</h4><p>使用 ExcelKit 提供的 API 构建导入模板，会根据配置生成批注，下拉框等</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@RestController</span><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/user"</span><span class="token punctuation">)</span><span class="token annotation punctuation">@Slf4j</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserController</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Autowired</span>    <span class="token keyword">private</span> <span class="token class-name">UserService</span> userService<span class="token punctuation">;</span>        <span class="token annotation punctuation">@PostMapping</span><span class="token punctuation">(</span><span class="token string">"/excel"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">export</span><span class="token punctuation">(</span><span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> users <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>userService<span class="token punctuation">.</span><span class="token function">findAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">ExcelKit</span><span class="token punctuation">.</span>$<span class="token class-name">Export</span><span class="token punctuation">(</span><span class="token class-name">User</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">downXlsx</span><span class="token punctuation">(</span>users<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h4 id="下载-HEML"><a href="#下载-HEML" class="headerlink" title="下载 HEML"></a>下载 HEML</h4><pre class="language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>downExcel<span class="token punctuation">"</span></span> <span class="token attr-name">icon</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>el-icon-download<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>导出<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-button</span><span class="token punctuation">&gt;</span></span></code></pre><h4 id="下载-Script"><a href="#下载-Script" class="headerlink" title="下载 Script"></a>下载 Script</h4><pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token function">downExcel</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">var</span> $<span class="token keyword">this</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>    <span class="token keyword">const</span> res <span class="token operator">=</span> axios    <span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">{</span>        url<span class="token operator">:</span> <span class="token string">"/user/excel"</span><span class="token punctuation">,</span>        method<span class="token operator">:</span> <span class="token string">"post"</span><span class="token punctuation">,</span>        responseType<span class="token operator">:</span> <span class="token string">"blob"</span>    <span class="token punctuation">}</span><span class="token punctuation">)</span>    <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">.</span>headers<span class="token punctuation">[</span><span class="token string">"content-type"</span><span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token string">"application/json"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">return</span> $<span class="token keyword">this</span><span class="token punctuation">.</span>$message<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>                <span class="token string">"Subject does not have permission [user:export]"</span>            <span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">const</span> data <span class="token operator">=</span> res<span class="token punctuation">.</span>data<span class="token punctuation">;</span>        <span class="token keyword">let</span> url <span class="token operator">=</span> window<span class="token punctuation">.</span><span class="token constant">URL</span><span class="token punctuation">.</span><span class="token function">createObjectURL</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 将二进制文件转化为可访问的url</span>        <span class="token keyword">var</span> a <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">"a"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>        a<span class="token punctuation">.</span>href <span class="token operator">=</span> url<span class="token punctuation">;</span>        a<span class="token punctuation">.</span>download <span class="token operator">=</span> <span class="token string">"用户列表.xls"</span><span class="token punctuation">;</span>        a<span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        window<span class="token punctuation">.</span><span class="token constant">URL</span><span class="token punctuation">.</span><span class="token function">revokeObjectURL</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><h4 id="下载效果"><a href="#下载效果" class="headerlink" title="下载效果"></a>下载效果</h4><p>下载文件：</p><p><img src="/images/2020/11/image-20201124114137155.png" alt="image-20201124114137155" loading="lazy"></p><p>打开效果：</p><p><img src="/images/2020/11/image-20201124114254144.png" alt="image-20201124114254144" loading="lazy"></p>]]></content>
    
    
    <summary type="html">&lt;h3 id=&quot;ExcelKit-介绍&quot;&gt;&lt;a href=&quot;#ExcelKit-介绍&quot; class=&quot;headerlink&quot; title=&quot;ExcelKit 介绍&quot;&gt;&lt;/a&gt;ExcelKit 介绍&lt;/h3&gt;&lt;p&gt;ExcelKit 是简单、好用且轻量级的海量 Excel 文件导入导出解决方案。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;GitHub：&lt;a href=&quot;https://github.com/wenzewoo/ExcelKit&quot;&gt;https://github.com/wenzewoo/ExcelKit&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Gitee：&lt;a href=&quot;https://gitee.com/wuwenze/ExcelKit/&quot;&gt;https://gitee.com/wuwenze/ExcelKit/&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</summary>
    
    
    
    <category term="Java" scheme="https://jueee.github.io/categories/Java/"/>
    
    <category term="JavaJar" scheme="https://jueee.github.io/categories/Java/JavaJar/"/>
    
    
    <category term="Java" scheme="https://jueee.github.io/tags/Java/"/>
    
    <category term="JavaJar" scheme="https://jueee.github.io/tags/JavaJar/"/>
    
    <category term="Excel" scheme="https://jueee.github.io/tags/Excel/"/>
    
  </entry>
  
  <entry>
    <title>Shell 中 kill 掉指定名称的进程</title>
    <link href="https://jueee.github.io/2020/11/2020-11-24-Shell%E4%B8%ADkill%E6%8E%89%E6%8C%87%E5%AE%9A%E5%90%8D%E7%A7%B0%E7%9A%84%E8%BF%9B%E7%A8%8B/"/>
    <id>https://jueee.github.io/2020/11/2020-11-24-Shell%E4%B8%ADkill%E6%8E%89%E6%8C%87%E5%AE%9A%E5%90%8D%E7%A7%B0%E7%9A%84%E8%BF%9B%E7%A8%8B/</id>
    <published>2020-11-24T00:00:00.000Z</published>
    <updated>2020-11-24T03:43:50.192Z</updated>
    
    <content type="html"><![CDATA[<p>在 Linux 开发中我们时常会遇到对于之前进程 kill 掉，然后再运行当前进程或程序的情况，此时我们是不知道需要 kill 的进程号的，那么就需要通过一个 shell 命令组合来实现这个需求。</p><a id="more"></a><h3 id="实现方法"><a href="#实现方法" class="headerlink" title="实现方法"></a>实现方法</h3><p>如下命令可以实现：</p><pre class="language-shell" data-language="shell"><code class="language-shell">ps a | grep -w nameprocess | grep -v grep| cut -c 1-5 | xargs kill -9</code></pre><p>说明：</p><ul><li>管道符 “|” 用来隔开两个命令，管道符左边命令的输出会作为管道符右边命令的输入。 </li><li>“ps a” 是查看所有进程的命令。这时检索出的进程将作为下一条命令 “grep“的输入，注意要结束其它程序时，请将上面命令中的 nameprocess 替换成其它程序名，-w 'nameprocess' 强制 PATTERN 仅完全匹配字词。</li><li>“grep -v grep” 是在列出的进程中去除含有关键字 “grep” 的进程。</li><li>“cut -c 1-5” 是截取输入行的第 1 个字符到第 5 个字符，而这正好是进程号 PID，或者根据自己实际的情况可以调整字符的截取位置。</li><li>“xargs kill -9” 中的 xargs 命令是用来把前面命令的输出结果（PID）作为 “kill -9” 命令的参数，并执行该命令。</li><li>“kill -9” 会强行杀掉指定进程，这样就成功清除了同名进程。</li></ul><h3 id="其他方法"><a href="#其他方法" class="headerlink" title="其他方法"></a>其他方法</h3><pre class="language-shell" data-language="shell"><code class="language-shell">ps axu|grep nameprocess | awk '{print "kill -9 "}'</code></pre>]]></content>
    
    
    <summary type="html">&lt;p&gt;在 Linux 开发中我们时常会遇到对于之前进程 kill 掉，然后再运行当前进程或程序的情况，此时我们是不知道需要 kill 的进程号的，那么就需要通过一个 shell 命令组合来实现这个需求。&lt;/p&gt;</summary>
    
    
    
    <category term="Linux" scheme="https://jueee.github.io/categories/Linux/"/>
    
    <category term="Shell" scheme="https://jueee.github.io/categories/Linux/Shell/"/>
    
    
    <category term="Linux" scheme="https://jueee.github.io/tags/Linux/"/>
    
    <category term="Shell" scheme="https://jueee.github.io/tags/Shell/"/>
    
  </entry>
  
  <entry>
    <title>安装 debian 无法启动的解决办法</title>
    <link href="https://jueee.github.io/2020/11/2020-11-19-%E5%AE%89%E8%A3%85debian%E6%97%A0%E6%B3%95%E5%90%AF%E5%8A%A8%E7%9A%84%E8%A7%A3%E5%86%B3%E5%8A%9E%E6%B3%95/"/>
    <id>https://jueee.github.io/2020/11/2020-11-19-%E5%AE%89%E8%A3%85debian%E6%97%A0%E6%B3%95%E5%90%AF%E5%8A%A8%E7%9A%84%E8%A7%A3%E5%86%B3%E5%8A%9E%E6%B3%95/</id>
    <published>2020-11-24T00:00:00.000Z</published>
    <updated>2020-11-24T11:23:15.031Z</updated>
    
    <content type="html"><![CDATA[<p>安装了几次 debian，一直无法启动。一直闪烁光标。后来发现是默认的问题。</p><a id="more"></a><h3 id="Debian-安装"><a href="#Debian-安装" class="headerlink" title="Debian 安装"></a>Debian 安装</h3><p>关键在于最后的 GRUB 的选择。如下图：</p><p><img src="/images/2020/11/image-20201124185648813.png" alt="image-20201124185648813" loading="lazy"></p><p><img src="/images/2020/11/image-20201124185711361.png" alt="image-20201124185711361" loading="lazy"></p><h3 id="Debian-发行版本"><a href="#Debian-发行版本" class="headerlink" title="Debian 发行版本"></a>Debian 发行版本</h3><ul><li><span class="exturl" data-url="aHR0cHM6Ly93d3cuZGViaWFuLm9yZy9yZWxlYXNlcy8=">https://www.debian.org/releases/<i class="fa fa-external-link-alt"></i></span></li></ul><h3 id="Debian-官网下载"><a href="#Debian-官网下载" class="headerlink" title="Debian 官网下载"></a>Debian 官网下载</h3><ul><li>Debian 5（lenny）：<span class="exturl" data-url="aHR0cHM6Ly93d3cuZGViaWFuLm9yZy9yZWxlYXNlcy9sZW5ueS9kZWJpYW4taW5zdGFsbGVyLw==">https://www.debian.org/releases/lenny/debian-installer/<i class="fa fa-external-link-alt"></i></span></li><li>Debian 6（squeeze）：<span class="exturl" data-url="aHR0cHM6Ly93d3cuZGViaWFuLm9yZy9yZWxlYXNlcy9zcXVlZXplL2RlYmlhbi1pbnN0YWxsZXIv">https://www.debian.org/releases/squeeze/debian-installer/<i class="fa fa-external-link-alt"></i></span></li><li>Debian 7（wheezy）：<span class="exturl" data-url="aHR0cHM6Ly93d3cuZGViaWFuLm9yZy9yZWxlYXNlcy93aGVlenkvZGViaWFuLWluc3RhbGxlci8=">https://www.debian.org/releases/wheezy/debian-installer/<i class="fa fa-external-link-alt"></i></span></li><li>Debian 8（jessie）：<span class="exturl" data-url="aHR0cHM6Ly93d3cuZGViaWFuLm9yZy9yZWxlYXNlcy9qZXNzaWUvZGViaWFuLWluc3RhbGxlci8=">https://www.debian.org/releases/jessie/debian-installer/<i class="fa fa-external-link-alt"></i></span></li><li>Debian 9（stretch）：<span class="exturl" data-url="aHR0cHM6Ly93d3cuZGViaWFuLm9yZy9yZWxlYXNlcy9zdHJldGNoL2RlYmlhbi1pbnN0YWxsZXIv">https://www.debian.org/releases/stretch/debian-installer/<i class="fa fa-external-link-alt"></i></span></li><li>Debian 10（buster）：<span class="exturl" data-url="aHR0cHM6Ly93d3cuZGViaWFuLm9yZy9yZWxlYXNlcy9idXN0ZXIvZGViaWFuLWluc3RhbGxlci8=">https://www.debian.org/releases/buster/debian-installer/<i class="fa fa-external-link-alt"></i></span></li></ul>]]></content>
    
    
    <summary type="html">&lt;p&gt;安装了几次 debian，一直无法启动。一直闪烁光标。后来发现是默认的问题。&lt;/p&gt;</summary>
    
    
    
    <category term="Linux" scheme="https://jueee.github.io/categories/Linux/"/>
    
    
    <category term="Linux" scheme="https://jueee.github.io/tags/Linux/"/>
    
  </entry>
  
  <entry>
    <title>Docker 使用 Supervisor 来管理进程</title>
    <link href="https://jueee.github.io/2020/11/2020-11-23-Docker%E4%BD%BF%E7%94%A8Supervisor%E6%9D%A5%E7%AE%A1%E7%90%86%E8%BF%9B%E7%A8%8B/"/>
    <id>https://jueee.github.io/2020/11/2020-11-23-Docker%E4%BD%BF%E7%94%A8Supervisor%E6%9D%A5%E7%AE%A1%E7%90%86%E8%BF%9B%E7%A8%8B/</id>
    <published>2020-11-23T00:00:00.000Z</published>
    <updated>2020-11-23T06:08:49.616Z</updated>
    
    <content type="html"><![CDATA[<p><strong>Docker</strong> 容器在启动的时候开启单个进程。但我们经常需要在一个机器上开启多个服务，这可以有很多方法，最简单的就是把多个启动命令放到一个启动脚本里面，启动的时候直接启动这个脚本，另外就是安装进程管理工具。</p><p>本小节将使用进程管理工具 supervisor 来管理容器中的多个进程。使用 Supervisor 可以更好的控制、管理、重启我们希望运行的进程。</p><a id="more"></a><h3 id="配置方法"><a href="#配置方法" class="headerlink" title="配置方法"></a>配置方法</h3><h4 id="Dockerfile-配置"><a href="#Dockerfile-配置" class="headerlink" title="Dockerfile 配置"></a>Dockerfile 配置</h4><p>执行 apt 安装时注意加入 <code>-y --no-install-recommends</code>，并且在安装完成后执行 <code>rm -rf /var/lib/apt/lists/* &amp;&amp; apt-get clean</code> 命令，可以有效减小镜像的体积。</p><pre class="language-dockerfile" data-language="dockerfile"><code class="language-dockerfile">COPY sources.list /etc/apt/RUN apt-get update &amp;&amp; \    apt-get install -y --no-install-recommends \    cron supervisor &amp;&amp; \    rm -rf /var/lib/apt/lists/* &amp;&amp; \    apt-get cleanCOPY run-cron /etc/cron.d/run-cronRUN chmod 0644 /etc/cron.d/run-cronRUN crontab /etc/cron.d/run-cronCOPY supervisord.conf /etc/supervisor/conf.d/supervisord.confCMD ["/usr/bin/supervisord"]</code></pre><p>其中，run-cron 文件内容如下：</p><pre class="language-none"><code class="language-none">PATH="/usr/local/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin"* * * * * echo `date` &gt;&gt; /tmp/crontab-date* * * * * /java-app-dir/healthCheck.sh</code></pre><p>这样安装完 cron 服务后，crontab 服务并不会自启动，还需要 <code>/etc/init.d/cron start</code> 的启动命令。</p><pre class="language-none"><code class="language-none"># 保存环境变量，开启crontab服务env &gt;&gt; /etc/default/locale/etc/init.d/cron start</code></pre><p><code>/etc/init.d/cron start</code> 用于启动 crontab 服务，但这样启动的 crontab 服务中配置的定时命令是没有 Dockerfile 中设置的环境变量的。</p><p>因此还需要在这之前执行 <code>env &gt;&gt; /etc/default/locale</code>，这样有 Dockerfile 中通过 <code>ENV</code> 设置的环境变量在 crontab 中就可以正常读取了。</p><h4 id="supervisor配置"><a href="#supervisor配置" class="headerlink" title="supervisor配置"></a>supervisor 配置</h4><p>supervisor 配置文件内容</p><pre class="language-ini" data-language="ini"><code class="language-ini"><span class="token selector">[supervisord]</span><span class="token constant">nodaemon</span><span class="token attr-value"><span class="token punctuation">=</span>true</span><span class="token selector">[program:cron]</span><span class="token constant">command</span><span class="token attr-value"><span class="token punctuation">=</span>/etc/init.d/cron start</span><span class="token selector">[program:javaapp]</span><span class="token constant">command</span><span class="token attr-value"><span class="token punctuation">=</span>/bin/bash -c "/java-app-dir/appCtrl.sh start &amp;&amp; tail -f /dev/null"</span></code></pre><p>配置文件包含目录和进程：</p><ul><li>第一段 supervsord 配置软件本身，使用 nodaemon 参数来运行。</li><li>第二段包含要控制的 2 个服务。每一段包含一个服务的目录和启动这个服务的命令。</li></ul><h3 id="使用方法"><a href="#使用方法" class="headerlink" title="使用方法"></a>使用方法</h3><p>创建镜像。</p><pre class="language-shell" data-language="shell"><code class="language-shell">$ <span class="token function">sudo</span> docker build -t test/supervisord <span class="token builtin class-name">.</span></code></pre><p>启动 supervisor 容器。</p><pre class="language-shell" data-language="shell"><code class="language-shell">$ <span class="token function">sudo</span> docker run -t -i test/supervisords<span class="token number">2020</span>-11-23 <span class="token number">13</span>:48:53,271 INFO Included extra <span class="token function">file</span> <span class="token string">"/etc/supervisor/conf.d/supervisord.conf"</span> during parsing<span class="token number">2020</span>-11-23 <span class="token number">13</span>:48:53,282 INFO RPC interface <span class="token string">'supervisor'</span> initialized<span class="token number">2020</span>-11-23 <span class="token number">13</span>:48:53,282 CRIT Server <span class="token string">'unix_http_server'</span> running without any HTTP authentication checking<span class="token number">2020</span>-11-23 <span class="token number">13</span>:48:53,282 INFO supervisord started with pid <span class="token number">1</span><span class="token number">2020</span>-11-23 <span class="token number">13</span>:48:54,284 INFO spawned: <span class="token string">'cron'</span> with pid <span class="token number">8</span><span class="token number">2020</span>-11-23 <span class="token number">13</span>:48:54,286 INFO spawned: <span class="token string">'javaapp'</span> with pid <span class="token number">9</span></code></pre>]]></content>
    
    
    <summary type="html">&lt;p&gt;&lt;strong&gt;Docker&lt;/strong&gt; 容器在启动的时候开启单个进程。但我们经常需要在一个机器上开启多个服务，这可以有很多方法，最简单的就是把多个启动命令放到一个启动脚本里面，启动的时候直接启动这个脚本，另外就是安装进程管理工具。&lt;/p&gt;
&lt;p&gt;本小节将使用进程管理工具 supervisor 来管理容器中的多个进程。使用 Supervisor 可以更好的控制、管理、重启我们希望运行的进程。&lt;/p&gt;</summary>
    
    
    
    <category term="Docker" scheme="https://jueee.github.io/categories/Docker/"/>
    
    
    <category term="Docker" scheme="https://jueee.github.io/tags/Docker/"/>
    
    <category term="Supervisor" scheme="https://jueee.github.io/tags/Supervisor/"/>
    
  </entry>
  
  <entry>
    <title>Debian 下配置网络的方法</title>
    <link href="https://jueee.github.io/2020/11/2020-11-20-Debian%E4%B8%8B%E9%85%8D%E7%BD%AE%E7%BD%91%E7%BB%9C%E7%9A%84%E6%96%B9%E6%B3%95/"/>
    <id>https://jueee.github.io/2020/11/2020-11-20-Debian%E4%B8%8B%E9%85%8D%E7%BD%AE%E7%BD%91%E7%BB%9C%E7%9A%84%E6%96%B9%E6%B3%95/</id>
    <published>2020-11-20T00:00:00.000Z</published>
    <updated>2020-11-23T08:40:14.241Z</updated>
    
    <content type="html"><![CDATA[<h3 id="网络配置"><a href="#网络配置" class="headerlink" title="网络配置"></a>网络配置</h3><h4 id="配置网卡"><a href="#配置网卡" class="headerlink" title="配置网卡"></a>配置网卡</h4><p>修改 /etc/network/interfaces 添加如下</p><pre class="language-none"><code class="language-none"># #号后面是备注，不要添加哦！ auto eth0 #开机自动激活iface eth0 inte static #静态IPaddress 192.168.0.56 #本机IPnetmask 255.255.255.0 #子网掩码gateway 192.168.0.254 #路由网关 #因为我是通过路由上网的，所以配置为静态IP和网关</code></pre><p>如果是用 DHCP 自动获取，请在配置文件里添加如下：</p><pre class="language-none"><code class="language-none">iface eth0 inet dhcp</code></pre><h4 id="设置DNS"><a href="#设置DNS" class="headerlink" title="设置DNS"></a>设置 DNS</h4><pre class="language-none"><code class="language-none">echo "nameserver 202.96.128.86" &gt;&gt; /etc/resolv.conf#请设置为你当地的DNS</code></pre><p>到这里配置好以后，重启一下网络。</p><h4 id="重启网络"><a href="#重启网络" class="headerlink" title="重启网络"></a>重启网络</h4><pre class="language-none"><code class="language-none">/etc/init.d/networking restart</code></pre><h3 id="网卡配置"><a href="#网卡配置" class="headerlink" title="网卡配置"></a>网卡配置</h3><p><strong>ifup 命令</strong> 用于激活指定的网络接口。</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># 启动网卡eth1</span><span class="token function">ifup</span> eth1</code></pre><p><strong>ifdown 命令</strong> 用于禁用指定的网络接口。</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># 停止网卡eth1</span><span class="token function">ifdown</span> eth1</code></pre><h3 id="问题处理"><a href="#问题处理" class="headerlink" title="问题处理"></a>问题处理</h3><p>问题描述：</p><p>配置完 /etc/networking/interfaces 后，使用 /etc/init.d/networking restart 出现启动失败，根据提示输入 systemctl status networking.service 发现不认识 /etc/networking/interfaces 中配置的虚拟网卡 (或者是因为虚拟机的重新移动导致的设备不匹配问题等)</p><p>解决方法：</p><p>首先可以查看 etc/udev/rules.d/70-persistent-net.rules 是否存在，如果存在，则删除 rm etc/udev/rules.d/70-persistent-net.rules，重启即可</p><p>如果 etc/udev/rules.d/70-persistent-net.rules 不存在，则 ifconfig -a 查看全部网卡，修改 /etc/networking/interfaces 中的网卡名和 ifconfig -a 命令显示的网卡名匹配，重启网络即可。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h3 id=&quot;网络配置&quot;&gt;&lt;a href=&quot;#网络配置&quot; class=&quot;headerlink&quot; title=&quot;网络配置&quot;&gt;&lt;/a&gt;网络配置&lt;/h3&gt;&lt;h4 id=&quot;配置网卡&quot;&gt;&lt;a href=&quot;#配置网卡&quot; class=&quot;headerlink&quot; title=&quot;配置网卡&quot;&gt;&lt;/a</summary>
      
    
    
    
    <category term="Linux" scheme="https://jueee.github.io/categories/Linux/"/>
    
    
    <category term="Linux" scheme="https://jueee.github.io/tags/Linux/"/>
    
  </entry>
  
  <entry>
    <title>MyBatis 分页插件 PageHelper</title>
    <link href="https://jueee.github.io/2020/11/2020-11-18-MyBatis%E5%88%86%E9%A1%B5%E6%8F%92%E4%BB%B6PageHelper/"/>
    <id>https://jueee.github.io/2020/11/2020-11-18-MyBatis%E5%88%86%E9%A1%B5%E6%8F%92%E4%BB%B6PageHelper/</id>
    <published>2020-11-18T00:00:00.000Z</published>
    <updated>2020-11-18T09:29:12.854Z</updated>
    
    <content type="html"><![CDATA[<h3 id="PageHelper-介绍"><a href="#PageHelper-介绍" class="headerlink" title="PageHelper 介绍"></a>PageHelper 介绍</h3><p>PageHelper 是 Github 上开源的 MyBatis 分页插件，使用起来非常的简单，方便，并且支持任何复杂的单表、多表分页。</p><ul><li>官网：<span class="exturl" data-url="aHR0cHM6Ly9wYWdlaGVscGVyLmdpdGh1Yi5pby8=">https://pagehelper.github.io/<i class="fa fa-external-link-alt"></i></span></li><li> 文档：<span class="exturl" data-url="aHR0cHM6Ly9wYWdlaGVscGVyLmdpdGh1Yi5pby9kb2NzL2hvd3RvdXNlLw==">https://pagehelper.github.io/docs/howtouse/<i class="fa fa-external-link-alt"></i></span></li></ul><a id="more"></a><h4 id="普通-maven"><a href="#普通-maven" class="headerlink" title="普通 maven"></a>普通 maven</h4><ul><li>GitHub：<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL3BhZ2VoZWxwZXIvTXliYXRpcy1QYWdlSGVscGVy">https://github.com/pagehelper/Mybatis-PageHelper<i class="fa fa-external-link-alt"></i></span></li><li>Gitee：<span class="exturl" data-url="aHR0cHM6Ly9naXRlZS5jb20vZnJlZS9NeWJhdGlzX1BhZ2VIZWxwZXI=">https://gitee.com/free/Mybatis_PageHelper<i class="fa fa-external-link-alt"></i></span></li></ul><p>引入 PageHelper </p><pre class="language-xml" data-language="xml"><code class="language-xml"><span class="token comment">&lt;!-- https://mvnrepository.com/artifact/com.github.pagehelper/pagehelper --&gt;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.github.pagehelper<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>pagehelper<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>5.2.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span></code></pre><h4 id="Springboot"><a href="#Springboot" class="headerlink" title="Springboot"></a>Springboot</h4><ul><li>GitHub：<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL3BhZ2VoZWxwZXIvcGFnZWhlbHBlci1zcHJpbmctYm9vdA==">https://github.com/pagehelper/pagehelper-spring-boot<i class="fa fa-external-link-alt"></i></span></li></ul><p>引入 PageHelper </p><pre class="language-xml" data-language="xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.github.pagehelper<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>pagehelper-spring-boot-starter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.3.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span></code></pre><h3 id="类说明"><a href="#类说明" class="headerlink" title="类说明"></a>类说明</h3><p><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL3BhZ2VoZWxwZXIvTXliYXRpcy1QYWdlSGVscGVyL2Jsb2IvbWFzdGVyL3NyYy9tYWluL2phdmEvY29tL2dpdGh1Yi9wYWdlaGVscGVyL1BhZ2VJbmZvLmphdmE=">com.github.pagehelper.PageInfo<i class="fa fa-external-link-alt"></i></span> 类的常用属性：</p><ul><li>pageNum：当前为第几页</li><li> pageSize：每页的数据行数</li><li> startRow：当前页数据从第几条开始</li><li> endRow：当前页数据从第几条结束</li><li> pages：总页数</li><li> prePage：上一页页数</li><li> nextPage：下一页页数</li><li> isFirstPage：是否第一页</li><li> isLastPage：是否最后一页</li><li> hasPreviousPage：是否有上一页</li><li> hasNextPage：是否有下一页</li><li> navigatePages：导航页码数</li><li> navigatepageNums：所有页码的数组</li><li> navigateFirstPage：导航条上的第一页</li><li> navigateLastPage：导航条上的最后一页</li></ul><p>示例如下：</p><p><img src="/images/2020/11/image-20201118172445823.png" alt="image-20201118172445823" loading="lazy"></p><h3 id="调用方式"><a href="#调用方式" class="headerlink" title="调用方式"></a>调用方式</h3><pre class="language-java" data-language="java"><code class="language-java"><span class="token comment">//第一种，RowBounds方式的调用</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Country</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> sqlSession<span class="token punctuation">.</span><span class="token function">selectList</span><span class="token punctuation">(</span><span class="token string">"x.y.selectIf"</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">RowBounds</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//第二种，Mapper接口方式的调用，推荐这种使用方式。</span><span class="token class-name">PageHelper</span><span class="token punctuation">.</span><span class="token function">startPage</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Country</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> countryMapper<span class="token punctuation">.</span><span class="token function">selectIf</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//第三种，Mapper接口方式的调用，推荐这种使用方式。</span><span class="token class-name">PageHelper</span><span class="token punctuation">.</span><span class="token function">offsetPage</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Country</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> countryMapper<span class="token punctuation">.</span><span class="token function">selectIf</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//第四种，参数方法调用</span><span class="token comment">//存在以下 Mapper 接口方法，你不需要在 xml 处理后两个参数</span><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">CountryMapper</span> <span class="token punctuation">{</span>    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Country</span><span class="token punctuation">&gt;</span></span> <span class="token function">selectByPageNumSize</span><span class="token punctuation">(</span>            <span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token string">"user"</span><span class="token punctuation">)</span> <span class="token class-name">User</span> user<span class="token punctuation">,</span>            <span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token string">"pageNum"</span><span class="token punctuation">)</span> <span class="token keyword">int</span> pageNum<span class="token punctuation">,</span>            <span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token string">"pageSize"</span><span class="token punctuation">)</span> <span class="token keyword">int</span> pageSize<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token comment">//配置supportMethodsArguments=true</span><span class="token comment">//在代码中直接调用：</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Country</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> countryMapper<span class="token punctuation">.</span><span class="token function">selectByPageNumSize</span><span class="token punctuation">(</span>user<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//第五种，参数对象</span><span class="token comment">//如果 pageNum 和 pageSize 存在于 User 对象中，只要参数有值，也会被分页</span><span class="token comment">//有如下 User 对象</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>    <span class="token comment">//其他fields</span>    <span class="token comment">//下面两个参数名和 params 配置的名字一致</span>    <span class="token keyword">private</span> <span class="token class-name">Integer</span> pageNum<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">Integer</span> pageSize<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token comment">//存在以下 Mapper 接口方法，你不需要在 xml 处理后两个参数</span><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">CountryMapper</span> <span class="token punctuation">{</span>    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Country</span><span class="token punctuation">&gt;</span></span> <span class="token function">selectByPageNumSize</span><span class="token punctuation">(</span><span class="token class-name">User</span> user<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token comment">//当 user 中的 pageNum!= null &amp;&amp; pageSize!= null 时，会自动分页</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Country</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> countryMapper<span class="token punctuation">.</span><span class="token function">selectByPageNumSize</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//第六种，ISelect 接口方式</span><span class="token comment">//jdk6,7用法，创建接口</span><span class="token class-name">Page</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Country</span><span class="token punctuation">&gt;</span></span> page <span class="token operator">=</span> <span class="token class-name">PageHelper</span><span class="token punctuation">.</span><span class="token function">startPage</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">doSelectPage</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ISelect</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">doSelect</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        countryMapper<span class="token punctuation">.</span><span class="token function">selectGroupBy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//jdk8 lambda用法</span><span class="token class-name">Page</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Country</span><span class="token punctuation">&gt;</span></span> page <span class="token operator">=</span> <span class="token class-name">PageHelper</span><span class="token punctuation">.</span><span class="token function">startPage</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">doSelectPage</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span> countryMapper<span class="token punctuation">.</span><span class="token function">selectGroupBy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//也可以直接返回PageInfo，注意doSelectPageInfo方法和doSelectPage</span>pageInfo <span class="token operator">=</span> <span class="token class-name">PageHelper</span><span class="token punctuation">.</span><span class="token function">startPage</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">doSelectPageInfo</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ISelect</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">doSelect</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        countryMapper<span class="token punctuation">.</span><span class="token function">selectGroupBy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//对应的lambda用法</span>pageInfo <span class="token operator">=</span> <span class="token class-name">PageHelper</span><span class="token punctuation">.</span><span class="token function">startPage</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">doSelectPageInfo</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> countryMapper<span class="token punctuation">.</span><span class="token function">selectGroupBy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//count查询，返回一个查询语句的count数</span><span class="token keyword">long</span> total <span class="token operator">=</span> <span class="token class-name">PageHelper</span><span class="token punctuation">.</span><span class="token function">count</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ISelect</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">doSelect</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        countryMapper<span class="token punctuation">.</span><span class="token function">selectLike</span><span class="token punctuation">(</span>country<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//lambda</span>total <span class="token operator">=</span> <span class="token class-name">PageHelper</span><span class="token punctuation">.</span><span class="token function">count</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span>countryMapper<span class="token punctuation">.</span><span class="token function">selectLike</span><span class="token punctuation">(</span>country<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h3 id="代码示例"><a href="#代码示例" class="headerlink" title="代码示例"></a>代码示例</h3><p>简单分页</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token comment">// 获取第pageNum页，pageSize条内容</span><span class="token class-name">PageHelper</span><span class="token punctuation">.</span><span class="token function">startPage</span><span class="token punctuation">(</span>pageNum<span class="token punctuation">,</span>pageSize<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 条件查询相关</span><span class="token class-name">Example</span> o <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Example</span><span class="token punctuation">(</span><span class="token class-name">User</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">Example</span><span class="token punctuation">.</span><span class="token class-name">Criteria</span> criteria <span class="token operator">=</span> o<span class="token punctuation">.</span><span class="token function">createCriteria</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>o<span class="token punctuation">.</span><span class="token function">setOrderByClause</span><span class="token punctuation">(</span><span class="token string">"id desc"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token class-name">StringUtils</span><span class="token punctuation">.</span><span class="token function">isNoneBlank</span><span class="token punctuation">(</span>userVO<span class="token punctuation">.</span><span class="token function">getUsername</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    criteria<span class="token punctuation">.</span><span class="token function">andLike</span><span class="token punctuation">(</span><span class="token string">"username"</span><span class="token punctuation">,</span><span class="token string">"%"</span><span class="token operator">+</span>userVO<span class="token punctuation">.</span><span class="token function">getUsername</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">"%"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token comment">// 紧跟着的第一个select方法会被分页</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> userList <span class="token operator">=</span> userMapper<span class="token punctuation">.</span><span class="token function">selectAll</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//分页时，实际返回的结果list类型是Page&lt;E&gt;</span><span class="token class-name">PageInfo</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> info<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">PageInfo</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>userList<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><div class="note info"><p> <strong>重要提示</strong></p><p>只有紧跟在 <code>PageHelper.startPage</code> 方法后的 <strong>第一个</strong> Mybatis 的 <strong>查询（Select）</strong>方法会被分页。</p></div>]]></content>
    
    
    <summary type="html">&lt;h3 id=&quot;PageHelper-介绍&quot;&gt;&lt;a href=&quot;#PageHelper-介绍&quot; class=&quot;headerlink&quot; title=&quot;PageHelper 介绍&quot;&gt;&lt;/a&gt;PageHelper 介绍&lt;/h3&gt;&lt;p&gt;PageHelper 是 Github 上开源的 MyBatis 分页插件，使用起来非常的简单，方便，并且支持任何复杂的单表、多表分页。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;官网：&lt;a href=&quot;https://pagehelper.github.io/&quot;&gt;https://pagehelper.github.io/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt; 文档：&lt;a href=&quot;https://pagehelper.github.io/docs/howtouse/&quot;&gt;https://pagehelper.github.io/docs/howtouse/&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</summary>
    
    
    
    <category term="Java" scheme="https://jueee.github.io/categories/Java/"/>
    
    <category term="JavaJar" scheme="https://jueee.github.io/categories/Java/JavaJar/"/>
    
    
    <category term="Java" scheme="https://jueee.github.io/tags/Java/"/>
    
    <category term="JavaJar" scheme="https://jueee.github.io/tags/JavaJar/"/>
    
    <category term="MyBatis" scheme="https://jueee.github.io/tags/MyBatis/"/>
    
  </entry>
  
  <entry>
    <title>在 Vue 中格式化表格中的时间</title>
    <link href="https://jueee.github.io/2020/11/2020-11-13-%E5%9C%A8Vue%E4%B8%AD%E6%A0%BC%E5%BC%8F%E5%8C%96%E8%A1%A8%E6%A0%BC%E4%B8%AD%E7%9A%84%E6%97%B6%E9%97%B4/"/>
    <id>https://jueee.github.io/2020/11/2020-11-13-%E5%9C%A8Vue%E4%B8%AD%E6%A0%BC%E5%BC%8F%E5%8C%96%E8%A1%A8%E6%A0%BC%E4%B8%AD%E7%9A%84%E6%97%B6%E9%97%B4/</id>
    <published>2020-11-13T00:00:00.000Z</published>
    <updated>2020-11-12T11:26:46.514Z</updated>
    
    <content type="html"><![CDATA[<h3 id="Vue-基础表格"><a href="#Vue-基础表格" class="headerlink" title="Vue 基础表格"></a>Vue 基础表格</h3><pre class="language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-table</span> <span class="token attr-name">:data</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>tableData<span class="token punctuation">"</span></span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token property">width</span><span class="token punctuation">:</span> 100%</span><span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-table-column</span> <span class="token attr-name">prop</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>date<span class="token punctuation">"</span></span> <span class="token attr-name">label</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>日期<span class="token punctuation">"</span></span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>180<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-table-column</span><span class="token punctuation">&gt;</span></span>   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-table-column</span> <span class="token attr-name">prop</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>name<span class="token punctuation">"</span></span> <span class="token attr-name">label</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>姓名<span class="token punctuation">"</span></span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>180<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-table-column</span><span class="token punctuation">&gt;</span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-table</span><span class="token punctuation">&gt;</span></span></code></pre><a id="more"></a><h3 id="定义过滤器"><a href="#定义过滤器" class="headerlink" title="定义过滤器"></a>定义过滤器</h3><h4 id="过滤器文件"><a href="#过滤器文件" class="headerlink" title="过滤器文件"></a>过滤器文件</h4><pre class="language-js" data-language="js"><code class="language-js"><span class="token comment">// filters/index.js</span><span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">formatDate</span><span class="token punctuation">(</span><span class="token parameter">date<span class="token punctuation">,</span> fmt</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    date <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span>date<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span><span class="token punctuation">(</span>fmt<span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">"undefined"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        fmt <span class="token operator">=</span> <span class="token string">"yyyy-MM-dd HH:mm:ss"</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token regex">/(y+)/</span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>fmt<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        fmt <span class="token operator">=</span> fmt<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>RegExp<span class="token punctuation">.</span>$<span class="token number">1</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>date<span class="token punctuation">.</span><span class="token function">getFullYear</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">substr</span><span class="token punctuation">(</span><span class="token number">4</span> <span class="token operator">-</span> RegExp<span class="token punctuation">.</span>$<span class="token number">1.</span>length<span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token punctuation">}</span>    <span class="token keyword">let</span> o <span class="token operator">=</span> <span class="token punctuation">{</span>        <span class="token string">'M+'</span><span class="token operator">:</span> date<span class="token punctuation">.</span><span class="token function">getMonth</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span>        <span class="token string">'d+'</span><span class="token operator">:</span> date<span class="token punctuation">.</span><span class="token function">getDate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>        <span class="token string">'H+'</span><span class="token operator">:</span> date<span class="token punctuation">.</span><span class="token function">getHours</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>        <span class="token string">'m+'</span><span class="token operator">:</span> date<span class="token punctuation">.</span><span class="token function">getMinutes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>        <span class="token string">'s+'</span><span class="token operator">:</span> date<span class="token punctuation">.</span><span class="token function">getSeconds</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token punctuation">}</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> k <span class="token keyword">in</span> o<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">(</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>k<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">)</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>fmt<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">let</span> str <span class="token operator">=</span> o<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token string">''</span>            fmt <span class="token operator">=</span> fmt<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>RegExp<span class="token punctuation">.</span>$<span class="token number">1</span><span class="token punctuation">,</span> RegExp<span class="token punctuation">.</span>$<span class="token number">1.</span>length <span class="token operator">===</span> <span class="token number">1</span> <span class="token operator">?</span> str <span class="token operator">:</span> <span class="token punctuation">(</span><span class="token string">'00'</span> <span class="token operator">+</span> str<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">substr</span><span class="token punctuation">(</span>str<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span> fmt<span class="token punctuation">}</span></code></pre><h4 id="全局注册"><a href="#全局注册" class="headerlink" title="全局注册"></a>全局注册</h4><p>在 main.js 中全局注册所有自定义的过滤器</p><pre class="language-js" data-language="js"><code class="language-js"><span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> filters <span class="token keyword">from</span> <span class="token string">'./filters'</span>Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>filters<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">key</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>  Vue<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> filters<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre><h3 id="使用过滤器的写法"><a href="#使用过滤器的写法" class="headerlink" title="使用过滤器的写法"></a>使用过滤器的写法</h3><p>默认格式</p><pre class="language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-table</span> <span class="token attr-name">:data</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>tableData<span class="token punctuation">"</span></span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token property">width</span><span class="token punctuation">:</span> 100%</span><span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-table-column</span> <span class="token attr-name">label</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>日期<span class="token punctuation">"</span></span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>180<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">slot-scope</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>scope<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>{{ scope.row.date | formatDate() }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-table-column</span><span class="token punctuation">&gt;</span></span>   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-table-column</span> <span class="token attr-name">prop</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>name<span class="token punctuation">"</span></span> <span class="token attr-name">label</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>姓名<span class="token punctuation">"</span></span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>180<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-table-column</span><span class="token punctuation">&gt;</span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-table</span><span class="token punctuation">&gt;</span></span></code></pre><p>把时间转换成 时：分: 秒 格式</p><pre class="language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-table</span> <span class="token attr-name">:data</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>tableData<span class="token punctuation">"</span></span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token property">width</span><span class="token punctuation">:</span> 100%</span><span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-table-column</span> <span class="token attr-name">label</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>日期<span class="token punctuation">"</span></span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>180<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">slot-scope</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>scope<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>{{ scope.row.date | formatDate('HH:mm:ss') }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-table-column</span><span class="token punctuation">&gt;</span></span>   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-table-column</span> <span class="token attr-name">prop</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>name<span class="token punctuation">"</span></span> <span class="token attr-name">label</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>姓名<span class="token punctuation">"</span></span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>180<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-table-column</span><span class="token punctuation">&gt;</span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-table</span><span class="token punctuation">&gt;</span></span></code></pre>]]></content>
    
    
    <summary type="html">&lt;h3 id=&quot;Vue-基础表格&quot;&gt;&lt;a href=&quot;#Vue-基础表格&quot; class=&quot;headerlink&quot; title=&quot;Vue 基础表格&quot;&gt;&lt;/a&gt;Vue 基础表格&lt;/h3&gt;&lt;pre class=&quot;language-html&quot; data-language=&quot;html&quot;&gt;&lt;code class=&quot;language-html&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;el-table&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;:data&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;tableData&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token style-attr language-css&quot;&gt;&lt;span class=&quot;token attr-name&quot;&gt; &lt;span class=&quot;token attr-name&quot;&gt;style&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&quot;&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token property&quot;&gt;width&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; 100%&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;
   &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;el-table-column&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;prop&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;date&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;label&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;日期&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;width&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;180&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;el-table-column&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;
   &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;el-table-column&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;prop&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;name&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;label&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;姓名&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;width&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;180&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;el-table-column&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;  
&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;el-table&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;</summary>
    
    
    
    <category term="Vue" scheme="https://jueee.github.io/categories/Vue/"/>
    
    
    <category term="Vue" scheme="https://jueee.github.io/tags/Vue/"/>
    
  </entry>
  
  <entry>
    <title>vue-admin-template 开启顶部导航</title>
    <link href="https://jueee.github.io/2020/11/2020-11-12-vue-admin-template%E5%BC%80%E5%90%AF%E9%A1%B6%E9%83%A8%E5%AF%BC%E8%88%AA/"/>
    <id>https://jueee.github.io/2020/11/2020-11-12-vue-admin-template%E5%BC%80%E5%90%AF%E9%A1%B6%E9%83%A8%E5%AF%BC%E8%88%AA/</id>
    <published>2020-11-12T00:00:00.000Z</published>
    <updated>2020-11-12T06:39:51.917Z</updated>
    
    <content type="html"><![CDATA[<p>vue-admin-template 默认没有开启 <span class="exturl" data-url="aHR0cHM6Ly9wYW5qaWFjaGVuLmdpdGVlLmlvL3Z1ZS1lbGVtZW50LWFkbWluLXNpdGUvemgvZ3VpZGUvZXNzZW50aWFscy90YWdzLXZpZXcuaHRtbA==">顶部导航<i class="fa fa-external-link-alt"></i></span>，可通过如下步骤进行开启。</p><a id="more"></a><h3 id="开启步骤"><a href="#开启步骤" class="headerlink" title="开启步骤"></a>开启步骤</h3><ol><li><p>复制 vue-element-admin 必要组件，到 template 对应的目录下。</p><p><code>@/layout/components/TagsView</code> 文件夹</p><p><code>@/store/modules/tagsView.js</code> 文件</p></li><li><p>添加标签<br>@/layout/components/AppMain.vue 添加：</p><pre class="language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>section</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>app-main<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>transition</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>fade-transform<span class="token punctuation">"</span></span> <span class="token attr-name">mode</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>out-in<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>keep-alive</span> <span class="token attr-name">:include</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>cachedViews<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>   <span class="token comment">&lt;!-- 新增  --&gt;</span>       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-view</span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>key<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>keep-alive</span><span class="token punctuation">&gt;</span></span>           <span class="token comment">&lt;!-- 新增 --&gt;</span>   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>transition</span><span class="token punctuation">&gt;</span></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>section</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span></code></pre></li><li><p>修改 @store/index.js</p><pre class="language-js" data-language="js"><code class="language-js"><span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">'vue'</span><span class="token keyword">import</span> Vuex <span class="token keyword">from</span> <span class="token string">'vuex'</span><span class="token keyword">import</span> getters <span class="token keyword">from</span> <span class="token string">'./getters'</span><span class="token keyword">import</span> app <span class="token keyword">from</span> <span class="token string">'./modules/app'</span><span class="token keyword">import</span> settings <span class="token keyword">from</span> <span class="token string">'./modules/settings'</span><span class="token keyword">import</span> user <span class="token keyword">from</span> <span class="token string">'./modules/user'</span><span class="token keyword">import</span> tagsView <span class="token keyword">from</span> <span class="token string">'./modules/tagsView'</span>  <span class="token comment">//新增</span>Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>Vuex<span class="token punctuation">)</span><span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vuex<span class="token punctuation">.</span>Store</span><span class="token punctuation">(</span><span class="token punctuation">{</span>  modules<span class="token operator">:</span> <span class="token punctuation">{</span>    app<span class="token punctuation">,</span>    settings<span class="token punctuation">,</span>    user<span class="token punctuation">,</span>    tagsView  <span class="token comment">//新增</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span>  getters<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token keyword">export</span> <span class="token keyword">default</span> store</code></pre></li><li><p>修改 /src/store/getters.js</p><pre class="language-js" data-language="js"><code class="language-js"><span class="token keyword">const</span> getters <span class="token operator">=</span> <span class="token punctuation">{</span>  <span class="token function-variable function">sidebar</span><span class="token operator">:</span> <span class="token parameter">state</span> <span class="token operator">=&gt;</span> state<span class="token punctuation">.</span>app<span class="token punctuation">.</span>sidebar<span class="token punctuation">,</span>  <span class="token function-variable function">device</span><span class="token operator">:</span> <span class="token parameter">state</span> <span class="token operator">=&gt;</span> state<span class="token punctuation">.</span>app<span class="token punctuation">.</span>device<span class="token punctuation">,</span>  <span class="token function-variable function">token</span><span class="token operator">:</span> <span class="token parameter">state</span> <span class="token operator">=&gt;</span> state<span class="token punctuation">.</span>user<span class="token punctuation">.</span>token<span class="token punctuation">,</span>  <span class="token function-variable function">avatar</span><span class="token operator">:</span> <span class="token parameter">state</span> <span class="token operator">=&gt;</span> state<span class="token punctuation">.</span>user<span class="token punctuation">.</span>avatar<span class="token punctuation">,</span>  <span class="token function-variable function">name</span><span class="token operator">:</span> <span class="token parameter">state</span> <span class="token operator">=&gt;</span> state<span class="token punctuation">.</span>user<span class="token punctuation">.</span>name<span class="token punctuation">,</span>  <span class="token function-variable function">visitedViews</span><span class="token operator">:</span> <span class="token parameter">state</span> <span class="token operator">=&gt;</span> state<span class="token punctuation">.</span>tagsView<span class="token punctuation">.</span>visitedViews<span class="token punctuation">,</span>  <span class="token comment">//新增</span>  <span class="token function-variable function">cachedViews</span><span class="token operator">:</span> <span class="token parameter">state</span> <span class="token operator">=&gt;</span> state<span class="token punctuation">.</span>tagsView<span class="token punctuation">.</span>cachedViews  <span class="token comment">//新增</span><span class="token punctuation">}</span><span class="token keyword">export</span> <span class="token keyword">default</span> getters</code></pre></li><li><p>修改 /src/layout/components/index.js</p><pre class="language-js" data-language="js"><code class="language-js"><span class="token keyword">export</span> <span class="token punctuation">{</span> <span class="token keyword">default</span> <span class="token keyword">as</span> Navbar <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./Navbar'</span><span class="token keyword">export</span> <span class="token punctuation">{</span> <span class="token keyword">default</span> <span class="token keyword">as</span> Sidebar <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./Sidebar'</span><span class="token keyword">export</span> <span class="token punctuation">{</span> <span class="token keyword">default</span> <span class="token keyword">as</span> AppMain <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./AppMain'</span><span class="token keyword">export</span> <span class="token punctuation">{</span> <span class="token keyword">default</span> <span class="token keyword">as</span> TagsView <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./TagsView/index.vue'</span>   <span class="token comment">//新增</span></code></pre></li><li><p>修改 /src/store/modules/setting.js</p><pre class="language-js" data-language="js"><code class="language-js"><span class="token keyword">const</span> <span class="token punctuation">{</span> showSettings<span class="token punctuation">,</span> tagsView<span class="token punctuation">,</span> fixedHeader<span class="token punctuation">,</span> sidebarLogo <span class="token punctuation">}</span> <span class="token operator">=</span> defaultSettings   <span class="token comment">//新增tagsView</span><span class="token keyword">const</span> state <span class="token operator">=</span> <span class="token punctuation">{</span>  tagsView<span class="token operator">:</span> tagsView<span class="token punctuation">,</span>   <span class="token comment">//新增</span>  showSettings<span class="token operator">:</span> showSettings<span class="token punctuation">,</span>  fixedHeader<span class="token operator">:</span> fixedHeader<span class="token punctuation">,</span>  sidebarLogo<span class="token operator">:</span> sidebarLogo<span class="token punctuation">}</span></code></pre></li><li><p>修改 /src/layout/index.vue</p><pre class="language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">:class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>classObj<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>app-wrapper<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>device===<span class="token punctuation">'</span>mobile<span class="token punctuation">'</span>&amp;&amp;sidebar.opened<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>drawer-bg<span class="token punctuation">"</span></span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>handleClickOutside<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>sidebar</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>sidebar-container<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>main-container<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">:class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>{<span class="token punctuation">'</span>fixed-header<span class="token punctuation">'</span>:fixedHeader}<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>navbar</span> <span class="token punctuation">/&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tags-view</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>needTagsView<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>   <span class="token comment">&lt;!-- 新增 --&gt;</span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>app-main</span> <span class="token punctuation">/&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript"><span class="token keyword">import</span> <span class="token punctuation">{</span> Navbar<span class="token punctuation">,</span> Sidebar<span class="token punctuation">,</span> AppMain <span class="token punctuation">,</span> TagsView<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./components'</span>   <span class="token comment">//新增 TagsView</span><span class="token keyword">import</span> ResizeMixin <span class="token keyword">from</span> <span class="token string">'./mixin/ResizeHandler'</span><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>  name<span class="token operator">:</span> <span class="token string">'Layout'</span><span class="token punctuation">,</span>  components<span class="token operator">:</span> <span class="token punctuation">{</span>    Navbar<span class="token punctuation">,</span>    Sidebar<span class="token punctuation">,</span>    AppMain<span class="token punctuation">,</span>    TagsView   <span class="token comment">//新增</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span>  mixins<span class="token operator">:</span> <span class="token punctuation">[</span>ResizeMixin<span class="token punctuation">]</span><span class="token punctuation">,</span>  computed<span class="token operator">:</span> <span class="token punctuation">{</span>    <span class="token function">sidebar</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$store<span class="token punctuation">.</span>state<span class="token punctuation">.</span>app<span class="token punctuation">.</span>sidebar    <span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token function">device</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$store<span class="token punctuation">.</span>state<span class="token punctuation">.</span>app<span class="token punctuation">.</span>device    <span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token function">fixedHeader</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$store<span class="token punctuation">.</span>state<span class="token punctuation">.</span>settings<span class="token punctuation">.</span>fixedHeader    <span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token function">needTagsView</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>   <span class="token comment">//新增</span>      <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$store<span class="token punctuation">.</span>state<span class="token punctuation">.</span>settings<span class="token punctuation">.</span>tagsView   <span class="token comment">//新增</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token function">classObj</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token keyword">return</span> <span class="token punctuation">{</span>        hideSidebar<span class="token operator">:</span> <span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>sidebar<span class="token punctuation">.</span>opened<span class="token punctuation">,</span>        openSidebar<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>sidebar<span class="token punctuation">.</span>opened<span class="token punctuation">,</span>        withoutAnimation<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>sidebar<span class="token punctuation">.</span>withoutAnimation<span class="token punctuation">,</span>        mobile<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>device <span class="token operator">===</span> <span class="token string">'mobile'</span>      <span class="token punctuation">}</span>    <span class="token punctuation">}</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span>  methods<span class="token operator">:</span> <span class="token punctuation">{</span>    <span class="token function">handleClickOutside</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token keyword">this</span><span class="token punctuation">.</span>$store<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token string">'app/closeSideBar'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> withoutAnimation<span class="token operator">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>    <span class="token punctuation">}</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span></code></pre></li><li><p>修改 /src/setting.js</p><pre class="language-js" data-language="js"><code class="language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>  title<span class="token operator">:</span> <span class="token string">'Vue Admin Template'</span><span class="token punctuation">,</span>  <span class="token comment">/**   * @type {boolean} true | false   * @description Whether fix the header   */</span>  fixedHeader<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>  <span class="token comment">/**   * @type {boolean} true | false   * @description Whether show the logo in sidebar   */</span>  sidebarLogo<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>  <span class="token comment">/**   * @type {boolean} true | false   * @description Whether need tagsView   */</span>  tagsView<span class="token operator">:</span> <span class="token boolean">true</span>   <span class="token comment">//新增</span><span class="token punctuation">}</span></code></pre></li></ol><p>此时，配置完成。效果如下：</p><p><img src="/images/2020/11/image-20201111152609312.png" alt="image-20201111152609312" loading="lazy">   </p><h3 id="控制台报错"><a href="#控制台报错" class="headerlink" title="控制台报错"></a>控制台报错</h3><p>按照如下操作后，控制台报错如下：</p><p><img src="/images/2020/11/image-20201111152702537.png" alt="image-20201111152702537" loading="lazy"></p><p>这是因为拷贝的 TagsView 组件默认开启了权限<br>/src/layout/components/TagsView/index.js</p><p>修改如下，即可解决报错。</p><p>   <img src="/images/2020/11/image-20201111152858682.png" alt="image-20201111152858682" loading="lazy"></p><h3 id="Affix-固钉"><a href="#Affix-固钉" class="headerlink" title="Affix 固钉"></a>Affix 固钉</h3><p>当在声明路由上 添加了 Affix 属性，则当前 <code>tag</code> 会被固定在 <code>tags-view</code> 中（不可被删除）。</p><p>修改文件：@src\router\index.js</p><p><img src="/images/2020/11/image-20201111153454783.png" alt="image-20201111153454783" loading="lazy"></p><p>效果如下：</p><p><img src="/images/2020/11/image-20201111153535548.png" alt="image-20201111153535548" loading="lazy">   </p>]]></content>
    
    
    <summary type="html">&lt;p&gt;vue-admin-template 默认没有开启 &lt;a href=&quot;https://panjiachen.gitee.io/vue-element-admin-site/zh/guide/essentials/tags-view.html&quot;&gt;顶部导航&lt;/a&gt;，可通过如下步骤进行开启。&lt;/p&gt;</summary>
    
    
    
    <category term="Vue" scheme="https://jueee.github.io/categories/Vue/"/>
    
    
    <category term="Vue" scheme="https://jueee.github.io/tags/Vue/"/>
    
    <category term="Element" scheme="https://jueee.github.io/tags/Element/"/>
    
  </entry>
  
  <entry>
    <title>RESTful 风格的 Web 服务框架 Swagger</title>
    <link href="https://jueee.github.io/2020/11/2020-11-11-RESTful%E9%A3%8E%E6%A0%BC%E7%9A%84Web%E6%9C%8D%E5%8A%A1%E6%A1%86%E6%9E%B6Swagger/"/>
    <id>https://jueee.github.io/2020/11/2020-11-11-RESTful%E9%A3%8E%E6%A0%BC%E7%9A%84Web%E6%9C%8D%E5%8A%A1%E6%A1%86%E6%9E%B6Swagger/</id>
    <published>2020-11-11T00:00:00.000Z</published>
    <updated>2020-11-11T07:40:06.623Z</updated>
    
    <content type="html"><![CDATA[<h3 id="Swagger-介绍"><a href="#Swagger-介绍" class="headerlink" title="Swagger 介绍"></a>Swagger 介绍</h3><p>Swagger 是一个规范和完整的框架，用于生成、描述、调用和可视化 RESTful 风格的 Web 服务。</p><p>总体目标是使客户端和文件系统作为服务器以同样的速度来更新。文件的方法、参数和模型紧密集成到服务器端的代码，允许 API 来始终保持同步。</p><ul><li>官网：<span class="exturl" data-url="aHR0cHM6Ly9zd2FnZ2VyLmlvLw==">https://swagger.io/<i class="fa fa-external-link-alt"></i></span></li><li>GitHub：<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL3N3YWdnZXItYXBp">https://github.com/swagger-api<i class="fa fa-external-link-alt"></i></span></li></ul><a id="more"></a><h4 id="Swagger-依赖"><a href="#Swagger-依赖" class="headerlink" title="Swagger 依赖"></a>Swagger 依赖</h4><pre class="language-xml" data-language="xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>io.springfox<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>springfox-swagger2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.6.1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>io.springfox<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>springfox-swagger-ui<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.6.1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span></code></pre><h3 id="Swagger-UI"><a href="#Swagger-UI" class="headerlink" title="Swagger UI"></a>Swagger UI</h3><p>添加依赖 <code>springfox-swagger-ui</code> 之后，该文档将在此处自动提供：</p><blockquote><p><span class="exturl" data-url="aHR0cDovL2xvY2FsaG9zdDo4MDgwL3N3YWdnZXItdWkuaHRtbA==">http://localhost:8080/swagger-ui.html<i class="fa fa-external-link-alt"></i></span></p></blockquote><p>Swagger 布局分为四部分：</p><ol><li><strong>API 分组</strong>：如果没有配置分组默认是 default。通过 Swagger 实例 Docket 的 <code>groupName()</code> 方法即可配置分组。</li><li><strong>基本描述</strong>：可以通过 Swagger 实例 Docket 的 <code>apiInfo()</code> 方法中的 ApiInfo 实例参数配置文档信息。</li><li><strong>请求接口列表</strong>：在组范围内，只要被 Swagger2 扫描匹配到的请求都会在这里出现。</li><li><strong>实体列表</strong>：只要实体在请求接口的返回值上（即使是泛型），都能映射到实体项中！</li></ol><blockquote><p>实体列表部分注意：并不是因为 @ApiModel 注解让实体显示在 Models 列表里，而是只要出现在接口方法的返回值上的实体都会显示在这里，而 @ApiModel 和 @ApiModelProperty 这两个注解只是为实体添加注释的。前者为类添加注释，后者为类属性添加注释。</p></blockquote><h3 id="swagger2-注解"><a href="#swagger2-注解" class="headerlink" title="swagger2 注解"></a>swagger2 注解</h3><h4 id="注解整体说明"><a href="#注解整体说明" class="headerlink" title="注解整体说明"></a>注解整体说明</h4><p><strong>用于 controller 类上：</strong></p><table><thead><tr><th>注解</th><th>说明</th></tr></thead><tbody><tr><td> @Api</td><td> 对请求类的说明</td></tr></tbody></table><p><strong>用于方法上面（说明参数的含义）：</strong></p><table><thead><tr><th>注解</th><th>说明</th></tr></thead><tbody><tr><td> @ApiOperation</td><td> 方法的说明</td></tr><tr><td> @ApiImplicitParams、@ApiImplicitParam</td><td> 方法的参数的说明；@ApiImplicitParams 用于指定单个参数的说明</td></tr></tbody></table><p><strong>用于方法上面（返回参数或对象的说明）：</strong></p><table><thead><tr><th>注解</th><th>说明</th></tr></thead><tbody><tr><td> @ApiResponses、@ApiResponse</td><td> 方法返回值的说明 ；@ApiResponses 用于指定单个参数的说明</td></tr></tbody></table><p><strong>对象类：</strong></p><table><thead><tr><th>注解</th><th>说明</th></tr></thead><tbody><tr><td> @ApiModel</td><td> 用在 JavaBean 类上，说明 JavaBean 的 用途</td></tr><tr><td> @ApiModelProperty</td><td> 用在 JavaBean 类的属性上面，说明此属性的的含议</td></tr></tbody></table><h4 id="Api"><a href="#Api" class="headerlink" title="@Api"></a>@Api</h4><p>@Api：请求类的说明</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Api</span>：放在 请求的类上，与 <span class="token annotation punctuation">@Controller</span> 并列，说明类的作用，如用户模块，订单类等。tags<span class="token operator">=</span><span class="token string">"说明该类的作用"</span>value<span class="token operator">=</span><span class="token string">"该参数没什么意义，所以不需要配置"</span></code></pre><p><code>@Api</code> 其它属性配置：</p><table><thead><tr><th>属性名称</th><th>备注</th></tr></thead><tbody><tr><td> value</td><td>url 的路径值</td></tr><tr><td> tags</td><td> 如果设置这个值、value 的值会被覆盖</td></tr><tr><td> description</td><td> 对 api 资源的描述</td></tr><tr><td> basePath</td><td> 基本路径</td></tr><tr><td> position</td><td> 如果配置多个 Api 想改变显示的顺序位置</td></tr><tr><td> produces</td><td> 如，“application/json, application/xml”</td></tr><tr><td>consumes</td><td> 如，“application/json, application/xml”</td></tr><tr><td>protocols</td><td> 协议类型，如: http, https, ws, wss.</td></tr><tr><td>authorizations</td><td> 高级特性认证时配置</td></tr><tr><td> hidden</td><td> 配置为 true ，将在文档中隐藏</td></tr></tbody></table><h4 id="ApiOperation"><a href="#ApiOperation" class="headerlink" title="@ApiOperation"></a>@ApiOperation</h4><p>@ApiOperation：方法的说明</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@ApiOperation</span>：<span class="token string">"用在请求的方法上，说明方法的作用"</span>value<span class="token operator">=</span><span class="token string">"说明方法的作用"</span>notes<span class="token operator">=</span><span class="token string">"方法的备注说明"</span></code></pre><p>@ApiImplicitParams、@ApiImplicitParam：方法参数的说明</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@ApiImplicitParams</span>：用在请求的方法上，包含一组参数说明<span class="token annotation punctuation">@ApiImplicitParam</span>：对单个参数的说明        name：参数名    value：参数的说明、描述    required：参数是否必须必填    paramType：参数放在哪个地方        · query <span class="token operator">--</span><span class="token operator">&gt;</span> 请求参数的获取：<span class="token annotation punctuation">@RequestParam</span>        · header <span class="token operator">--</span><span class="token operator">&gt;</span> 请求参数的获取：<span class="token annotation punctuation">@RequestHeader</span>              · path（用于restful接口）<span class="token operator">--</span><span class="token operator">&gt;</span> 请求参数的获取：<span class="token annotation punctuation">@PathVariable</span>        · body（请求体）<span class="token operator">--</span><span class="token operator">&gt;</span>  <span class="token annotation punctuation">@RequestBody</span> <span class="token class-name">User</span> user        · form（普通表单提交）       dataType：参数类型，默认<span class="token class-name">String</span>，其它值dataType<span class="token operator">=</span><span class="token string">"Integer"</span>       defaultValue：参数的默认值</code></pre><h4 id="ApiResponses"><a href="#ApiResponses" class="headerlink" title="@ApiResponses"></a>@ApiResponses</h4><p>@ApiResponses、@ApiResponse：方法返回值的状态码说明</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@ApiResponses</span>：方法返回对象的说明<span class="token annotation punctuation">@ApiResponse</span>：每个参数的说明    code：数字，例如<span class="token number">400</span>    message：信息，例如<span class="token string">"请求参数没填好"</span>    response：抛出异常的类</code></pre><h4 id="ApiModel"><a href="#ApiModel" class="headerlink" title="@ApiModel"></a>@ApiModel</h4><p>@ApiModel：用于 JavaBean 上面，表示对 JavaBean 的功能描述</p><p><code>@ApiModel</code> 的用途有 2 个：</p><ol><li>当请求数据描述，即 <code>@RequestBody</code> 时， 用于封装请求（包括数据的各种校验）数据；</li><li>当响应值是对象时，即 <code>@ResponseBody</code> 时，用于返回值对象的描述。</li></ol><h4 id="ApiModelProperty"><a href="#ApiModelProperty" class="headerlink" title="@ApiModelProperty"></a>@ApiModelProperty</h4><p>@ApiModelProperty：用在 JavaBean 类的属性上面，说明属性的含义</p><h3 id="Swagger-示例"><a href="#Swagger-示例" class="headerlink" title="Swagger 示例"></a>Swagger 示例</h3><h4 id="API基本信息配置类"><a href="#API基本信息配置类" class="headerlink" title="API基本信息配置类"></a>API 基本信息配置类</h4><p>要想使用 Swagger，必须编写一个配置类来配置 Swagger，这里的配置类如下：</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Configuration</span><span class="token annotation punctuation">@EnableSwagger2</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SwaggerConfig</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Bean</span>    <span class="token keyword">public</span> <span class="token class-name">Docket</span> <span class="token function">docket</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token comment">// 构造函数传入初始化规范，这是swagger2规范</span>        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Docket</span><span class="token punctuation">(</span><span class="token class-name">DocumentationType</span><span class="token punctuation">.</span>SWAGGER_2<span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">apiInfo</span><span class="token punctuation">(</span><span class="token function">apiInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">//apiInfo： 添加api详情信息，参数为ApiInfo类型的参数</span>                <span class="token punctuation">.</span><span class="token function">groupName</span><span class="token punctuation">(</span><span class="token string">"System"</span><span class="token punctuation">)</span> <span class="token comment">// 配置分组</span>                <span class="token punctuation">.</span><span class="token function">enable</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token comment">// 配置是否启用Swagger，如果是false，在浏览器将无法访问，默认是true</span>                <span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">apis</span><span class="token punctuation">(</span><span class="token class-name">RequestHandlerSelectors</span><span class="token punctuation">.</span><span class="token function">basePackage</span><span class="token punctuation">(</span><span class="token string">"com.system.controller"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">//apis： 添加过滤条件,</span>                <span class="token punctuation">.</span><span class="token function">paths</span><span class="token punctuation">(</span><span class="token class-name">PathSelectors</span><span class="token punctuation">.</span><span class="token function">any</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">//paths： 这里是控制哪些路径的api会被显示出来</span>                <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">pathMapping</span><span class="token punctuation">(</span><span class="token string">"/"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token class-name">ApiInfo</span> <span class="token function">apiInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token class-name">Contact</span> contact<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Contact</span><span class="token punctuation">(</span><span class="token string">"xiaojue"</span><span class="token punctuation">,</span><span class="token string">"http://localhost:8181"</span><span class="token punctuation">,</span><span class="token string">"hellojue@foxmail.com"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">ApiInfoBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">contact</span><span class="token punctuation">(</span>contact<span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">title</span><span class="token punctuation">(</span><span class="token string">"API文档"</span><span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">description</span><span class="token punctuation">(</span><span class="token string">"系统API文档"</span><span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">termsOfServiceUrl</span><span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">version</span><span class="token punctuation">(</span><span class="token string">"1.0"</span><span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p>效果如下：</p><p><img src="/images/2020/11/image-20201111113952683.png" alt="image-20201111113952683" loading="lazy"></p><h5 id="配置API分组"><a href="#配置API分组" class="headerlink" title="配置API分组"></a>配置 API 分组</h5><p>通过 Swagger 实例 Docket 的 <code>groupName()</code> 方法即可配置分组，如果没有配置分组默认是 default，代码如下：</p><pre class="language-javascript" data-language="javascript"><code class="language-javascript">@Bean<span class="token keyword">public</span> Docket <span class="token function">docket2</span><span class="token punctuation">(</span><span class="token parameter">Environment environment</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>   <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Docket</span><span class="token punctuation">(</span>DocumentationType<span class="token punctuation">.</span><span class="token constant">SWAGGER_2</span><span class="token punctuation">)</span>      <span class="token punctuation">.</span><span class="token function">apiInfo</span><span class="token punctuation">(</span><span class="token function">apiInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 配置基本API信息</span>      <span class="token punctuation">.</span><span class="token function">groupName</span><span class="token punctuation">(</span><span class="token string">"hello"</span><span class="token punctuation">)</span> <span class="token comment">// 配置分组</span>       <span class="token comment">// 省略配置....</span><span class="token punctuation">}</span></code></pre><h5 id="配置多个分组"><a href="#配置多个分组" class="headerlink" title="配置多个分组"></a>配置多个分组</h5><p>很简单，配置多个分组只需要配置多个 docket 即可，代码如下：</p><pre class="language-javascript" data-language="javascript"><code class="language-javascript">@Bean<span class="token keyword">public</span> Docket <span class="token function">docket1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>   <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Docket</span><span class="token punctuation">(</span>DocumentationType<span class="token punctuation">.</span><span class="token constant">SWAGGER_2</span><span class="token punctuation">)</span>      <span class="token punctuation">.</span><span class="token function">groupName</span><span class="token punctuation">(</span><span class="token string">"组一"</span><span class="token punctuation">)</span>      <span class="token comment">// 省略配置....</span><span class="token punctuation">}</span>@Bean<span class="token keyword">public</span> Docket <span class="token function">docket2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>   <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Docket</span><span class="token punctuation">(</span>DocumentationType<span class="token punctuation">.</span><span class="token constant">SWAGGER_2</span><span class="token punctuation">)</span>     <span class="token punctuation">.</span><span class="token function">groupName</span><span class="token punctuation">(</span><span class="token string">"组二"</span><span class="token punctuation">)</span>     <span class="token comment">// 省略配置....</span><span class="token punctuation">}</span>@Bean<span class="token keyword">public</span> Docket <span class="token function">docket3</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>   <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Docket</span><span class="token punctuation">(</span>DocumentationType<span class="token punctuation">.</span><span class="token constant">SWAGGER_2</span><span class="token punctuation">)</span>     <span class="token punctuation">.</span><span class="token function">groupName</span><span class="token punctuation">(</span><span class="token string">"组三"</span><span class="token punctuation">)</span>     <span class="token comment">// 省略配置....</span><span class="token punctuation">}</span></code></pre><h4 id="接口注解"><a href="#接口注解" class="headerlink" title="接口注解"></a>接口注解</h4><pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Api</span><span class="token punctuation">(</span>tags <span class="token operator">=</span> <span class="token string">"菜单权限接口"</span><span class="token punctuation">)</span><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/menu"</span><span class="token punctuation">)</span><span class="token annotation punctuation">@RestController</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MenuController</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Autowired</span>    <span class="token keyword">private</span> <span class="token class-name">MenuService</span> menuService<span class="token punctuation">;</span>        <span class="token annotation punctuation">@ApiOperation</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"新增菜单"</span><span class="token punctuation">)</span>    <span class="token annotation punctuation">@PostMapping</span><span class="token punctuation">(</span><span class="token string">"/add"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token class-name">ResponseBean</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestBody</span> <span class="token annotation punctuation">@Validated</span> <span class="token class-name">MenuVO</span> menuVO<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token class-name">Menu</span> node <span class="token operator">=</span> menuService<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>menuVO<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"id"</span><span class="token punctuation">,</span> node<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"menuName"</span><span class="token punctuation">,</span> node<span class="token punctuation">.</span><span class="token function">getMenuName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"children"</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"icon"</span><span class="token punctuation">,</span> node<span class="token punctuation">.</span><span class="token function">getIcon</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token class-name">ResponseBean</span><span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span>map<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p>效果如下：</p><p><img src="/images/2020/11/image-20201111141157829.png" alt="image-20201111141157829" loading="lazy"></p><p><img src="/images/2020/11/image-20201111113642972.png" alt="image-20201111113642972" loading="lazy"></p><h4 id="模型类注解"><a href="#模型类注解" class="headerlink" title="模型类注解"></a>模型类注解</h4><pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@ApiModel</span><span class="token punctuation">(</span><span class="token string">"菜单实体类"</span><span class="token punctuation">)</span><span class="token annotation punctuation">@Data</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MenuVO</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@ApiModelProperty</span><span class="token punctuation">(</span><span class="token string">"编号"</span><span class="token punctuation">)</span>    <span class="token keyword">private</span> <span class="token class-name">Long</span> id<span class="token punctuation">;</span>    <span class="token annotation punctuation">@ApiModelProperty</span><span class="token punctuation">(</span><span class="token string">"父级id"</span><span class="token punctuation">)</span>    <span class="token keyword">private</span> <span class="token class-name">Long</span> parentId<span class="token punctuation">;</span>    <span class="token annotation punctuation">@ApiModelProperty</span><span class="token punctuation">(</span><span class="token string">"菜单名称"</span><span class="token punctuation">)</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> menuName<span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><p>效果如下：</p><p><img src="/images/2020/11/image-20201111140618878.png" alt="image-20201111140618878" loading="lazy"></p>]]></content>
    
    
    <summary type="html">&lt;h3 id=&quot;Swagger-介绍&quot;&gt;&lt;a href=&quot;#Swagger-介绍&quot; class=&quot;headerlink&quot; title=&quot;Swagger 介绍&quot;&gt;&lt;/a&gt;Swagger 介绍&lt;/h3&gt;&lt;p&gt;Swagger 是一个规范和完整的框架，用于生成、描述、调用和可视化 RESTful 风格的 Web 服务。&lt;/p&gt;
&lt;p&gt;总体目标是使客户端和文件系统作为服务器以同样的速度来更新。文件的方法、参数和模型紧密集成到服务器端的代码，允许 API 来始终保持同步。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;官网：&lt;a href=&quot;https://swagger.io/&quot;&gt;https://swagger.io/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;GitHub：&lt;a href=&quot;https://github.com/swagger-api&quot;&gt;https://github.com/swagger-api&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</summary>
    
    
    
    <category term="Java" scheme="https://jueee.github.io/categories/Java/"/>
    
    <category term="JavaJar" scheme="https://jueee.github.io/categories/Java/JavaJar/"/>
    
    
    <category term="Java" scheme="https://jueee.github.io/tags/Java/"/>
    
    <category term="JavaJar" scheme="https://jueee.github.io/tags/JavaJar/"/>
    
    <category term="RESTful" scheme="https://jueee.github.io/tags/RESTful/"/>
    
  </entry>
  
  <entry>
    <title>RESTful 架构的介绍和使用</title>
    <link href="https://jueee.github.io/2020/11/2020-11-10-RESTful%E6%9E%B6%E6%9E%84%E7%9A%84%E4%BB%8B%E7%BB%8D%E5%92%8C%E4%BD%BF%E7%94%A8/"/>
    <id>https://jueee.github.io/2020/11/2020-11-10-RESTful%E6%9E%B6%E6%9E%84%E7%9A%84%E4%BB%8B%E7%BB%8D%E5%92%8C%E4%BD%BF%E7%94%A8/</id>
    <published>2020-11-10T00:00:00.000Z</published>
    <updated>2020-11-11T07:40:06.620Z</updated>
    
    <content type="html"><![CDATA[<h3 id="REST"><a href="#REST" class="headerlink" title="REST"></a>REST</h3><p>REST（Representational State Transfer）表象化状态转变（表述性状态转变），在 2000 年被提出，基于 HTTP、URI、XML、JSON 等标准和协议，支持轻量级、跨平台、跨语言的架构设计。</p><a id="more"></a><h3 id="RESTful-介绍"><a href="#RESTful-介绍" class="headerlink" title="RESTful 介绍"></a>RESTful 介绍</h3><h4 id="主要特点"><a href="#主要特点" class="headerlink" title="主要特点"></a>主要特点</h4><ul><li>每一个 URI 代表 1 种资源；</li><li>客户端使用 GET、POST、PUT、DELETE 4 个表示操作方式的动词对服务端资源进行操作<ul><li> GET 用来获取资源</li><li> POST 用来新建资源（也可以用于更新资源）</li><li>PUT 用来更新资源</li><li> DELETE 用来删除资源</li></ul></li><li>通过操作资源的表现形式来操作资源</li><li>资源的表现形式是 XML 或者 HTML</li><li> 客户端与服务端之间的交互在请求之间是无状态的，从客户端到服务端的每个请求都必须包含理解请求所必需的信息。</li></ul><p>符合上述 REST 原则的架构方式称为 RESTful。</p><div class="note info"><p> <strong>无状态性</strong></p><p>使得客户端和服务器端不必保存对方的详细信息，服务器只需要处理当前的请求，不需了解请求的历史。可以更容易的释放资源，让服务器利用 Pool（连接池）技术来提高稳定性和性能。</p></div><h4 id="资源操作"><a href="#资源操作" class="headerlink" title="资源操作"></a>资源操作</h4><table><thead><tr><th><strong>http 方法</strong></th><th><strong>资源操作</strong></th><th><strong>幂等</strong></th><th><strong>安全</strong></th></tr></thead><tbody><tr><td> GET</td><td>SELECT</td><td> 是</td><td>是</td></tr><tr><td> POST</td><td>INSERT</td><td> 否</td><td>否</td></tr><tr><td> PUT</td><td>UPDATE</td><td> 是</td><td>否</td></tr><tr><td> DELETE</td><td>DELETE</td><td> 是</td><td>否</td></tr></tbody></table><p><strong>幂等性</strong>：对同一 REST 接口的多次访问，得到的资源状态是相同的。</p><p><strong>安全性</strong>：对该 REST 接口访问，不会使服务器端资源的状态发生改变。</p><h3 id="RESTful-API-设计指南"><a href="#RESTful-API-设计指南" class="headerlink" title="RESTful API 设计指南"></a>RESTful API 设计指南</h3><h4 id="路径（Endpoint）"><a href="#路径（Endpoint）" class="headerlink" title="路径（Endpoint）"></a>路径（Endpoint）</h4><p>路径又称 "终点"（endpoint），表示 API 的具体网址。</p><p>在 RESTful 架构中，每个网址代表一种资源（resource），所以网址中不能有动词，只能有名词，而且所用的名词往往与数据库的表格名对应。</p><p>一般来说，数据库中的表都是同种记录的 "集合"（collection），所以 API 中的名词也应该使用复数。</p><h4 id="HTTP动词"><a href="#HTTP动词" class="headerlink" title="HTTP动词"></a>HTTP 动词</h4><p>对于资源的具体操作类型，由 HTTP 动词表示。</p><p>常用的 HTTP 动词有下面五个（括号里是对应的 SQL 命令）。</p><ul><li>GET（SELECT）：从服务器取出资源（一项或多项）。</li><li>POST（CREATE）：在服务器新建一个资源。</li><li>PUT（UPDATE）：在服务器更新资源（客户端提供改变后的完整资源）。</li><li>PATCH（UPDATE）：在服务器更新资源（客户端提供改变的属性）。</li><li>DELETE（DELETE）：从服务器删除资源。</li></ul><p>还有两个不常用的 HTTP 动词。</p><ul><li>HEAD：获取资源的元数据。</li><li>OPTIONS：获取信息，关于资源的哪些属性是客户端可以改变的。</li></ul><h4 id="过滤信息（Filtering）"><a href="#过滤信息（Filtering）" class="headerlink" title="过滤信息（Filtering）"></a>过滤信息（Filtering）</h4><p>如果记录数量很多，服务器不可能都将它们返回给用户。API 应该提供参数，过滤返回结果。</p><p>下面是一些常见的参数。</p><blockquote><ul><li>?limit=10：指定返回记录的数量</li><li> ?offset=10：指定返回记录的开始位置。</li><li>?page=2&amp;per_page=100：指定第几页，以及每页的记录数。</li><li>?sortby=name&amp;order=asc：指定返回结果按照哪个属性排序，以及排序顺序。</li><li>?animal_type_id=1：指定筛选条件</li></ul></blockquote><h4 id="状态码（Status-Codes）"><a href="#状态码（Status-Codes）" class="headerlink" title="状态码（Status Codes）"></a>状态码（Status Codes）</h4><p>服务器向用户返回的状态码和提示信息，常见的有以下一些（方括号中是该状态码对应的 HTTP 动词）。</p><blockquote><ul><li>200 OK - [GET]：服务器成功返回用户请求的数据，该操作是幂等的（Idempotent）。</li><li>201 CREATED - [POST/PUT/PATCH]：用户新建或修改数据成功。</li><li>202 Accepted - [*]：表示一个请求已经进入后台排队（异步任务）</li><li>204 NO CONTENT - [DELETE]：用户删除数据成功。</li><li>400 INVALID REQUEST - [POST/PUT/PATCH]：用户发出的请求有错误，服务器没有进行新建或修改数据的操作，该操作是幂等的。</li><li>401 Unauthorized - [*]：表示用户没有权限（令牌、用户名、密码错误）。</li><li>403 Forbidden - [*] 表示用户得到授权（与 401 错误相对），但是访问是被禁止的。</li><li>404 NOT FOUND - [*]：用户发出的请求针对的是不存在的记录，服务器没有进行操作，该操作是幂等的。</li><li>406 Not Acceptable - [GET]：用户请求的格式不可得（比如用户请求 JSON 格式，但是只有 XML 格式）。</li><li>410 Gone -[GET]：用户请求的资源被永久删除，且不会再得到的。</li><li>422 Unprocesable entity - [POST/PUT/PATCH] 当创建一个对象时，发生一个验证错误。</li><li>500 INTERNAL SERVER ERROR - [*]：服务器发生错误，用户将无法判断发出的请求是否成功。</li></ul></blockquote><p>状态码的完全列表参见 <span class="exturl" data-url="aHR0cDovL3d3dy53My5vcmcvUHJvdG9jb2xzL3JmYzI2MTYvcmZjMjYxNi1zZWMxMC5odG1s">这里<i class="fa fa-external-link-alt"></i></span>。</p><h4 id="错误处理（Error-handling）"><a href="#错误处理（Error-handling）" class="headerlink" title="错误处理（Error handling）"></a>错误处理（Error handling）</h4><p>如果状态码是 4xx，就应该向用户返回出错信息。一般来说，返回的信息中将 error 作为键名，出错信息作为键值即可。</p><pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token punctuation">{</span>    error<span class="token operator">:</span> <span class="token string">"Invalid API key"</span><span class="token punctuation">}</span></code></pre><h4 id="返回结果"><a href="#返回结果" class="headerlink" title="返回结果"></a>返回结果</h4><p>针对不同操作，服务器向用户返回的结果应该符合以下规范。</p><ul><li>GET /collection：返回资源对象的列表（数组）</li><li>GET /collection/resource：返回单个资源对象</li><li> POST /collection：返回新生成的资源对象</li><li> PUT /collection/resource：返回完整的资源对象</li><li> PATCH /collection/resource：返回完整的资源对象</li><li> DELETE /collection/resource：返回一个空文档</li></ul><h3 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h3><ul><li><span class="exturl" data-url="aHR0cDovL3Jlc3RmdWwucDJocC5jb20v">http://restful.p2hp.com/<i class="fa fa-external-link-alt"></i></span></li><li><span class="exturl" data-url="aHR0cDovL3d3dy5ydWFueWlmZW5nLmNvbS9ibG9nLzIwMTQvMDUvcmVzdGZ1bF9hcGkuaHRtbA==">http://www.ruanyifeng.com/blog/2014/05/restful_api.html<i class="fa fa-external-link-alt"></i></span></li></ul>]]></content>
    
    
    <summary type="html">&lt;h3 id=&quot;REST&quot;&gt;&lt;a href=&quot;#REST&quot; class=&quot;headerlink&quot; title=&quot;REST&quot;&gt;&lt;/a&gt;REST&lt;/h3&gt;&lt;p&gt;REST（Representational State Transfer）表象化状态转变（表述性状态转变），在 2000 年被提出，基于 HTTP、URI、XML、JSON 等标准和协议，支持轻量级、跨平台、跨语言的架构设计。&lt;/p&gt;</summary>
    
    
    
    <category term="Java" scheme="https://jueee.github.io/categories/Java/"/>
    
    
    <category term="RESTful" scheme="https://jueee.github.io/tags/RESTful/"/>
    
  </entry>
  
  <entry>
    <title>基于 Vue+ElementUI 的后台集成方案 vue-element-admin</title>
    <link href="https://jueee.github.io/2020/11/2020-11-09-%E5%9F%BA%E4%BA%8EVue+ElementUI%E7%9A%84%E5%90%8E%E5%8F%B0%E9%9B%86%E6%88%90%E6%96%B9%E6%A1%88vue-element-admin/"/>
    <id>https://jueee.github.io/2020/11/2020-11-09-%E5%9F%BA%E4%BA%8EVue+ElementUI%E7%9A%84%E5%90%8E%E5%8F%B0%E9%9B%86%E6%88%90%E6%96%B9%E6%A1%88vue-element-admin/</id>
    <published>2020-11-09T00:00:00.000Z</published>
    <updated>2020-11-13T11:03:10.430Z</updated>
    
    <content type="html"><![CDATA[<h3 id="vue-element-admin"><a href="#vue-element-admin" class="headerlink" title="vue-element-admin"></a>vue-element-admin</h3><p>vue-element-admin 是一个后台前端解决方案，它基于 <span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL3Z1ZWpzL3Z1ZQ==">vue<i class="fa fa-external-link-alt"></i></span> 和 <span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL0VsZW1lRkUvZWxlbWVudA==">element-ui<i class="fa fa-external-link-alt"></i></span> 实现。</p><p>它使用了最新的前端技术栈，内置了 i18n 国际化解决方案，动态路由，权限验证，提炼了典型的业务模型，提供了丰富的功能组件，它可以帮助你快速搭建企业级中后台产品原型。</p><ul><li><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL1BhbkppYUNoZW4vdnVlLWVsZW1lbnQtYWRtaW4=">GitHub<i class="fa fa-external-link-alt"></i></span>，<span class="exturl" data-url="aHR0cHM6Ly9wYW5qaWFjaGVuLmdpdGh1Yi5pby92dWUtZWxlbWVudC1hZG1pbi8=">在线预览<i class="fa fa-external-link-alt"></i></span>，<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL1BhbkppYUNoZW4vdnVlLWVsZW1lbnQtYWRtaW4vd2lraQ==">Wiki<i class="fa fa-external-link-alt"></i></span></li><li><span class="exturl" data-url="aHR0cHM6Ly9naXRlZS5jb20vcGFuamlhY2hlbi92dWUtZWxlbWVudC1hZG1pbg==">Gitee<i class="fa fa-external-link-alt"></i></span>，<span class="exturl" data-url="aHR0cHM6Ly9wYW5qaWFjaGVuLmdpdGVlLmlvL3Z1ZS1lbGVtZW50LWFkbWluLw==">在线预览<i class="fa fa-external-link-alt"></i></span>，<span class="exturl" data-url="aHR0cHM6Ly9wYW5qaWFjaGVuLmdpdGVlLmlvL3Z1ZS1lbGVtZW50LWFkbWluLXNpdGUvemgvZ3VpZGUv">使用文档<i class="fa fa-external-link-alt"></i></span></li><li><span class="exturl" data-url="aHR0cHM6Ly93d3cub3NjaGluYS5uZXQvcC92dWUtZWxlbWVudC1hZG1pbg==">OSChina<i class="fa fa-external-link-alt"></i></span></li></ul><a id="more"></a><p>vue-element-admin 的定位是后台集成方案，不适合当基础模板来开发。</p><h4 id="目录结构"><a href="#目录结构" class="headerlink" title="目录结构"></a>目录结构</h4><pre class="language-bash" data-language="bash"><code class="language-bash">├── build                      // 构建相关  ├── config                     // 配置相关├── src                        // 源代码│   ├── api                    // 所有请求│   ├── assets                 // 主题 字体等静态资源│   ├── components             // 全局公用组件│   ├── directive              // 全局指令│   ├── filtres                // 全局 filter│   ├── icons                  // 项目所有 svg icons│   ├── lang                   // 国际化 language│   ├── mock                   // 项目mock 模拟数据│   ├── router                 // 路由│   ├── store                  // 全局 store管理│   ├── styles                 // 全局样式│   ├── utils                  // 全局公用方法│   ├── vendor                 // 公用vendor│   ├── views                   // view│   ├── App.vue                // 入口页面│   ├── main.js                // 入口 加载组件 初始化等│   └── permission.js          // 权限管理├── static                     // 第三方不打包资源│   └── Tinymce                // 富文本├── .babelrc                   // babel-loader 配置├── eslintrc.js                // eslint 配置项├── .gitignore                 // <span class="token function">git</span> 忽略项├── favicon.ico                // favicon图标├── index.html                 // html模板└── package.json               // package.json</code></pre><h4 id="关联项目"><a href="#关联项目" class="headerlink" title="关联项目"></a>关联项目</h4><ul><li>基础模板： <span class="exturl" data-url="aHR0cHM6Ly9naXRlZS5jb20vcGFuamlhY2hlbi92dWUtYWRtaW4tdGVtcGxhdGU=">vueAdmin-template<i class="fa fa-external-link-alt"></i></span> </li><li> 桌面终端： <span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL1BhbkppYUNoZW4vZWxlY3Ryb24tdnVlLWFkbWlu">electron-vue-admin<i class="fa fa-external-link-alt"></i></span></li></ul><h3 id="vue-admin-template"><a href="#vue-admin-template" class="headerlink" title="vue-admin-template"></a>vue-admin-template</h3><ul><li>GitHub：<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL1BhbkppYUNoZW4vdnVlLWFkbWluLXRlbXBsYXRl">https://github.com/PanJiaChen/vue-admin-template<i class="fa fa-external-link-alt"></i></span></li><li> 演示地址：<span class="exturl" data-url="aHR0cHM6Ly9wYW5qaWFjaGVuLmdpdGh1Yi5pby92dWUtYWRtaW4tdGVtcGxhdGU=">https://panjiachen.github.io/vue-admin-template<i class="fa fa-external-link-alt"></i></span></li></ul><p><strong>vueAdmin-template</strong> 主要是基于 vue-cli webpack 模板为基础开发的，引入了如下 dependencies:</p><ul><li>element-ui 饿了么出品的 vue2.0 pc UI 框架</li><li> axios 一个现在主流并且很好用的请求库 支持 Promise</li><li>js-cookie 一个轻量的 JavaScript 库来处理 cookie</li><li>normalize.css 格式化 css</li><li>nprogress 轻量的全局进度条控制</li><li> vuex 官方状态管理</li><li> vue-router 官方路由</li></ul>]]></content>
    
    
    <summary type="html">&lt;h3 id=&quot;vue-element-admin&quot;&gt;&lt;a href=&quot;#vue-element-admin&quot; class=&quot;headerlink&quot; title=&quot;vue-element-admin&quot;&gt;&lt;/a&gt;vue-element-admin&lt;/h3&gt;&lt;p&gt;vue-element-admin 是一个后台前端解决方案，它基于 &lt;a href=&quot;https://github.com/vuejs/vue&quot;&gt;vue&lt;/a&gt; 和 &lt;a href=&quot;https://github.com/ElemeFE/element&quot;&gt;element-ui&lt;/a&gt; 实现。&lt;/p&gt;
&lt;p&gt;它使用了最新的前端技术栈，内置了 i18n 国际化解决方案，动态路由，权限验证，提炼了典型的业务模型，提供了丰富的功能组件，它可以帮助你快速搭建企业级中后台产品原型。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/PanJiaChen/vue-element-admin&quot;&gt;GitHub&lt;/a&gt;，&lt;a href=&quot;https://panjiachen.github.io/vue-element-admin/&quot;&gt;在线预览&lt;/a&gt;，&lt;a href=&quot;https://github.com/PanJiaChen/vue-element-admin/wiki&quot;&gt;Wiki&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://gitee.com/panjiachen/vue-element-admin&quot;&gt;Gitee&lt;/a&gt;，&lt;a href=&quot;https://panjiachen.gitee.io/vue-element-admin/&quot;&gt;在线预览&lt;/a&gt;，&lt;a href=&quot;https://panjiachen.gitee.io/vue-element-admin-site/zh/guide/&quot;&gt;使用文档&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.oschina.net/p/vue-element-admin&quot;&gt;OSChina&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</summary>
    
    
    
    <category term="Vue" scheme="https://jueee.github.io/categories/Vue/"/>
    
    
    <category term="Vue" scheme="https://jueee.github.io/tags/Vue/"/>
    
    <category term="Element" scheme="https://jueee.github.io/tags/Element/"/>
    
  </entry>
  
  <entry>
    <title>Java 安全框架 Apache Shiro 介绍</title>
    <link href="https://jueee.github.io/2020/11/2020-11-08-Java%E5%AE%89%E5%85%A8%E6%A1%86%E6%9E%B6ApacheShiro%E4%BB%8B%E7%BB%8D/"/>
    <id>https://jueee.github.io/2020/11/2020-11-08-Java%E5%AE%89%E5%85%A8%E6%A1%86%E6%9E%B6ApacheShiro%E4%BB%8B%E7%BB%8D/</id>
    <published>2020-11-08T00:00:00.000Z</published>
    <updated>2020-11-30T08:06:19.294Z</updated>
    
    <content type="html"><![CDATA[<h3 id="Apache-Shiro-介绍"><a href="#Apache-Shiro-介绍" class="headerlink" title="Apache Shiro 介绍"></a>Apache Shiro 介绍</h3><p>Apache Shiro 是一个强大灵活的开源安全框架。</p><p>Apache Shiro 可以帮助我们完成：认证、授权、加密、会话管理、与 Web 集成、缓存等。</p><ul><li>官网：<span class="exturl" data-url="aHR0cHM6Ly9zaGlyby5hcGFjaGUub3JnLw==">https://shiro.apache.org/<i class="fa fa-external-link-alt"></i></span></li><li>GitHub：<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2FwYWNoZS9zaGlybw==">https://github.com/apache/shiro<i class="fa fa-external-link-alt"></i></span></li></ul><a id="more"></a><h4 id="Jar-引入"><a href="#Jar-引入" class="headerlink" title="Jar 引入"></a>Jar 引入</h4><pre class="language-xml" data-language="xml"><code class="language-xml"><span class="token comment">&lt;!-- https://mvnrepository.com/artifact/org.apache.shiro/shiro-spring --&gt;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.apache.shiro<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>shiro-spring<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.7.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span></code></pre><h4 id="基本功能点"><a href="#基本功能点" class="headerlink" title="基本功能点"></a>基本功能点</h4><p><img src="/images/2020/11/image-20201106155220875.png" alt="image-20201106155220875" loading="lazy"></p><ul><li><strong>Authentication</strong>：身份认证 / 登录，验证用户是不是拥有相应的身份；</li><li><strong>Authorization</strong>：授权，即权限验证，验证某个已认证的用户是否拥有某个权限；即判断用户是否能做事情，常见的如：验证某个用户是否拥有某个角色。或者细粒度的验证某个用户对某个资源是否具有某个权限；</li><li><strong>Session</strong> <strong>Management</strong>：会话管理，即用户登录后就是一次会话，在没有退出之前，它的所有信息都在会话中；会话可以是普通 JavaSE 环境的，也可以是如 Web 环境的；</li><li><strong>Cryptography</strong>：加密，保护数据的安全性，如密码加密存储到数据库，而不是明文存储；</li><li><strong>Web Support</strong>：Web 支持，可以非常容易的集成到 Web 环境；</li><li><strong>Caching</strong>：缓存，比如用户登录后，其用户信息、拥有的角色 / 权限不必每次去查，这样可以提高效率；</li><li><strong>Concurrency</strong>：shiro 支持多线程应用的并发验证，即如在一个线程中开启另一个线程，能把权限自动传播过去；</li><li><strong>Testing</strong>：提供测试支持；</li><li><strong>Run As</strong>：允许一个用户假装为另一个用户（如果他们允许）的身份进行访问；</li><li><strong>Remember Me</strong>：记住我，这个是非常常见的功能，即一次登录后，下次再来的话不用登录了。</li></ul><p><strong>记住一点，Shiro 不会去维护用户、维护权限；这些需要我们自己去设计 / 提供；然后通过相应的接口注入给 Shiro 即可。</strong></p><h3 id="Apache-Shiro-使用"><a href="#Apache-Shiro-使用" class="headerlink" title="Apache Shiro 使用"></a>Apache Shiro 使用</h3><h4 id="身份验证"><a href="#身份验证" class="headerlink" title="身份验证"></a>身份验证</h4><p><strong>身份验证</strong>，即在应用中谁能证明他就是他本人。一般提供如他们的身份 ID 一些标识信息来表明他就是他本人，如提供身份证，用户名 / 密码来证明。</p><p>在 shiro 中，用户需要提供 <code>principals</code> （身份）和 <code>credentials</code>（证明）给 shiro，从而应用能验证用户身份：</p><p><strong>principals</strong>：身份，即主体的标识属性，可以是任何东西，如用户名、邮箱等，唯一即可。一个主体可以有多个 <code>principals</code>，但只有一个 <code>Primary principals</code>，一般是用户名 / 密码 / 手机号。</p><p><strong>credentials</strong>：证明 / 凭证，即只有主体知道的安全值，如密码 / 数字证书等。</p><ol><li><p>首先准备一些用户身份 / 凭据（shiro.ini）</p><pre class="language-ini" data-language="ini"><code class="language-ini"><span class="token selector">[users]</span><span class="token constant">zhang</span><span class="token attr-value"><span class="token punctuation">=</span>123</span><span class="token constant">wang</span><span class="token attr-value"><span class="token punctuation">=</span>123</span></code></pre><p>此处使用 ini 配置文件，通过 [users] 指定了两个主体：zhang/123、wang/123。</p></li><li><p>示例：</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token comment">//1、获取SecurityManager工厂，此处使用Ini配置文件初始化SecurityManager  </span><span class="token class-name">Factory</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">SecurityManager</span><span class="token punctuation">&gt;</span></span> factory <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">IniSecurityManagerFactory</span><span class="token punctuation">(</span><span class="token string">"classpath:shiro.ini"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//2、得到SecurityManager实例 并绑定给SecurityUtils</span><span class="token class-name">SecurityManager</span> securityManager <span class="token operator">=</span> factory<span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">SecurityUtils</span><span class="token punctuation">.</span><span class="token function">setSecurityManager</span><span class="token punctuation">(</span>securityManager<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//3、得到Subject及创建用户名/密码身份验证Token（即用户身份/凭证）</span><span class="token class-name">Subject</span> subject <span class="token operator">=</span> <span class="token class-name">SecurityUtils</span><span class="token punctuation">.</span><span class="token function">getSubject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">UsernamePasswordToken</span> token <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">UsernamePasswordToken</span><span class="token punctuation">(</span><span class="token string">"zhang"</span><span class="token punctuation">,</span> <span class="token string">"123"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">try</span> <span class="token punctuation">{</span>    <span class="token comment">//4、登录，即身份验证</span>    subject<span class="token punctuation">.</span><span class="token function">login</span><span class="token punctuation">(</span>token<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token comment">//5、身份验证失败</span><span class="token punctuation">}</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>subject<span class="token punctuation">.</span><span class="token function">isAuthenticated</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//6、退出</span>subject<span class="token punctuation">.</span><span class="token function">logout</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></li></ol><h4 id="授权"><a href="#授权" class="headerlink" title="授权"></a>授权</h4><p><strong>基于角色的访问控制（隐式角色）</strong></p><p>在 ini 配置文件配置用户拥有的角色（shiro-role.ini）</p><pre class="language-ini" data-language="ini"><code class="language-ini"><span class="token selector">[users]</span><span class="token constant">zhang</span><span class="token attr-value"><span class="token punctuation">=</span>123,role1,role2</span><span class="token constant">wang</span><span class="token attr-value"><span class="token punctuation">=</span>123,role1</span></code></pre><p>规则即：“用户名 = 密码，角色 1，角色 2”，如果需要在应用中判断用户是否有相应角色，就需要在相应的 Realm 中返回角色信息。</p><p><strong>基于资源的访问控制（显示角色）</strong></p><p>在 ini 配置文件配置用户拥有的角色及角色 - 权限关系</p><pre class="language-ini" data-language="ini"><code class="language-ini"><span class="token selector">[users]</span><span class="token constant">zhang</span><span class="token attr-value"><span class="token punctuation">=</span>123,role1,role2</span><span class="token constant">wang</span><span class="token attr-value"><span class="token punctuation">=</span>123,role1</span><span class="token selector">[roles]</span><span class="token constant">role1</span><span class="token attr-value"><span class="token punctuation">=</span>user:create,user:update</span><span class="token constant">role2</span><span class="token attr-value"><span class="token punctuation">=</span>user:create,user:delete</span></code></pre><p>规则：“用户名 = 密码，角色 1，角色 2”“角色 = 权限 1，权限 2”，即首先根据用户名找到角色，然后根据角色再找到权限</p>]]></content>
    
    
    <summary type="html">&lt;h3 id=&quot;Apache-Shiro-介绍&quot;&gt;&lt;a href=&quot;#Apache-Shiro-介绍&quot; class=&quot;headerlink&quot; title=&quot;Apache Shiro 介绍&quot;&gt;&lt;/a&gt;Apache Shiro 介绍&lt;/h3&gt;&lt;p&gt;Apache Shiro 是一个强大灵活的开源安全框架。&lt;/p&gt;
&lt;p&gt;Apache Shiro 可以帮助我们完成：认证、授权、加密、会话管理、与 Web 集成、缓存等。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;官网：&lt;a href=&quot;https://shiro.apache.org/&quot;&gt;https://shiro.apache.org/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;GitHub：&lt;a href=&quot;https://github.com/apache/shiro&quot;&gt;https://github.com/apache/shiro&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</summary>
    
    
    
    <category term="Java" scheme="https://jueee.github.io/categories/Java/"/>
    
    <category term="JavaJar" scheme="https://jueee.github.io/categories/Java/JavaJar/"/>
    
    <category term="Apache" scheme="https://jueee.github.io/categories/Apache/"/>
    
    <category term="Shiro" scheme="https://jueee.github.io/categories/Apache/Shiro/"/>
    
    
    <category term="Apache" scheme="https://jueee.github.io/tags/Apache/"/>
    
    <category term="Java" scheme="https://jueee.github.io/tags/Java/"/>
    
    <category term="JavaJar" scheme="https://jueee.github.io/tags/JavaJar/"/>
    
  </entry>
  
</feed>
